function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}define("text!environment/dev/products.json",[],function(){return'{\n    "id": "products",\n    "routes": {\n        "html/products(/)": "overview",\n        "html/filters(/)": "filters"\n    },\n    "urls": {\n        "productlist": "/_data/products-productlist.json",\n        "filters": "/_data/products-favourite-products.json",\n        "mijnlijst": "/mijnlijst"\n    }\n}\n'}),define("text!environment/prod/products.json",[],function(){return'{\n    "id": "products",\n    "routes": {\n        "ppr(/)": "overview",\n        "filter/:filter" : "shelfFilter"\n    },\n    "urls": {\n        "productlist": "/service/rest/product/search?rq=kaas",\n        "filters": "/service/rest/product/search?rq=kaas",\n        "mijnlijst": "/mijnlijst"\n    }\n}\n'}),define("products/plugins/environment-plugins",["settings/plugins/environment-plugins.main","text!environment/dev/products.json","text!environment/prod/products.json"],function(){"use strict";var e=require("settings/plugins/environment-plugins.main");return new e.Model($.parseJSON(require("text!environment/"+e.environment+"/products.json")))}),define("text!translation/nl-NL/products.json",[],function(){return'{\n    "products": {\n        "title": "products",\n        "previously-bought": "Eerder gekocht",\n        "dayprice": "Dagprijs",\n        "dayprice-info": "Voor dit product geldt de prijs van de dag waarop het conform jouw reservatie wordt klaargezet voor transport naar het Pick Up Point dat je gekozen hebt. Die prijs wordt je in het Pick Up Point medegedeeld vooraleer je beslist te kopen.",\n        "labels": {\n            "ONLINE_BONUS": "ONLINE",\n            "GALL_DISCOUNT_CARD": "KLANTENKAART",\n            "GALL_DISCOUNT": "KLANTENKAART",\n            "atp-unit-size": "stuks gekozen",\n            "times-purchased": "__quantity__x gekocht",\n            "addAll": "Voeg alles toe",\n            "nutrient-info-not-available": "Geen informatie beschikbaar",\n            "nutrient-info-alt": "Dit product bevat __value____unit__ __nutrient__ per 100 gram",\n            "nutrient-info-alt-not-available": "Geen informatie beschikbaar van leverancier",\n            "nutrient-generic": "Dit product bevat __value____unit__ __type__",\n            "nutrient-purchased": "Dit product bevat __value____unit__ __type__ van je totaalscore. Dit product heb je __quantity__x keer gekocht."\n        },\n        "discount-check-notification": {\n            "bonus": {\n                "desktop": " Bonus",\n                "mobile": ""\n            },\n            "deviation": {\n                "desktop": "+ __modulusDeviation__ voor",\n                "mobile": "+ __modulusDeviation__"\n            }\n        },\n        "buttons": {\n            "delete": {\n                "title": "Verwijder product",\n                "ariaLabel": "Verwijder product van de lijst"\n            },\n            "plus": {\n                "title": "plus",\n                "ariaLabel": "plus"\n            },\n            "min": {\n                "title": "min",\n                "ariaLabel": "min"\n            },\n            "favorite": {\n                "title": "Voeg toe aan favorieten",\n                "ariaLabel": "Voeg toe aan favorieten"\n            },\n            "favorite-wide": {\n                "title": "Maak favoriet",\n                "ariaLabel": "Maak favoriet"\n            },\n            "showControls": {\n                "title": "Aantal wijzigen",\n                "ariaLabel": "Aantal wijzigen"\n            },\n            "cta": {\n                "title": "Voeg toe",\n                "ariaLabel": "Voeg toe"\n            },\n            "replace-with-alternative": {\n                "title": "Kies alternatief",\n                "ariaLabel": "Kies een alternatief"\n            },\n            "choose-alternative": {\n                "title": "Kies",\n                "ariaLabel": "Kies"\n            },\n            "predictMyList": {\n                "title": "Bekijk je suggesties",\n                "ariaLabel": "Bekijk je suggesties"\n            },\n            "multiBuy": {\n                "title": "Voeg alles toe",\n                "ariaLabel": "Voeg alles toe"\n            }\n        },\n        "input": {\n            "quantity": {\n                "title": "hoeveelheid aanpassen",\n                "ariaLabel": "hoeveelheid aanpassen"\n            }\n        },\n        "recipeMixer": {\n            "change": {\n                "title": "Bekijk of wissel je 3 gerechten"\n            },\n            "view": {\n                "title": "Bekijk je 3 gerechten"\n            }\n        },\n        "alternative": {\n            "title": "Kies alternatief"\n        },\n        "compare": {\n            "title": "Vergelijk"\n        },\n        "products": {\n            "title": "Pak je voordeel"\n        },\n        "selectedAlternative": {\n            "title": "Klaar met kiezen"\n        },\n        "sample": {\n            "title": "Kies product"\n        },\n        "unspecified": {\n            "title": "Kies product"\n        },\n        "combi": {\n            "title": "Kies doos of fles"\n        },\n        "filters": {\n            "load-more": "Bekijk alles",\n            "load-less": "Bekijk minder",\n            "close": "Sluiten"\n        },\n        "spotlight": {\n            "title": "Snel naar"\n        },\n        "predictMyList": {\n            "unsubscribe": {\n                "body": "Weet je het zeker dat je wilt afmelden?",\n                "confirmLabel": "Ja, meld mij af",\n                "cancelLabel": "Nee, blijf aangemeld"\n            }\n        }\n    }\n}\n'}),define("text!translation/nl-BE/products.json",[],function(){return'{\n    "products": {}\n}\n'}),define("products/plugins/localisation-plugins",["text!translation/nl-NL/products.json","text!translation/nl-BE/products.json"],function(){"use strict";return Backbone.mediator.request("i18n:add","text!translation/nl-NL/products.json"),Backbone.mediator.request("i18n:add","text!translation/nl-BE/products.json"),null}),define("products/plugins/plugins",["products/plugins/environment-plugins","products/plugins/localisation-plugins"],function(){"use strict";return null}),define("products/model/product.factory.model",["require","settings/components/factory/model/factory.model"],function(e){"use strict";var t=e("settings/components/factory/model/factory.model");return t.extend({getView:function(e,i){return i.model.has("viewType")&&(e+="-"+i.model.get("viewType")),t.prototype.getView.call(this,e)}})}),define("products/enums/product-view-type.enum",[],function(){"use strict";return{CARD:"Card",LIST:"List",HERO:"Hero",LIST_WIDE:"ListWide",SPOTLIGHT_LARGE:"SpotlightLarge"}}),define("products/enums/products.type.enum",["require","products/enums/product-view-type.enum"],function(e){"use strict";var t=e("products/enums/product-view-type.enum");return{ALTERNATIVE_PRODUCT:"AlternativeProduct",BONUS_GROUP:"BonusGroup",BONUS_GROUP_CARD:"BonusGroup-"+t.CARD,BONUS_GROUP_LIST:"BonusGroup-"+t.LIST,BONUS_GROUP_LIST_WIDE:"BonusGroup-"+t.LIST_WIDE,BONUS_GROUP_SPOTLIGHT_LARGE:"BonusGroup-"+t.SPOTLIGHT_LARGE,BREADCRUMB_TRAIL:"BreadcrumbTrail",CHEVRON:"Chevron",COMBI:"Combi",COMBI_CARD:"Combi-"+t.CARD,COMBI_LIST:"Combi-"+t.LIST,FAVORITE_PRODUCT:"FavouriteProduct",FILTER_BAR:"FilterBar",LISTITEM:"ProductListItem",PRODUCT:"Product",PRODUCT_HERO:"Product-"+t.HERO,PRODUCT_CARD:"Product-"+t.CARD,PRODUCT_LIST:"Product-"+t.LIST,PRODUCT_LIST_WIDE:"Product-"+t.LIST_WIDE,PRODUCT_DISCLAIMER:"ProductDisclaimer",PRODUCT_SEO_BREADCRUMB:"ProductSeoBreadcrumb",PRODUCT_NASA:"ProductHqId",UNCHANGEABLE_PRODUCT_CARD:"UnchangeableProduct-"+t.CARD,UNCHANGEABLE_PRODUCT_LIST:"UnchangeableProduct-"+t.LIST,UNCHANGEABLE_PRODUCT_LIST_WIDE:"UnchangeableProduct-"+t.LIST_WIDE,UNCHANGEABLE_PRODUCT_HERO:"UnchangeableProduct-"+t.HERO,PRODUCT_COLLECTION:"ProductCollection",PRODUCT_SELECTION:"ProductSelection",QUICK_SEARCH:"QuickSearch",RECIPE:"Recipe",SPOTLIGHT:"FilterItem",SAMPLE:"Sample",SAMPLE_CARD:"Sample-"+t.CARD,SAMPLE_LIST:"Sample-"+t.LIST,SAMPLE_LIST_WIDE:"Sample-"+t.LIST_WIDE,SHOP_IN_SHOP:"ProductShops",UNCHANGEABLE_PRODUCT:"UnchangeableProduct",UNSPECIFIED:"UnspecifiedItem",UNSPECIFIED_CARD:"UnspecifiedItem-"+t.CARD,UNSPECIFIED_LIST:"UnspecifiedItem-"+t.LIST,UNSPECIFIED_LIST_WIDE:"UnspecifiedItem-"+t.LIST_WIDE,INGREDIENT:"Ingredient",INGREDIENT_CARD:"Ingredient-"+t.CARD,INGREDIENT_LIST:"Ingredient-"+t.LIST,INGREDIENT_LIST_WIDE:"Ingredient-"+t.LIST_WIDE,BACK_LINK:"ProductBackLink",PRODUCT_SPOTLIGHT_LARGE:"Product-"+t.SPOTLIGHT_LARGE,PREDICT_MY_LIST:"PredictMyListItem",MULTI_BUY_LEGEND:"MultiBuyLegend",BRAND_PAGE_LINK:"BrandPageLink"}}),define("products/views/shop-item/components/overlay/view/overlay.view",[],function(){"use strict";return Backbone.View.extend({className:"product__overlay",attributes:function e(){var e={"data-overlay":""};return e["data-region"]="overlay",e}})}),define("products/views/shop-item/components/image/view/shop-item.image.view",["require","settings/components/display/image/view/multiple.image.view"],function(e){"use strict";var t=e("settings/components/display/image/view/multiple.image.view");return t.extend({imageClassName:"product-image js-product-image-animated",attributes:{"data-region":"image-container"}})}),define("products/views/shop-item/components/image/view/unspecified.shop-item.image.view",["require","products/views/shop-item/components/image/view/shop-item.image.view"],function(e){"use strict";var t=e("products/views/shop-item/components/image/view/shop-item.image.view");return t.extend({fallbackImage:window.require.toUrl("../_ui/img/shopitem-unspecified-image.svg")})}),define("products/views/shop-item/components/image/view/ingredient.shop-item.image.view",["require","products/views/shop-item/components/image/view/shop-item.image.view"],function(e){"use strict";var t=e("products/views/shop-item/components/image/view/shop-item.image.view");return t.extend({fallbackImage:window.require.toUrl("../_ui/img/shopitem-ingredient-image.svg")})}),define("products/views/shop-item/components/image/factory/shop-item-image.factory",["require","settings/components/factory/model/factory.model","products/enums/products.type.enum","products/views/shop-item/components/image/view/shop-item.image.view","products/views/shop-item/components/image/view/unspecified.shop-item.image.view","products/views/shop-item/components/image/view/ingredient.shop-item.image.view"],function(e){"use strict";var t=e("settings/components/factory/model/factory.model"),i=e("products/enums/products.type.enum"),n=e("products/views/shop-item/components/image/view/shop-item.image.view"),o=e("products/views/shop-item/components/image/view/unspecified.shop-item.image.view"),s=e("products/views/shop-item/components/image/view/ingredient.shop-item.image.view"),r=new t;return r.set(i.PRODUCT,n),r.set(i.UNSPECIFIED,o),r.set(i.INGREDIENT,s),r.set(r.DEFAULT,n),r}),define("products/views/shop-item/components/image/view/shop-item-image-container.view",["require","products/views/shop-item/components/image/factory/shop-item-image.factory","products/enums/product-view-type.enum","class-name-builder"],function(e){"use strict";var t=e("products/views/shop-item/components/image/factory/shop-item-image.factory"),i=e("products/enums/product-view-type.enum"),n=e("class-name-builder");return Backbone.View.extend({optionNames:["laneChannelName","type","width","height"],tagName:"figure",className:function(){return n.create().always("product-image-container")["if"](this.isSmallImage(),"image-container--small").toString()},attributes:{"data-region":"image",itemprop:"image"},imageOptions:{retina:!0},render:function(){return this.removeSubviews(),this.convertImageUrls(),this.appendShopItemImage(),this},appendShopItemImage:function(){var e=t.getView(this.type);this.append(new e({images:this.model?this.model.product.get("images"):null,width:this.width||100,height:this.height||100,retina:this.imageOptions.retina,channelName:this.laneChannelName}))},convertImageUrls:function(){var e=this;this.model&&this.model.product.has("images")&&this.model.product.set("images",this.model.product.get("images").map(function(t){var i=t.link.href;return{height:t.height,width:t.width,title:t.title,link:{href:e.transformToImageOptimizationUrl(i)}}}))},transformToImageOptimizationUrl:function(e){var t=-1!==e.indexOf("?options"),i=-1!==e.indexOf("image-optimization");if(i)return t?e:e+"?options=399,q80";var n=e.split("/");return n.splice(3,0,"image-optimization"),n.join("/")+"?options=399,q80"},isProductHeroImage:function(){return this.model?this.model.get("viewType")===i.HERO:!1},isSmallImage:function(){return this.model&&this.isProductHeroImage()&&!this.hasLargeImage()},hasLargeImage:function(){var e=this.model.product.has("images")?this.model.product.get("images"):[];return e.some(function(e){return e.width>208})}})}),define("dst!products/views/shop-item/components/description/template/shop-item-description.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div class="product-description" data-product-description><h1 data-heading class="product-description__title ').x(t.get(["largeTitle"],!1),t,{block:i},{}).w(' -multiline" ').x(t.get(["seoAttributes"],!1),t,{block:n},{}).w(">").f(t.get(["description"],!1),t,"h").w("</h1></div>")}function i(e,t){return e.w("heading--6")}function n(e,t){return e.w('item-prop="name"')}return e.register("products/views/shop-item/components/description/template/shop-item-description.view.dust",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/components/description/template/shop-item-description.view.dust",t,i)}}),define("products/views/shop-item/components/description/view/shop-item-description.view",["require","dst!products/views/shop-item/components/description/template/shop-item-description.view.dust"],function(e){"use strict";return Backbone.View.extend({optionNames:["behavior","largeTitle"],template:e("dst!products/views/shop-item/components/description/template/shop-item-description.view.dust"),className:"product-description",attributes:{"data-region":"header"},initialize:function(){this.listenTo(this,"model:change",this.render)},getTemplateData:function(){return{description:this.model.get("description"),largeTitle:this.largeTitle||!1,seoAttributes:this.behavior.renderSeoAttributes}}})}),define("products/enums/shop-item.bubble-event.enum",[],function(){"use strict";return{CLOSE_FOLDOUT:"product-close-foldout",TOGGLE_FOLDOUT:"product-toggle-foldout",TOGGLE_OVERLAY:"product-toggle-overlay",PRODUCT_VARIANT_CHANGE:"product-variant-change",SHOW_DEFAULT_COMBI_STATE:"show-default-combi-state",FLIP_STICKER:"flip-sticker"}}),define("products/decorators/alternative.product.decorator",["require","settings/model/hal.model","products/enums/shop-item.bubble-event.enum"],function(e){"use strict";var t=e("settings/model/hal.model"),i=e("products/enums/shop-item.bubble-event.enum");return{createFoldOutWithAlternativeProducts:function(){this.model.foldOut||(this.model.foldOut=new t,this.model.foldOut.url=this.getFoldOutUrl()),this.toggleFoldOut()},getFoldOutUrl:function(){return this.model._getHref("alternatives")||this.model._getHref("compare")||this.model._getHref("products")||this.model._getHref("productsuggestions")||this.model._getHref("samplesuggestions")||this.model._getHref("replaceWithAlternative")||this.model._getHref("recipes")+"?id="+this.model.cid+"&mode="+this.model.mode.get("type")},toggleFoldOut:function(){this.triggerBubble(i.TOGGLE_FOLDOUT)}}}),define("products/views/shop-item/components/link/view/product.link.view",["require","settings/components/link/factory/link.view.factory","settings/components/link/enums/link.type.enum","settings/components/link/assembler/link.assembler","products/decorators/alternative.product.decorator","settings/utils/breakpoints"],function(e){"use strict";var t=e("settings/components/link/factory/link.view.factory"),i=e("settings/components/link/enums/link.type.enum"),n=t.getView(i.LINK_ROUTER_VIEW),o=e("settings/components/link/assembler/link.assembler"),s=e("products/decorators/alternative.product.decorator"),r=e("settings/utils/breakpoints"),c=void 0;return c=n.extend({className:n.prototype.className+" row collapse product__content product__content--link",storeScrollPosition:!0,initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){this.el.setAttribute("data-region","content")},createLinkModel:function(){var e=this.model.product.get("id");this.linkModel=o.createLinkModelFromNavItem(this.model.get("navItem")),this.linkModel.set({id:e,"data-region":"link"}),this.linkModel.unset("title")},onClick:function(e){(r.isPhone()||r.isPhablet())&&this.productHasAlternativeProducts()?(e.preventDefault(),this.createFoldOutWithAlternativeProducts()):n.prototype.onClick.apply(this,arguments)},getLinkModel:function(){return this.linkModel||this.createLinkModel(),this.linkModel},productHasAlternativeProducts:function(){return this.model._isValidLink("alternatives")}}),_.extend(c.prototype,s),c}),define("products/views/shop-item/components/link/view/bonus-group.product.link.view",["require","settings/components/link/factory/link.view.factory","settings/components/link/enums/link.type.enum","products/views/shop-item/components/link/view/product.link.view"],function(e){"use strict";var t=e("settings/components/link/factory/link.view.factory"),i=e("settings/components/link/enums/link.type.enum"),n=t.getView(i.LINK_ROUTER_VIEW),o=e("products/views/shop-item/components/link/view/product.link.view");return o.extend({onClick:function(e){e.preventDefault(),this.model._isValidLink("products")?this.createFoldOutWithAlternativeProducts():n.prototype.onClick.apply(this,arguments)}})}),define("products/views/shop-item/components/link/view/recipe.link.view",["require","settings/components/link/factory/link.view.factory","settings/components/link/enums/link.type.enum","settings/components/link/model/link.model"],function(e){"use strict";var t=e("settings/components/link/factory/link.view.factory"),i=e("settings/components/link/enums/link.type.enum"),n=t.getView(i.LINK_ROUTER_VIEW),o=e("settings/components/link/model/link.model"),s=void 0;return s=n.extend({className:n.prototype.className+" row collapse product__content product__content--link",storeScrollPosition:!0,initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){this.el.setAttribute("data-region","content")},createLinkModel:function(){var e=this.model.get("id"),t=void 0;return t=new o,t.setFromNavItem(this.model.get("navItem")),t.set({id:e,"data-region":"link"}),t.unset("title"),t},getLinkModel:function(){return this.linkModel||(this.linkModel=this.createLinkModel()),this.linkModel}}),_.extend(s.prototype),s}),define("products/views/shop-item/components/link/view/factory/shop-item-link.factory",["require","settings/components/factory/model/factory.model","products/enums/products.type.enum","products/views/shop-item/components/link/view/product.link.view","products/views/shop-item/components/link/view/bonus-group.product.link.view","products/views/shop-item/components/link/view/recipe.link.view"],function(e){"use strict";var t=e("settings/components/factory/model/factory.model"),i=e("products/enums/products.type.enum"),n=e("products/views/shop-item/components/link/view/product.link.view"),o=e("products/views/shop-item/components/link/view/bonus-group.product.link.view"),s=e("products/views/shop-item/components/link/view/recipe.link.view"),r=new t;return r.set(i.RECIPE,s),r.set(i.BONUS_GROUP,o),r.set(r.DEFAULT,n),r}),define("products/views/shop-item/components/wrapper/view/product.wrapper.view",[],function(){"use strict";var e=void 0;return e=Backbone.View.extend({className:"row collapse product__content",attributes:function t(){var t={"data-region":"content"};return t}})}),define("products/model/shop-item-behavior.factory.model",["require","settings/components/factory/model/factory.model"],function(e){"use strict";var t=e("settings/components/factory/model/factory.model");return t.extend({getBehavior:function(e){var t=this.get(e)||this.get(this.DEFAULT);if(t)return t;throw"Factory; No behavior for context "+e+" defined and no default behavior defined"}})}),define("products/enums/product.context.enum",[],function(){"use strict";return{ATP:"ATP",ALTERNATIVE_OFFER:"AlternativeOffer",DETAIL:"Detail",FAVORITE_LIST_EDIT_MODE:"FavouriteListEditMode",SEARCH_AND_BROWSE:"SearchAndBrowse",SHOPPINGLIST:"ShoppingList",RECIPE_MIXER:"RecipeMixer",GIFT:"Gift",CHECKOUT:"Checkout",DRAFT:"Draft"}}),define("products/views/shop-item/product/components/discount-block/enum/discount-label.enum",[],function(){"use strict";return{ONLINE_BONUS:"ONLINE_BONUS",BONUS:"BONUS",INFINITE_DISCOUNT:"INFINITE_DISCOUNT",GALL_DISCOUNT:"GALL_DISCOUNT",GALL_DISCOUNT_CARD:"GALL_DISCOUNT_CARD"}}),define("products/utils/product.utils",["require","settings/utils/breakpoints","products/enums/products.type.enum","products/enums/product-view-type.enum","products/views/shop-item/product/components/discount-block/enum/discount-label.enum","settings/enums/command/page.command.enum","settings/enums/command/router.command.enum","settings/enums/request/application.request.enum","settings/utils/foundation-utils"],function(e){"use strict";var t=e("settings/utils/breakpoints"),i=e("products/enums/products.type.enum"),n=e("products/enums/product-view-type.enum"),o=e("products/views/shop-item/product/components/discount-block/enum/discount-label.enum"),s=e("settings/enums/command/page.command.enum"),r=e("settings/enums/command/router.command.enum"),c=e("settings/enums/request/application.request.enum"),u=e("settings/utils/foundation-utils");return{isSmartLabelProduct:function(e){return e.product.get("productLabel")},isUnchangeableProduct:function(e){return e.get("type")===i.UNCHANGEABLE_PRODUCT},isSampleProduct:function(e){return e.get("type")===i.SAMPLE},isBonusGroup:function(e){return e.get("type")===i.BONUS_GROUP},isCombiProduct:function(e){return e.get("type")===i.COMBI},isAvailable:function(e){return e.product.get("availability.orderable")},isReadOnly:function(e){return e.hasEmbedded("mode")&&"READ_ONLY"===e.mode.get("type")},isUnspecifiedProduct:function(e){return e.get("type")===i.UNSPECIFIED},getProductId:function(e){var t=void 0;return e.product&&(t=e.product.get("id")),e.get("type")===i.UNSPECIFIED&&(t=e.get("description").replace(" ","-")),t},redirectToShoppinglist:function(){Backbone.mediator.channel(c.CHANNEL).request(c.IS_CHECKOUT_PAGE)||Backbone.mediator.channel(r.CHANNEL).command(r.NAVIGATE,Backbone.mediator.request("env:products","urls.mijnlijst"),{trigger:!0})},refreshPageWhenInFoldoutOnShopplingPage:function(){$(".-limit-width").length&&$(".fold-out-region--open").length&&Backbone.mediator.channel(s.CHANNEL).command(s.RELOAD_PAGE)},availableAnimationEvents:function(){var e=document.createElement("fakeelement"),t={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(var i in t)if(t.hasOwnProperty(i)&&"undefined"!=typeof e.style[i])return t[i]},createAnalyticsData:function(e,t,i){var n=this.getQueryParams(),o=t.product?t.product.get("referringProductId"):"",s=t.analytics?t.analytics.get("crossSellParentId"):"",r=i&&i.parameters?_.clone(i.parameters):{};return r.ah_product_lane_position=this.getLaneIndex(e),r.ah_ca=t?t.get("controlAction"):"",r.ah_prod_loc=i&&i.parameters?i.parameters.name:"",r.ah_searchterm=this.handleQueryParams(n.rq),r.ah_search_section=n.searchType||"global",o&&(r.ah_referring_prod_id=o,r.ah_bonus=!!t.product.get("discount")),s&&(r.ah_cross_sell_parent=s),r},handleQueryParams:function(e){var t="";try{t=decodeURIComponent(e)}catch(i){t=encodeURIComponent(e)}return t},getQueryParams:function(){return Backbone.history.getQueryParameters()},getLaneIndex:function(e){var t=e.closest("[data-lane-id]"),i=$(".product-lane").index(t);return e.closest("[data-fold-out-region]").length?-1:0>i?0:i},getFoldOutId:function(e){var t=e.closest("[data-fold-out-region]"),i=void 0;return t.length&&(i=t.data("fold-out-id")),i},isMobileView:function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.activeBreakpoint(),a=void 0;return a=t===u.breakPoints.SMALL,this.isListView(e)&&!a&&(a=t===u.breakPoints.MEDIUM),a},isListView:function(e){return this.getViewType(e)===n.LIST},getViewType:function(e){return e instanceof Backbone.Model&&(e=e.get("viewType")),e},isListWideView:function(e){return this.getViewType(e)===n.LIST_WIDE},checkIfDeviceIsBiggerThanPhoneOrListView:function(e){return e.get("type")===i.LISTITEM?!1:!t.isPhone()},hasGallCard:function(e){return e.get("discount.type.name")===o.GALL_DISCOUNT_CARD},hasGallDiscount:function(e){return e.get("discount.type.name")===o.GALL_DISCOUNT},hasNoDiscountLabel:function(e){return!e.has("discount")},hasInfiniteDiscount:function(e){return e.get("discount.type.name")===o.INFINITE_DISCOUNT},addDestroyingClass:function(e){e.addClass("product--destroying")},getProductModelById:function(e,t){return _.first(e.filter(function(e){return e.product.id===t}))},getQuantityFromSameDiscountGroupID:function(e){return e.collection.reduce(function(t,i){return i.discountRules.get("discountGroupId")===e.discountRules.get("discountGroupId")?t+i.listItem.get("quantity"):t},0)},getDiscountModulusDeviation:function(e){var t=e.discountRules.get("modulus"),i=e.discountRules.get("discountGroupId")?this.getQuantityFromSameDiscountGroupID(e):e.listItem.get("quantity"),n=void 0,o=void 0;return 0===i?t:(n=1-i/t%1,o=Math.round(n*t),1===n?0:o)}}}),define("products/model/list-item.model",["require","settings/model/list-item.model","products/utils/product.utils","settings/enums/events/pre-add.event.enum"],function(e){"use strict";var t=e("settings/model/list-item.model"),i=e("products/utils/product.utils"),n=e("settings/enums/events/pre-add.event.enum");return t.extend({getReplaceOptions:function(){return{type:"PUT",success:i.redirectToShoppinglist}},setPreAddListeners:function(e,t){var i=this,o=t.oldSuccessHandler,s=t.behavior;Backbone.mediator.channel(n.CHANNEL).subscribeOnce(n.ABORTED,function(){return s.rollBackPreAdd()},this),Backbone.mediator.channel(n.CHANNEL).subscribeOnce(n.COMPLETE,function(){return i.convertPreAddToAdd(e,o,s)},this)},getPreAddOptions:function(e){var t=this;return{type:"POST",success:function(i){return t.setPreAddListeners(i,e)}}},convertPreAddToAdd:function(e,t,i){e.set("quantity",1),e.save(null,{success:function(){i.triggerQuantityDifferenceChange(1,0),i.publishQuantityChangedEvent(0,1),t()}})},save:function(e,i){this._isValidLink("replace")?(this._updateUrl(this._getHref("replace")),i=this.getReplaceOptions()):this._isValidLink("preadd")&&(this._updateUrl(this._getHref("preadd")),i=this.getPreAddOptions(i)),t.prototype.save.call(this,e,i)}})}),define("products/helper/list-item-model.helper",["require","products/utils/product.utils","settings/utils/cookie","products/model/list-item.model"],function(e){"use strict";var t=e("products/utils/product.utils"),i=e("settings/utils/cookie"),n=e("products/model/list-item.model");return{createListItemModel:function(e){var t=e.product?this.getProductListItemOptions(e):this.getUnspecifiedListItemOptions(e),i=void 0;return e.analytics&&(t.originCode=e.analytics.get("originCode")),i=new n(t),i._links={add:{href:e._getHref("add")},replace:{href:e._getHref("replace")},preadd:{href:e._getHref("preadd")}},i},replaceListItemModel:function(e){e.listItem._links=this.addReplaceLink(e),e.listItem.replace(this.getProductReplaceOptions(e.model),{success:t.redirectToShoppinglist})},saveListItemModel:function(e){e.listItem&&(e.listItem.abort(),e.view&&e.listItem.addHeader("X-Analytics",t.createAnalyticsData(e.view.$el,e.model,e.view.analytics)),e.model._isValidLink("replace")&&e.listItem.has("id")?this.replaceListItemModel(e):this.hasPreAddLink(e)?(i.removeCookie("gall-customer-card"),e.listItem._links=this.addPreAddLink(e),e.listItem.save(null,{oldSuccessHandler:e.success,behavior:e.view.behavior})):e.listItem.save(null,{success:e.success}))},hasPreAddLink:function o(e){var t=e.listItem._isValidLink("update"),i=e.listItem._isValidLink("delete"),o=e.model._isValidLink("preadd");return o&&(!t||!i)},addPreAddLink:function(e){return{preadd:{href:e.model._getHref("preadd")}}},addReplaceLink:function(e){return{replace:{href:e.model._getHref("replace"),method:"PUT"}}},getProductReplaceOptions:function(e){return{type:"PRODUCT",item:{id:t.getProductId(e)}}},getProductListItemOptions:function(e){return{quantity:e.get("quantity"),alternative:e.get("alternative"),item:{id:t.getProductId(e)}}},getUnspecifiedListItemOptions:function(e){return{quantity:e.get("quantity"),type:"UNSPECIFIED",item:{description:e.get("description")}}}}}),define("products/enums/shop-item-behavior.event.enum",[],function(){"use strict";return{QUANTITY_CHANGED:"quantity-changed",QUANTITY_INCREASED:"quantity-increased",QUANTITY_DECREASED:"quantity-decreased",QUANTITY_SAVING:"quantity-saving",QUANTITY_SAVED:"quantity-saved",QUANTITY_ERROR:"quantity-error",DELETING_FROM_SHOPPINGLIST:"deleting-from-shoppinglist",DELETED_FROM_SHOPPINGLIST:"deleted-from-shoppinglist",REMOVE_FROM_DOM:"remove-from-dom",PRODUCT_PAGE_HERO_LOADED:"product-page-hero-loaded",DRAFT_PRODUCT_ADDED:"draft-product-added",PRODUCT_CLICKED:"product-clicked",PRODUCT_FAVORITE_CLICKED:"product-favorite-clicked",SHOP_IN_SHOP_CLICKED:"shop-in-shop-clicked"}}),define("products/views/shop-item/components/controls/enum/control-action.enum",[],function(){"use strict";return{PLUS:"product.plus",MIN:"product.min",DELETE:"product.delete",INPUT:"product.quantity"}}),define("products/behavior/shop-item.behavior",["require","products/helper/list-item-model.helper","products/enums/shop-item-behavior.event.enum","products/utils/product.utils","products/enums/products.type.enum","settings/enums/events/product.event.enum","settings/enums/command/product.command.enum","settings/enums/command/layout.command.enum","products/views/shop-item/components/controls/enum/control-action.enum","products/enums/shop-item.bubble-event.enum","settings/enums/events/product.event.enum","settings/enums/events/fold-out.event.enum","settings/model/hal.model"],function(e){"use strict";var t=e("products/helper/list-item-model.helper"),i=e("products/enums/shop-item-behavior.event.enum"),n=e("products/utils/product.utils"),o=e("products/enums/products.type.enum"),s=e("settings/enums/events/product.event.enum"),r=e("settings/enums/command/product.command.enum"),c=e("settings/enums/command/layout.command.enum"),u=e("products/views/shop-item/components/controls/enum/control-action.enum"),a=e("products/enums/shop-item.bubble-event.enum"),d=e("settings/enums/events/product.event.enum"),l=e("settings/enums/events/fold-out.event.enum"),p=e("settings/model/hal.model"),m=void 0;return m=Backbone.Class.extend({saveDelay:800,addAnimation:!0,removeViewWhenZeroQuantity:!1,greyedOutWhenZeroQuantity:!1,deleteButton:!1,favoriteButton:!0,previouslyBought:!0,addButtonRequired:!0,labels:!0,pricePerUsageLabel:!1,detailSmartLabel:!1,stickers:!0,icons:!0,discountRules:!1,supplier:!0,alternativesButton:!0,combineControlsAndAlternatives:!1,productOverlay:!0,renderSeoAttributes:!1,specifyProduct:!1,hideControls:!1,selectedAlternativeButton:!1,checkoutAlternativeButtonIcon:!1,showAlternativeOfferControls:!1,replaceContext:"ShoppingList",
replaceViewType:"ListWide",limitLabels:!1,showCompareControls:!1,isSaving:!1,initialize:function(e){_.extend(this,e,["model","listItem","view"]),_.bindAll(this,"handleSaveQuantitySuccess","handleSaveQuantityError"),this.debouncedSave=_.debounce(this.saveQuantity,this.saveDelay),this.oldQuantityValue=this.getQuantity(),this.showCompareControls=this.hasShowCompareLink(),this.hasFoldOut()&&this.subscribeFoldOutHandler()},hasShowCompareLink:function(){return this.model._isValidLink("compare")&&!this.model._isValidLink("alternatives")&&!this.model._isValidLink("replaceWithAlternative")&&!n.isCombiProduct(this.model)},hasFoldOut:function(){return this.model._isValidLink("alternatives")||this.model._isValidLink("compare")||this.model._isValidLink("replaceWithAlternative")},subscribeFoldOutHandler:function(){var e=this.model.attributes.foldOutChannelId,t=void 0===e?"foldOutChannel":e;this.channel(t).subscribe(d.ALTERNATIVE_SELECTED,this.onSelectedAlternative,this)},onSelectedAlternative:function(e){var t=this;this.view.triggerBubble(a.CLOSE_FOLDOUT),this.productReplaceHandler=function(){return t.replaceParentProduct(e)},this.channel(c.CHANNEL).subscribe(l.FOLD_OUT_CLOSED,this.productReplaceHandler,this)},replaceParentProduct:function(e){var i=this;e.set("context",this.replaceContext),e.set("viewType",this.replaceViewType),e.listItem&&e.set("quantity",e.listItem.get("quantity"));var n=t.createListItemModel(e);e.listItem?e.listItem.set("quantity",e.listItem.get("quantity")):(e.listItem=n,e.listItem.set("quantity",this.model.listItem.get("quantity"))),e.listItem.sync("update",n,{method:"put",url:e._getHref("replace"),success:function(t){var n=t._links.update;e._links=t._links,e._updateUrl(n.href),e.setUpdateLink(n),e.listItem._links=t._links,e.listItem._updateUrl(n.href),i.channel(i.laneChannelName).command(r.REPLACE_PRODUCT,{itemToReplace:i.view,alternative:e})},error:function(){console.log("Something went wrong when updating the shop item")}})},incrementQuantity:function(e){this.setQuantity(this.getQuantity()+this.getQuantityToIncrement(),e)},decrementQuantity:function(){var e=this.getQuantity()-1;e?this.setQuantity(e):this.deleteFromShoppingList()},deleteFromShoppingList:function(){this.setQuantity(0),this.trigger(i.DELETING_FROM_SHOPPINGLIST)},triggerQuantityDifferenceChange:function(e,t){e>t?this.trigger(i.QUANTITY_INCREASED,e):this.trigger(i.QUANTITY_DECREASED,e)},saveQuantity:function(){var e=this,n=this.oldQuantityValue;this.hasQuantityChanged()&&(this.oldQuantityValue=this.getQuantity(),this.oldQuantityValue>0&&this.trigger(i.QUANTITY_SAVING),this.isSaving=!0,t.saveListItemModel({model:this.model,listItem:this.listItem,view:this.view,success:function(){return e.handleSaveQuantitySuccess(e.getQuantity(),n)},error:this.handleSaveQuantityError}))},createFoldOutWithCrossSellProducts:function(){var e=this;this.model.foldOut=new p,this.model.foldOut.fetch({url:this.model._getHref("crossSell"),success:function(t){t&&"FoldOut"===t.get("type")&&e.view.triggerBubble(a.TOGGLE_FOLDOUT)}})},handleCrossSells:function(e,t){if(this.model._isValidLink("crossSell")){var i=0===t&&e>0,n=t>0&&0===e;if(i){var o=!0,s=this.request("sessionStorage:get","crossSellFoldoutCapping");if(s){var r=this.request("sessionStorage:get","crossSellFoldoutCappingCount")||1;r===s?(r=1,o=!0):(r=parseInt(r)+1,o=!1),this.request("sessionStorage:set","crossSellFoldoutCappingCount",r)}o&&this.createFoldOutWithCrossSellProducts()}else n&&this.view.triggerBubble(a.CLOSE_FOLDOUT)}},handleSaveQuantitySuccess:function(e,t){this.isSaving=!1,this.handleCrossSells(e,t),this.hasQuantity()?(this.model&&this.model.get("controlAction")===u.PLUS&&Backbone.mediator.channel(s.CHANNEL).publish(s.PLUS),this.trigger(i.QUANTITY_SAVED,e,t)):(delete this.listItem,this.trigger(i.DELETED_FROM_SHOPPINGLIST,e,t),this.removeFromDOM())},handleSaveQuantityError:function(e){this.isSaving=!1,this.trigger(i.QUANTITY_ERROR,e)},removeFromDOM:function(){this.removeViewWhenZeroQuantity&&this.trigger(i.REMOVE_FROM_DOM)},createListItemModel:function(){this.listItem=this.listItem||t.createListItemModel(this.model),this.model&&(this.model.listItem=this.listItem)},getQuantity:function(){return this.listItem?this.listItem.get("quantity"):0},setQuantity:function(e,t){var i=this.getQuantity();e=Math.max(e,0),this.hasPermissionToSetQuantity()&&(this.listItem||this.createListItemModel(),this.listItem.set("quantity",e),this.hasPreAddLink()||(this.triggerQuantityDifferenceChange(e,i),this.publishQuantityChangedEvent(i,e)),t?this.saveQuantity():this.debouncedSave())},hasPreAddLink:function h(){var e=this.listItem._isValidLink("update"),t=this.listItem._isValidLink("delete"),h=this.model._isValidLink("preadd");return h&&(!e||!t)},rollBackPreAdd:function(){this.isSaving=!1,delete this.listItem,this.oldQuantityValue=0,this.trigger(i.QUANTITY_SAVED)},hasPermissionToSetQuantity:function(){return this.getQuantityControlDisabled()||this.isSaving?!1:!0},publishQuantityChangedEvent:function(e,t){this.trigger(i.QUANTITY_CHANGED,t),Backbone.mediator.channel(s.CHANNEL).publish(s.QUANTITY_CHANGED,{product:this.model.product,listItem:this.model.listItem,oldQuantity:e,quantity:t})},getQuantityToIncrement:function(){return this.shouldUseAddQuantity()?this.model.addQuantity.get("quantity"):1},setControlAction:function(e){this.model&&this.model.set("controlAction",e)},getQuantityControlDisabled:function(){return this.model&&this.model.get("type")===o.UNCHANGEABLE_PRODUCT},hasQuantity:function(){return this.getQuantity()>0},hasQuantityChanged:function(){return this.getQuantity()!==this.oldQuantityValue},hasAddQuantity:function(){return this.model&&this.model.addQuantity},shouldUseAddQuantity:function(){return this.hasAddQuantity()&&!this.hasQuantity()},shouldHideControls:function(){return!!((this.model._isValidLink("alternatives")||this.model._isValidLink("products"))&&!this.combineControlsAndAlternatives||this.hideControls||this.model._isValidLink("samplesuggestions"))},shouldShowNutritionalInfo:function(){return this.model&&this.model.product.get("nutrients")},triggerDmpFavorise:function(e){this.trigger(i.PRODUCT_FAVORITE_CLICKED,e)},destroy:function(){var e=this.model.attributes.foldOutChannelId,t=void 0===e?"foldOutChannel":e;this.channel(t).unsubscribe(d.ALTERNATIVE_SELECTED,this.onSelectedAlternative,this),this.channel(c.CHANNEL).unsubscribe(l.FOLD_OUT_CLOSED,this.productReplaceHandler,this),this.stopListening(),delete this.model,delete this.view,delete this.listItem,delete this.debouncedSave}}),_.extend(m.prototype,Backbone.Events,Backbone.decorators.Command,Backbone.decorators.RequestResponse),m}),define("products/behavior/shoppinglist.shop-item.behavior",["require","products/behavior/shop-item.behavior"],function(e){"use strict";var t=e("products/behavior/shop-item.behavior");return t.extend({removeViewWhenZeroQuantity:!0,deleteButton:!0,favoriteButton:!1,previouslyBought:!1,combineControlsAndAlternatives:!0,discountRules:!0,stickers:!1,supplier:!1,specifyProduct:!0})}),define("products/behavior/recipe-mixer.shop-item.behavior",["require","products/behavior/shoppinglist.shop-item.behavior","products/utils/product.utils","settings/enums/events/product.event.enum","products/helper/list-item-model.helper"],function(e){"use strict";var t=e("products/behavior/shoppinglist.shop-item.behavior"),i=e("products/utils/product.utils"),n=e("settings/enums/events/product.event.enum"),o=e("products/helper/list-item-model.helper");return t.extend({recipeMixer:!0,initialize:function(e){t.prototype.initialize.call(this,e),this.laneChannelName=e.laneChannelName,this.model._isValidLink("recipes")&&this.subscribeRecipeMixer()},subscribeRecipeMixer:function(){var e=this.model,t=e.id,i=e.cid;Backbone.mediator.channel(t||i).subscribe(n.PRODUCT_SELECTED,this.onRecipeMixChange,this)},onRecipeMixChange:function(e){var t=e.product;if(t){var i=t.clone();i.get("id")!==this.model.product.get("id")&&this.notifyNewProduct(this.model,i)}},getQuantityControlDisabled:function(){return i.isReadOnly(this.model)},isSpecialCase:function(){return!!this.model.mode&&"PICK_AND_MIX"!==this.model.mode.get("type")},notifyNewProduct:function(e,t){e.product.set("id",t.get("id"));var i=o.createListItemModel(e);i.set("quantity",e.listItem.get("quantity")),e.listItem.sync("update",i,{method:"put",url:e._getHref("pickRecipe"),success:function(){return window.location.reload(!0)}})},destroy:function(){var e=this.model,i=e.id,o=e.cid;this.channel(i||o).unsubscribe(n.PRODUCT_SELECTED,this.onRecipeMixChange,this),t.prototype.destroy.call(this)}})}),define("products/behavior/search-and-browse.shop-item.behavior",["require","products/behavior/shop-item.behavior","products/enums/shop-item-behavior.event.enum","products/utils/product.utils"],function(e){"use strict";var t=e("products/behavior/shop-item.behavior"),i=e("products/enums/shop-item-behavior.event.enum"),n=e("products/utils/product.utils");return t.extend({limitLabels:!1,initialize:function(e){t.prototype.initialize.call(this,e),this.determineLimitLabels(),this.listenTo(this,i.QUANTITY_SAVED,n.refreshPageWhenInFoldoutOnShopplingPage)},isForMobile:function(){return n.isMobileView(this.model)||n.isListView(this.model)||n.isListWideView(this.model)},determineLimitLabels:function(){n.isUnspecifiedProduct(this.model)||this.isForMobile()||n.isUnchangeableProduct(this.model)||!n.isAvailable(this.model)||(this.limitLabels=2)}})}),define("products/behavior/favorite-list-edit-mode.shop-item.behavior",["require","products/behavior/shop-item.behavior"],function(e){"use strict";var t=e("products/behavior/shop-item.behavior");return t.extend({addButtonRequired:!1,addAnimation:!1,removeViewWhenZeroQuantity:!0,deleteButton:!0,favoriteButton:!1,previouslyBought:!1,getQuantityControlDisabled:function(){return!1}})}),define("products/behavior/atp.shop-item.behavior",["require","products/behavior/shop-item.behavior"],function(e){"use strict";var t=e("products/behavior/shop-item.behavior");return t.extend({favoriteButton:!1,getQuantity:function(){return this.model.atp?this.model.atp.get("available"):0},getQuantityControlDisabled:function(){return!0}})}),define("products/behavior/gift.shop-item.behavior",["require","products/behavior/shop-item.behavior"],function(e){"use strict";var t=e("products/behavior/shop-item.behavior");return t.extend({discountRules:!1,stickers:!1,supplier:!1,favoriteButton:!1})}),define("products/behavior/checkout.shop-item.behavior",["require","products/behavior/shop-item.behavior"],function(e){"use strict";var t=e("products/behavior/shop-item.behavior");return t.extend({discountRules:!1,removeViewWhenZeroQuantity:!0,hideControls:!0,stickers:!1,supplier:!1,selectedAlternativeButton:!0,checkoutAlternativeButtonIcon:!0})}),define("products/behavior/detail.shop-item.behavior",["require","products/behavior/shop-item.behavior"],function(e){"use strict";var t=e("products/behavior/shop-item.behavior");return t.extend({alternativesButton:!1,productOverlay:!1,pricePerUsageLabel:!0,detailSmartLabel:!0,renderSeoAttributes:!0,icons:!1})}),define("products/behavior/draft.shop-item.behavior",["require","products/behavior/shop-item.behavior","products/enums/shop-item-behavior.event.enum"],function(e){"use strict";var t=e("products/behavior/shop-item.behavior"),i=e("products/enums/shop-item-behavior.event.enum");return t.extend({greyedOutWhenZeroQuantity:!0,combineControlsAndAlternatives:!0,deleteButton:!0,replaceContext:"Draft",initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this,i.QUANTITY_CHANGED,this.toggleLinkedLegendGreyedOutClass)},toggleLinkedLegendGreyedOutClass:function(e){var t=this.view.$el.prev(".legend");t.length&&t.toggleClass("-greyed-out",!e)},saveQuantity:function(){this.handleSaveQuantitySuccess()}})}),define("products/behavior/alternative.shop-item.behavior",["require","products/behavior/shop-item.behavior"],function(e){"use strict";var t=e("products/behavior/shop-item.behavior");return t.extend({removeViewWhenZeroQuantity:!0,hideControls:!0,showAlternativeOfferControls:!0})}),define("products/factory/shop-item-behavior.factory",["require","products/model/shop-item-behavior.factory.model","products/enums/product.context.enum","products/behavior/shop-item.behavior","products/behavior/shoppinglist.shop-item.behavior","products/behavior/recipe-mixer.shop-item.behavior","products/behavior/search-and-browse.shop-item.behavior","products/behavior/favorite-list-edit-mode.shop-item.behavior","products/behavior/atp.shop-item.behavior","products/behavior/gift.shop-item.behavior","products/behavior/checkout.shop-item.behavior","products/behavior/detail.shop-item.behavior","products/behavior/draft.shop-item.behavior","products/behavior/alternative.shop-item.behavior"],function(e){"use strict";var t=e("products/model/shop-item-behavior.factory.model"),i=e("products/enums/product.context.enum"),n=e("products/behavior/shop-item.behavior"),o=e("products/behavior/shoppinglist.shop-item.behavior"),s=e("products/behavior/recipe-mixer.shop-item.behavior"),r=e("products/behavior/search-and-browse.shop-item.behavior"),c=e("products/behavior/favorite-list-edit-mode.shop-item.behavior"),u=e("products/behavior/atp.shop-item.behavior"),a=e("products/behavior/gift.shop-item.behavior"),d=e("products/behavior/checkout.shop-item.behavior"),l=e("products/behavior/detail.shop-item.behavior"),p=e("products/behavior/draft.shop-item.behavior"),m=e("products/behavior/alternative.shop-item.behavior"),h=new t;return h.set(i.FAVORITE_LIST_EDIT_MODE,c),h.set(i.SEARCH_AND_BROWSE,r),h.set(i.SHOPPINGLIST,o),h.set(i.RECIPE_MIXER,s),h.set(i.ATP,u),h.set(i.GIFT,a),h.set(i.CHECKOUT,d),h.set(i.DETAIL,l),h.set(i.DRAFT,p),h.set(i.ALTERNATIVE_OFFER,m),h.set(h.DEFAULT,n),h}),define("products/enums/overlay.enum",[],function(){"use strict";return{SHOW:"Show",REMOVE:"Remove"}}),define("products/views/shop-item/components/controls/enum/shop-item-controls.type.enum",[],function(){"use strict";return{CARD:"card",LIST:"list",HERO:"Hero",LIST_WIDE:"list-wide"}}),define("products/views/shop-item/components/controls/components/quantity-control/view/quantity-control.view",["require","products/enums/shop-item-behavior.event.enum","class-name-builder","settings/enums/request/application.request.enum"],function(e){"use strict";var t=e("products/enums/shop-item-behavior.event.enum"),i=e("class-name-builder"),n=e("settings/enums/request/application.request.enum");return Backbone.View.extend({optionNames:["disabled","productId","behavior","testHookId"],persistentClassName:"product-controls__item",className:function(){return i.create()["if"](this.disabled," -disabled").toString()},attributes:function(){return this.channel(n.CHANNEL).request(n.IS_RUNNING_WITH_TESTHOOK)?{"data-testhookid":this.testHookId}:{}},testHookId:null,controlAction:null,initialize:function(){this.disabled?this.disable():(this.listenTo(this.behavior,t.QUANTITY_SAVING,this.disable),this.listenTo(this.behavior,t.QUANTITY_SAVED,this.enable))},disable:function(){this.isDisabled||(this.isDisabled=!0,this.$el.attr("disabled","disabled"))},enable:function(){this.isDisabled&&(this.isDisabled=!1,this.$el.removeAttr("disabled"))},doQuantityAction:function(){this.behavior.setControlAction(this.controlAction)}})}),define("products/views/shop-item/components/controls/components/quantity-control/button/view/button.quantity-control.view",["require","products/views/shop-item/components/controls/components/quantity-control/view/quantity-control.view"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/components/quantity-control/view/quantity-control.view");return t.extend({tagName:"button",events:{click:"onClick"},onClick:function(e){e.preventDefault(),this.doQuantityAction()}})}),define("products/views/shop-item/components/controls/components/quantity-control/button/view/plus.button.quantity-control.view",["require","products/views/shop-item/components/controls/components/quantity-control/button/view/button.quantity-control.view","products/enums/shop-item-behavior.event.enum","products/views/shop-item/components/controls/enum/control-action.enum","class-name-builder"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/components/quantity-control/button/view/button.quantity-control.view"),i=e("products/enums/shop-item-behavior.event.enum"),n=e("products/views/shop-item/components/controls/enum/control-action.enum"),o=e("class-name-builder");return t.extend({className:function(){return o.create().always(t.prototype.className.call(this)).always("ah-online-icon product-controls__item--plus -hover-pulse")["if"](this.behavior.shouldUseAddQuantity(),"icon--plus-quantity product-controls__item--plus--has-add-quantity")["else"]("icon--plus").toString()},attributes:function(){return _.extend(t.prototype.attributes.call(this),{"data-plus":"",title:this.request("i18n:get","products.buttons.plus.title"),"aria-label":this.request("i18n:get","products.buttons.plus.title")})},controlAction:n.PLUS,render:function(){return this.$el.empty(),this.removeListeners(),this.setupListeners(),this.behavior.shouldUseAddQuantity()&&this.$el.append(this.createQuantitySpan()),this},reRender:function(){this.render(),this.setClassName()},setupListeners:function(){this.behavior.hasAddQuantity()&&(this.listenToOnce(this.behavior,i.DELETING_FROM_SHOPPINGLIST,this.reRender),this.listenToOnce(this.behavior,i.QUANTITY_CHANGED,this.reRender))},removeListeners:function(){this.stopListening(this.behavior,i.QUANTITY_CHANGED,this.reRender),this.stopListening(this.behavior,i.DELETING_FROM_SHOPPINGLIST,this.reRender)},createQuantitySpan:function(){var e=$("<span>");return e.html(this.behavior.getQuantityToIncrement()),e.addClass("product-controls__item--plus--has-add-quantity__quantity"),e},doQuantityAction:function(){t.prototype.doQuantityAction.call(this),this.behavior.incrementQuantity()}})}),define("products/views/shop-item/components/controls/components/quantity-control/button/view/min.button.quantity-control.view",["require","products/views/shop-item/components/controls/components/quantity-control/button/view/button.quantity-control.view","products/enums/shop-item-behavior.event.enum","products/views/shop-item/components/controls/enum/control-action.enum","class-name-builder"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/components/quantity-control/button/view/button.quantity-control.view"),i=e("products/enums/shop-item-behavior.event.enum"),n=e("products/views/shop-item/components/controls/enum/control-action.enum"),o=e("class-name-builder");return t.extend({className:function(){return o.create().always(t.prototype.className.call(this)).always("ah-online-icon icon--min product-controls__item--min -hover-pulse").toString()},attributes:function(){return _.extend(t.prototype.attributes.call(this),{"data-min":"",title:this.request("i18n:get","products.buttons.min.title"),"aria-label":this.request("i18n:get","products.buttons.min.title")})},controlAction:n.MIN,initialize:function(){t.prototype.initialize.apply(this,arguments),this.disabled||(this.listenTo(this.behavior,i.QUANTITY_CHANGED,this.disableButtonWhenZero),this.disableButtonWhenZero())},disableButtonWhenZero:function(){this.behavior.hasQuantity()?this.enable():this.disable()},doQuantityAction:function(){t.prototype.doQuantityAction.call(this),this.behavior.decrementQuantity()}})}),define("products/views/shop-item/components/controls/components/quantity-control/input/view/input.quantity-control.view",["require","products/views/shop-item/components/controls/components/quantity-control/view/quantity-control.view","products/enums/shop-item-behavior.event.enum","products/views/shop-item/components/controls/enum/control-action.enum","class-name-builder"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/components/quantity-control/view/quantity-control.view"),i=e("products/enums/shop-item-behavior.event.enum"),n=e("products/views/shop-item/components/controls/enum/control-action.enum"),o=e("class-name-builder");return t.extend({tagName:"input",className:function(){return o.create().always(t.prototype.className.call(this)).always("product-controls__item--quantity-input").toString()},attributes:function s(){var s=t.prototype.attributes.call(this);return _.extend(s,{maxlength:"2","data-quantity":"",pattern:"[0-9]*",title:this.request("i18n:get","products.input.quantity.title"),"aria-label":this.request("i18n:get","products.input.quantity.ariaLabel")})},events:{keyup:"onKeyUp",keydown:"onKeyInput",focus:"onFocus",blur:"onBlur"},controlAction:n.INPUT,initialize:function(){t.prototype.initialize.apply(this,arguments),_.bindAll(this,"doQuantityAction"),this.listenTo(this.behavior,i.QUANTITY_CHANGED,this.render),this.debouncedQuantityAction=_.debounce(this.doQuantityAction,this.behavior.saveDelay)},render:function(){return this.el.value=this.behavior.getQuantity(),this},getKeyCode:function(e){return e.charCodeAt(e.length-1)},onKeyInput:function(e){var t=e.keyCode?e.keyCode:e.which,i=void 0;return i=[8,13,37,39,46,96,97,98,99,100,101,102,103,104,105],229===t&&(t=this.getKeyCode(e.srcElement.value)),-1!==i.indexOf(t)?!0:isNaN(String.fromCharCode(t))?!1:void 0},onKeyUp:function(e){var t=13;e.keyCode===t&&e.currentTarget.blur(),Modernizr.touchevents||this.debouncedQuantityAction()},onFocus:function(){this.trigger("focus")},onBlur:function(){this.trigger("blur"),Modernizr.touchevents&&this.doQuantityAction()},getInputValue:function(){var e=parseInt(this.el.value,10);return isNaN(e)?0:e},doQuantityAction:function(){t.prototype.doQuantityAction.call(this),this.behavior.setQuantity(this.getInputValue(),!0)}})}),define("products/views/shop-item/components/controls/components/quantity-control/button/view/delete.button.quantity-control.view",["require","products/views/shop-item/components/controls/components/quantity-control/button/view/button.quantity-control.view","products/views/shop-item/components/controls/enum/control-action.enum","products/enums/shop-item.bubble-event.enum","class-name-builder"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/components/quantity-control/button/view/button.quantity-control.view"),i=e("products/views/shop-item/components/controls/enum/control-action.enum"),n=e("products/enums/shop-item.bubble-event.enum"),o=e("class-name-builder");return t.extend({className:function(){return o.create().always(t.prototype.className.call(this)).always("ah-online-icon icon--delete2 product-controls__item--delete -topright -hover-pulse").toString()},attributes:function(){return _.extend(t.prototype.attributes.call(this),{"data-delete-button":"",title:this.request("i18n:get","products.buttons.delete.title"),"aria-label":this.request("i18n:get","products.buttons.delete.title")})},controlAction:i.DELETE,doQuantityAction:function(){var e=this.parent.model;e._getHref("alternatives")&&this.triggerBubble(n.CLOSE_FOLDOUT),t.prototype.doQuantityAction.call(this),this.behavior.deleteFromShoppingList()}})}),define("products/views/shop-item/components/controls/enum/quantity-group.event.enum",[],function(){"use strict";return{USER_INTERACTION_START:"user-interaction-start",USER_INTERACTION_END:"user-interaction-end"}}),define("products/views/shop-item/components/controls/components/quantity-group/view/quantity-group.view",["require","products/views/shop-item/components/controls/components/quantity-control/button/view/plus.button.quantity-control.view","products/views/shop-item/components/controls/components/quantity-control/button/view/min.button.quantity-control.view","products/views/shop-item/components/controls/components/quantity-control/input/view/input.quantity-control.view","products/views/shop-item/components/controls/components/quantity-control/button/view/delete.button.quantity-control.view","products/views/shop-item/components/controls/enum/quantity-group.event.enum"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/components/quantity-control/button/view/plus.button.quantity-control.view"),i=e("products/views/shop-item/components/controls/components/quantity-control/button/view/min.button.quantity-control.view"),n=e("products/views/shop-item/components/controls/components/quantity-control/input/view/input.quantity-control.view"),o=e("products/views/shop-item/components/controls/components/quantity-control/button/view/delete.button.quantity-control.view"),s=e("products/views/shop-item/components/controls/enum/quantity-group.event.enum");return Backbone.View.extend({optionNames:["productId","behavior"],persistentClassName:"quantity-group",initialize:function(){this.disabled=this.behavior.getQuantityControlDisabled()},render:function(){this.appendButtons(),this.setupListeners()},setupListeners:function(){this.listenTo(this.subview("input"),"focus",this.userInteractionStart),this.listenTo(this.subview("input"),"blur",this.userInteractionEnd)},appendButtons:function(){this.appendDeleteButton(),this.appendMinButton(),this.appendInput(),this.appendPlusButton()},userInteractionStart:function(){this.trigger(s.USER_INTERACTION_START)},userInteractionEnd:function(){this.trigger(s.USER_INTERACTION_END)},appendDeleteButton:function(){this.behavior.deleteButton&&this.append(new o({behavior:this.behavior,disabled:this.disabled,testHookId:"delete_product_"+this.productId}))},appendMinButton:function(){this.append(new i({behavior:this.behavior,disabled:this.disabled,testHookId:"remove_product_"+this.productId}),{name:"min"})},appendInput:function(){this.append(new n({behavior:this.behavior,disabled:this.disabled,testHookId:"quantity_product_"+this.productId}),{name:"input"})},appendPlusButton:function(){this.append(new t({behavior:this.behavior,disabled:this.disabled,testHookId:"add_product_"+this.productId}),{name:"plus"})}})}),define("products/views/shop-item/components/controls/components/favorite/view/favorite.button.view",["require","settings/enums/command/window.command.enum","settings/components/favorite/views/favorite.retrieve.data"],function(e){"use strict";var t=e("settings/enums/command/window.command.enum"),i=e("settings/components/favorite/views/favorite.retrieve.data");return Backbone.View.extend({optionNames:["productId","behavior"],tagName:"button",className:"product-controls__item product-controls__item--favorite ah-online-icon icon--product-favorite -topright -hover-pulse",attributes:function(){return{"data-favorite":"","data-productid":this.productId,title:this.request("i18n:get","products.buttons.favorite.title"),"aria-label":this.request("i18n:get","products.buttons.favorite.ariaLabel")}},events:{click:"openFavoritesWindow"},initialize:function(){this.channel(t.CHANNEL).command(t.ADD_TESTHOOK,this.$el,"favorite_product_"+this.productId)},openFavoritesWindow:function(){var e=new i;e.retrievePopup(this.productId),this.behavior.triggerDmpFavorise(this.model)}})}),define("products/views/shop-item/components/controls/components/show-controls/view/show-controls-button.view",["require","products/enums/shop-item-behavior.event.enum","class-name-builder"],function(e){"use strict";var t=e("products/enums/shop-item-behavior.event.enum"),i=e("class-name-builder");return Backbone.View.extend({optionNames:["behavior"],tagName:"button",persistentClassName:"product-controls__item product-controls__item--show-controls",className:function(){return i.create()["if"](this.behavior.getQuantityControlDisabled()," -disabled").toString()},attributes:function(){return{"data-quantity-button":"",title:this.request("i18n:get","products.buttons.showControls.title"),"aria-label":this.request("i18n:get","products.buttons.showControls.ariaLabel")}},events:{click:"showControls"},initialize:function(){this.listenTo(this.behavior,t.QUANTITY_CHANGED,this.render),this.listenTo(this.behavior,t.QUANTITY_CHANGED,this.toggleVisibilityBasedOnQuantity)},render:function(){return this.$el.html(this.createQuantitySpan()),this.behavior.getQuantityControlDisabled()&&this.$el.attr("disabled","disabled"),this},showControls:function(e){e.preventDefault(),e.stopImmediatePropagation(),this.trigger("show-controls")},toggleVisibilityBasedOnQuantity:function(){this.behavior.hasQuantity()?this.show():this.hide()},createQuantitySpan:function(){var e=$("<span>");return e.html(this.behavior.getQuantity()),e.addClass("product-controls__item--show-controls__quantity"),e},show:function(){this.$el.hasClass("hidden")&&this.$el.removeClass("hidden")},hide:function(){this.$el.hasClass("hidden")||this.$el.addClass("hidden")}})}),define("products/views/shop-item/components/controls/components/discount-check-notification/view/discount-check-notification.view",["products/utils/product.utils","products/enums/shop-item-behavior.event.enum","settings/enums/request/application.request.enum"],function(){"use strict";var e=require("products/utils/product.utils"),t=require("products/enums/shop-item-behavior.event.enum"),i=require("settings/enums/request/application.request.enum");return Backbone.View.extend({optionNames:["behavior"],tagName:"p",className:"discount-check-notification color-bonus",initialize:function(){this.listenTo(this,"render-complete",this.onRenderComplete),this.model.discountRules.get("discountGroupId")?(this.listenTo(this.model.collection,"change:discountGroupId-"+this.model.discountRules.get("discountGroupId"),this.render),this.listenTo(this.behavior,t.QUANTITY_CHANGED,this.triggerDiscountGroup)):this.listenTo(this.behavior,t.QUANTITY_CHANGED,this.render)},render:function(){return this.removeSubviews(),Backbone.View.prototype.render.call(this)},onRenderComplete:function(){var t=this.model.product.get("id"),i=e.getDiscountModulusDeviation(this.model),n=0===i,o=new Backbone.View({tagName:"span",className:"discount-check-notification__bonus"}),s=void 0,r=void 0;n?(s=this.createCheckMarkView(t),this.append(s),this.transitionIconIn(s)):(r=this.createDeviationTextView(t),this.appendInnerSpan(r,"deviation",i),this.append(r),this.transitionIn(r)),this.appendInnerSpan(o,"bonus",""),this.append(o)},createCheckMarkView:function(e){return new Backbone.View({tagName:"i",className:"ah-online-icon icon--checkbox-checkmark paragraph--2",attributes:function t(){var t={};return Backbone.mediator.channel(i.CHANNEL).request(i.IS_RUNNING_WITH_TESTHOOK)&&(t["data-testhookid"]="discount-check-complete-notification-"+e),t}})},createDeviationTextView:function(e){return new Backbone.View({tagName:"span",className:"discount-check-notification__deviation",attributes:function t(){var t={"data-deviation-span":""};return Backbone.mediator.channel(i.CHANNEL).request(i.IS_RUNNING_WITH_TESTHOOK)&&(t["data-testhookid"]="discount-check-not-complete-notification-"+e),t}})},appendInnerSpan:function(e,t,i){var n=new Backbone.View({tagName:"span",className:"-mobile"}),o=new Backbone.View({tagName:"span",className:"-wide"});t="products.discount-check-notification."+t,n.$el.text(this.request("i18n:get",t+".mobile",{modulusDeviation:i})),o.$el.text(this.request("i18n:get",t+".desktop",{modulusDeviation:i})),e.append(n),e.append(o)},triggerDiscountGroup:function(){var e=this;require(["greensock"],function(){e.model.collection.trigger("change:discountGroupId-"+e.model.discountRules.get("discountGroupId"))})},transitionIconIn:function(e){require(["greensock"],function(){var t=new TimelineLite,i={opacity:0},n={opacity:1},o={scale:1.4,opacity:1,ease:Quint.easeOut},s={scale:1,opacity:1};t.append(TweenLite.fromTo(e.el,.4,i,n)),t.append(TweenLite.to(e.el,.15,o)),t.append(TweenLite.to(e.el,.15,s))})},transitionIn:function(e){require(["greensock"],function(){TweenLite.fromTo(e.el,.4,{opacity:0},{opacity:1})})},remove:function(){this.removeSubviews(),Backbone.View.prototype.remove.call(this)}})}),define("products/views/shop-item/components/controls/view/shop-item-controls.view",["require","products/enums/overlay.enum","settings/utils/foundation-utils","products/utils/product.utils","products/views/shop-item/components/controls/components/quantity-group/view/quantity-group.view","products/views/shop-item/components/controls/components/favorite/view/favorite.button.view","products/views/shop-item/components/controls/components/show-controls/view/show-controls-button.view","products/views/shop-item/components/controls/components/discount-check-notification/view/discount-check-notification.view","products/enums/product-view-type.enum","products/enums/products.type.enum","products/enums/shop-item-behavior.event.enum","products/views/shop-item/components/controls/enum/shop-item-controls.type.enum","products/enums/shop-item.bubble-event.enum","products/views/shop-item/components/controls/enum/quantity-group.event.enum","class-name-builder"],function(e){
"use strict";var t=e("products/enums/overlay.enum"),i=e("settings/utils/foundation-utils"),n=e("products/utils/product.utils"),o=e("products/views/shop-item/components/controls/components/quantity-group/view/quantity-group.view"),s=e("products/views/shop-item/components/controls/components/favorite/view/favorite.button.view"),r=e("products/views/shop-item/components/controls/components/show-controls/view/show-controls-button.view"),c=e("products/views/shop-item/components/controls/components/discount-check-notification/view/discount-check-notification.view"),u=e("products/enums/product-view-type.enum"),a=e("products/enums/products.type.enum"),d=e("products/enums/shop-item-behavior.event.enum"),l=e("products/views/shop-item/components/controls/enum/shop-item-controls.type.enum"),p=e("products/enums/shop-item.bubble-event.enum"),m=e("products/views/shop-item/components/controls/enum/quantity-group.event.enum"),h=e("class-name-builder");return Backbone.View.extend({optionNames:["behavior","type"],persistentClassName:"product-controls",className:function(){return h.create().always(this.getViewTypeClass()).toString()},initialize:function(){this.productId=n.getProductId(this.model),this.realActiveBreakpoint=i.activeBreakpoint()},render:function(){return this.$el.empty(),this.setClassName(),this.removeSubviews(),this.toggleHasQuantity(),this.addButtons(),this.addDiscountCheckNotification(),this.stopListening(),this.setupListeners(),this},setupListeners:function(){this.listenTo(this.behavior,d.QUANTITY_CHANGED,this.toggleHasQuantity),this.listenTo(this.behavior,d.QUANTITY_CHANGED,this.toggleControls),this.listenTo(this.behavior,d.QUANTITY_SAVED,this.toggleControls),this.listenTo(this.subview("showControls"),"show-controls",this.showControls),this.listenTo(this.subview("quantity-group"),m.USER_INTERACTION_START,this.clearHideTimeout),this.listenTo(this.subview("quantity-group"),m.USER_INTERACTION_END,this.setHideTimeout),this.delegateEvents()},addButtons:function(){this.addShowControlsButton(),this.addFavoriteButton(),this.addQuantityGroup()},addQuantityGroup:function(){this.append(new o({className:"product-controls__quantity-group",behavior:this.behavior,model:this.model,productId:this.productId}),{name:"quantity-group"})},addShowControlsButton:function(){this.append(new r({model:this.model,behavior:this.behavior,disabled:this.behavior.getQuantityControlDisabled(),productId:this.productId}),{name:"showControls"})},addFavoriteButton:function(){this.shouldShowFavoriteButton()&&this.append(new s({model:this.model,behavior:this.behavior,productId:this.productId}))},addDiscountCheckNotification:function(){this.behavior.discountRules&&this.model.discountRules&&this.append(new c({model:this.model,behavior:this.behavior}))},toggleControls:function(){this.disposed||(this.behavior.hasQuantity()?this.showControls():this.hideControls())},showControls:function(){this.$el.addClass("product-controls--visible"),this.toggleProductOverlay(t.SHOW),this.setHideTimeout()},hideControls:function(){this.$el.removeClass("product-controls--visible"),this.toggleProductOverlay(t.REMOVE),this.clearHideTimeout()},toggleHasQuantity:function(){this.$el.toggleClass("product-controls--has-quantity",this.behavior.hasQuantity())},setHideTimeout:function(){this.clearHideTimeout(),this.hideTimeout=window.setTimeout(this.hideControls.bind(this),3e3)},clearHideTimeout:function(){window.clearTimeout(this.hideTimeout)},toggleProductOverlay:function(e){this.behavior.productOverlay&&this.triggerBubble(p.TOGGLE_OVERLAY,e)},getViewTypeClass:function(){switch(this.type){case l.LIST:return this.persistentClassName+"-listview";case l.LIST_WIDE:return this.persistentClassName+"-listview "+this.persistentClassName+"-listview--wide";default:return this.persistentClassName+"-cardview"}},isWide:function(){return this.behavior.wideControls&&this.model.get("viewType")===u.LIST},isMobileView:function(){return this.model?n.isMobileView(this.model,this.realActiveBreakpoint):!1},shouldShowFavoriteButton:function(){return this.productId&&this.behavior.favoriteButton&&!this.isMobileView()&&this.model.get("type")!==a.BONUS_GROUP&&this.model.get("viewType")!==u.SPOTLIGHT_LARGE},remove:function(){this.clearHideTimeout(),Backbone.View.prototype.remove.apply(this,arguments)}})}),define("products/views/shop-item/components/controls/components/cta/view/plus.cta-button.view",["require","settings/components/ui/button/view/button.view","settings/enums/events/product.event.enum","products/utils/product.utils","settings/enums/command/window.command.enum"],function(e){"use strict";var t=e("settings/components/ui/button/view/button.view"),i=e("settings/enums/events/product.event.enum"),n=e("products/utils/product.utils"),o=e("settings/enums/command/window.command.enum");return t.extend({className:t.prototype.className+" product-controls__cta-button ah-online-icon icon--plus-only",attributes:function(){return{title:this.request("i18n:get","products.buttons.cta.title"),"aria-label":this.request("i18n:get","products.buttons.cta.title")}},initialize:function(){t.prototype.initialize.apply(this,arguments),this.setupEventListeners()},setupEventListeners:function(){this.disableInteractionAfterAnimation(),this.listenTo(this,"render-complete",this.onRenderComplete)},disableInteractionAfterAnimation:function(){this.animationEvent=n.availableAnimationEvents(),this.disableInteractionCallback=this.disableUserInteraction.bind(this),this.$el.on(this.animationEvent,this.disableInteractionCallback)},disableUserInteraction:function(){this.$el.addClass("-disable-user-interaction")},onRenderComplete:function(){this.$el.append(this.createButtonTextSpan()),this.channel(o.CHANNEL).command(o.ADD_TESTHOOK,this.$el,"cta-button-"+n.getProductId(this.model))},onClick:function(e){e.preventDefault(),this.triggerBubble(i.CTA_BUTTON_ANIMATION)},createButtonTextSpan:function(){var e=$("<span>");return e.addClass("cta-button__text"),e.html(this.request("i18n:get","products.buttons.cta.title")),e},remove:function(){this.$el.off(this.animationEvent,this.disableInteractionCallback),t.prototype.remove.apply(this,arguments)}})}),define("products/views/shop-item/components/controls/view/cta.shop-item-controls.view",["require","products/views/shop-item/components/controls/view/shop-item-controls.view","settings/enums/events/product.event.enum","settings/enums/channel.enum","settings/enums/events/product.event.enum","products/views/shop-item/components/controls/components/cta/view/plus.cta-button.view","products/views/shop-item/components/controls/enum/control-action.enum","class-name-builder"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/view/shop-item-controls.view"),i=e("settings/enums/events/product.event.enum"),n=e("settings/enums/channel.enum"),o=e("settings/enums/events/product.event.enum"),s=e("products/views/shop-item/components/controls/components/cta/view/plus.cta-button.view"),r=e("products/views/shop-item/components/controls/enum/control-action.enum"),c=e("class-name-builder");return t.extend({className:function(){return c.create()["if"](this.model._isValidLink("alternatives")||this.model._isValidLink("products"),"-disabled")["if"](_.isEmpty(this.model._links),"-disabled").always("product-controls--cta").toString()},bubble:function(){var e={};return e[i.CTA_BUTTON_ANIMATION]="revealProductControls",e},render:function(){return this.$el.empty(),this.setClassName(),this.removeSubviews(),this.toggleHasQuantity(),this.addCtaButton(),this.addQuantityGroup(),this.stopListening(),this.setupListeners(),this},revealProductControls:function(){this.$el.addClass("product-controls--cta--reveal-controls"),this.doQuantityAction(),this.behavior.incrementQuantity()},doQuantityAction:function(){this.channel(n.PRODUCT).publish(o.PLUS),this.behavior.setControlAction(r.PLUS)},toggleHasQuantity:function(){this.$el.toggleClass("product-controls--cta--reveal-controls",this.behavior.hasQuantity())},addCtaButton:function(){this.append(new s({model:this.model},{name:"cta_button"}))}})}),define("products/views/shop-item/components/controls/components/combi/view/combi.button.view",["require","settings/components/ui/button/view/button.view","products/enums/shop-item.bubble-event.enum","products/utils/product.utils","settings/enums/command/window.command.enum","class-name-builder"],function(e){"use strict";var t=e("settings/components/ui/button/view/button.view"),i=e("products/enums/shop-item.bubble-event.enum"),n=e("products/utils/product.utils"),o=e("settings/enums/command/window.command.enum"),s=e("class-name-builder");return t.extend({optionNames:t.prototype.optionNames.concat(["productId","disabled"]),className:function(){return s.create().always(t.prototype.className).always("button--1 button-color-blue--1 product-controls__item--cta")["if"](this.disabled,"-disabled").toString()},attributes:function(){var e=t.prototype.attributes.call(this);return this.disabled&&(e.disabled="disabled"),e},icon:"plus-only",i18n:!1,initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){this.channel(o.CHANNEL).command(o.ADD_TESTHOOK,this.$el,"product-combi-"+this.productId)},onClick:function(e){var t=n.getProductModelById(this.model.referees.models,this.productId);t.get("referredSecondary")&&t.set("isWbtcBox",this.model.get("references").some(function(e){return"AVA"===e.type})),e.preventDefault(),this.triggerBubble(i.PRODUCT_VARIANT_CHANGE,t)}})}),define("products/views/shop-item/components/controls/components/quantity-group/view/combi-quantity-group.view",["require","products/views/shop-item/components/controls/components/combi/view/combi.button.view","class-name-builder"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/components/combi/view/combi.button.view"),i=e("class-name-builder");return Backbone.View.extend({optionNames:["productId","behavior"],className:function(){return i.create().always("quantity-group quantity-group--combi").toString()},render:function(){this.appendButtons()},appendButtons:function(){this.model.get("references").forEach(function(e){this.addCombiButton(e)}.bind(this))},addCombiButton:function(e){this.append(new t({model:this.model,productId:e.childId,title:e.label,disabled:!e.availability.orderable}))}})}),define("products/views/shop-item/components/controls/components/show-controls/view/show-combi-controls-button.view",["require","products/views/shop-item/components/controls/components/show-controls/view/show-controls-button.view"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/components/show-controls/view/show-controls-button.view");return t.extend({persistentClassName:"product-controls__item ah-online-icon product-controls__item--plus -hover-pulse icon--plus"})}),define("products/views/shop-item/components/controls/view/combi.shop-item.controls.view",["require","products/views/shop-item/components/controls/view/shop-item-controls.view","products/views/shop-item/components/controls/components/combi/view/combi.button.view","products/views/shop-item/components/controls/components/quantity-group/view/combi-quantity-group.view","products/views/shop-item/components/controls/components/show-controls/view/show-combi-controls-button.view","products/views/shop-item/components/controls/enum/shop-item-controls.type.enum","class-name-builder"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/view/shop-item-controls.view"),i=e("products/views/shop-item/components/controls/components/combi/view/combi.button.view"),n=e("products/views/shop-item/components/controls/components/quantity-group/view/combi-quantity-group.view"),o=e("products/views/shop-item/components/controls/components/show-controls/view/show-combi-controls-button.view"),s=e("products/views/shop-item/components/controls/enum/shop-item-controls.type.enum"),r=e("class-name-builder");return t.extend({className:function(){return r.create().always("product-controls--combi")["if"](this.isWbtcProduct(),"product-controls--combi-wbtc").always(this.getViewTypeClass()).toString()},setupListeners:function(){this.listenTo(this.subview("showControls"),"show-controls",this.showControls)},render:function(){return this.isListView()?(this.addShowControlsButton(),this.addCombiQuantityGroup()):this.renderCtaButtons(),this.setupListeners(),this},isWbtcProduct:function(){return this.model.get("references").some(function(e){return"AVA"===e.type})},isListView:function(){return this.type===s.LIST},renderCtaButtons:function(){this.model.get("references").forEach(function(e){this.addCombiButton(e)}.bind(this))},addCombiQuantityGroup:function(){this.append(new n({className:"product-controls__quantity-group",behavior:this.behavior,model:this.model,productId:this.productId}),{name:"quantity-group"})},addShowControlsButton:function(){this.append(new o({model:this.model,behavior:this.behavior}),{name:"showControls"})},addCombiButton:function(e){this.append(new i({model:this.model,productId:e.childId,title:e.label,disabled:!e.availability.orderable}))}})}),define("products/views/shop-item/components/controls/view/chevron.shop-item-controls.view",["require","settings/components/link/enums/link.type.enum","settings/components/link/assembler/link.assembler","products/views/shop-item/components/controls/view/shop-item-controls.view","class-name-builder","settings/utils/breakpoints"],function(e){"use strict";var t=e("settings/components/link/enums/link.type.enum"),i=e("settings/components/link/assembler/link.assembler"),n=e("products/views/shop-item/components/controls/view/shop-item-controls.view"),o=e("class-name-builder"),s=e("settings/utils/breakpoints");return n.extend({className:function(){return o.create().always(n.prototype.className.call(this)).always("-has-chevron").toString()},render:function(){return this.addFavoriteButton(),s.isPhabletOrLarger()&&this.appendDisclaimerText(),this.appendChevronLink(),this},appendChevronLink:function(){this.model.has("navItem.id")||(this.model.set("navItem.id",this.getTestHookId()),this.model.unset("navItem.title")),this.createRouterButton()},appendDisclaimerText:function(){var e=$("<span>");e.addClass("bonus-group-disclaimer"),e.text(this.model.product.get("discountRangeDescription")),this.$el.append(e)},createRouterButton:function(){this.append(i.createLinkFromNavItem(t.LINK_ROUTER_VIEW,this.model.get("navItem"),{className:"ah-online-icon icon--see-more product-controls__item product-controls__item--chevron -hover-pulse",storeScrollPosition:!0}))},getTestHookId:function(){return this.productId?"chevron-"+this.productId:void 0}})}),define("products/views/shop-item/components/controls/view/checkbox.shop-item-controls.view",["require","products/utils/product.utils","class-name-builder","settings/enums/command/window.command.enum","settings/components/ui/button/view/button.view"],function(e){"use strict";var t=e("products/utils/product.utils"),i=e("class-name-builder"),n=e("settings/enums/command/window.command.enum"),o=e("settings/components/ui/button/view/button.view"),s="-is-added";return o.extend({className:function(){return i.create().always("product-controls--checkbox")["if"](this.model._isValidLink("delete"),s).toString()},initialize:function(){o.prototype.initialize.call(this),this.setModelUrl(this.model),this.listenTo(this,"render-complete",this.channel(n.CHANNEL).command(n.ADD_TESTHOOK,this.$el,"checkbox-control-"+t.getProductId(this.model)))},render:function(){var e=new Backbone.View({tagName:"i",className:"ah-online-icon icon--checkbox-checkmark color-ah"});this.append(e)},onClick:function(){var e=this.setMethod();this.model.save(null,{success:this.onSuccess.bind(this),error:this.onError,type:e})},onSuccess:function(e){this.$el.toggleClass(s),this.setModelUrl(e)},onError:function(){},setModelUrl:function(e){this.model.url=e._isValidLink("delete")||e._isValidLink("add")},setMethod:function(){return this.model._links.add?this.model._links.add.method:this.model._links["delete"].method}})}),define("products/views/shop-item/components/controls/factory/controls.factory",["require","settings/components/factory/model/factory.model","products/enums/products.type.enum","products/views/shop-item/components/controls/enum/shop-item-controls.type.enum","products/views/shop-item/components/controls/view/shop-item-controls.view","products/views/shop-item/components/controls/view/cta.shop-item-controls.view","products/views/shop-item/components/controls/view/combi.shop-item.controls.view","products/views/shop-item/components/controls/view/chevron.shop-item-controls.view","products/views/shop-item/components/controls/view/checkbox.shop-item-controls.view"],function(e){"use strict";var t=e("settings/components/factory/model/factory.model"),i=e("products/enums/products.type.enum"),n=e("products/views/shop-item/components/controls/enum/shop-item-controls.type.enum"),o=e("products/views/shop-item/components/controls/view/shop-item-controls.view"),s=e("products/views/shop-item/components/controls/view/cta.shop-item-controls.view"),r=e("products/views/shop-item/components/controls/view/combi.shop-item.controls.view"),c=e("products/views/shop-item/components/controls/view/chevron.shop-item-controls.view"),u=e("products/views/shop-item/components/controls/view/checkbox.shop-item-controls.view"),a=new t;return a.set(i.CHEVRON,c),a.set(i.COMBI,r),a.set(i.RECIPE,c),a.set(i.SAMPLE,u),a.set(n.HERO,s),a.set(i.BONUS_GROUP,c),a.set(a.DEFAULT,o),a}),define("products/views/shop-item/components/controls/assembler/controls.assembler",["require","products/views/shop-item/components/controls/factory/controls.factory","products/enums/product-view-type.enum","products/enums/products.type.enum"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/factory/controls.factory"),i=e("products/enums/product-view-type.enum"),n=e("products/enums/products.type.enum");return{createControls:function(e,o,s){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=void 0,u=e.get("type");return o.shouldHideControls()?!1:new(c=e.has("references")?t.getView(n.COMBI):_.isEmpty(e._links)&&o.addButtonRequired&&u!==n.UNSPECIFIED&&u!==n.INGREDIENT?t.getView(n.CHEVRON):s===i.HERO?t.getView(i.HERO):t.getView(u))({model:e,behavior:o,type:s,region:r})}}}),define("products/views/shop-item/view/shop-item.view",["require","products/views/shop-item/components/overlay/view/overlay.view","products/views/shop-item/components/image/view/shop-item-image-container.view","products/views/shop-item/components/description/view/shop-item-description.view","products/views/shop-item/components/link/view/factory/shop-item-link.factory","products/views/shop-item/components/wrapper/view/product.wrapper.view","products/factory/shop-item-behavior.factory","products/utils/product.utils","products/enums/shop-item-behavior.event.enum","products/enums/shop-item.bubble-event.enum","settings/enums/events/window.event.enum","products/enums/overlay.enum","settings/decorators/fold-out.decorator","products/views/shop-item/components/controls/assembler/controls.assembler","settings/enums/events/page.capture.event.enum","settings/animation/add-animation","settings/animation/promo-hunt-animation","settings/animation/remove-animation","class-name-builder"],function(e){"use strict";var t=e("products/views/shop-item/components/overlay/view/overlay.view"),i=e("products/views/shop-item/components/image/view/shop-item-image-container.view"),n=e("products/views/shop-item/components/description/view/shop-item-description.view"),o=e("products/views/shop-item/components/link/view/factory/shop-item-link.factory"),s=e("products/views/shop-item/components/wrapper/view/product.wrapper.view"),r=e("products/factory/shop-item-behavior.factory"),c=e("products/utils/product.utils"),u=e("products/enums/shop-item-behavior.event.enum"),a=e("products/enums/shop-item.bubble-event.enum"),d=e("settings/enums/events/window.event.enum"),l=e("products/enums/overlay.enum"),p=e("settings/decorators/fold-out.decorator"),m=e("products/views/shop-item/components/controls/assembler/controls.assembler"),h=e("settings/enums/events/page.capture.event.enum"),v=e("settings/animation/add-animation"),w=e("settings/animation/promo-hunt-animation"),g=e("settings/animation/remove-animation"),f=e("class-name-builder"),b=void 0;return b=Backbone.View.extend({optionNames:["laneChannelName","additionalClassName"],tagName:"article",persistentClassName:"product",className:function(){var e=this.model.mode,t=void 0===e?this.model:e;return f.create().always("column")["if"](this.additionalClassName,this.additionalClassName)["if"](this.model.has("context"),this.persistentClassName+"--"+this.model.get("context").toLowerCase())["if"](this.model.hasEmbedded("mode"),"-"+t.get("type").toLowerCase().replace(/_/,"-")).toString()},bubble:function(){var e={};return e[a.CLOSE_FOLDOUT]="closeFoldOut",e[a.TOGGLE_FOLDOUT]="toggleFoldout",e[a.TOGGLE_OVERLAY]="handleOverlay",e},capture:function(){var e={};return e[h.ANALYTICS]="storeAnalytics",e},controlsViewType:null,regions:{CONTENT:"[data-region=content]",CARD:"[data-region=card]"},constructor:function(e){this.model=e.model,this.laneChannelName=e.laneChannelName,this.createBehavior(),Backbone.View.prototype.constructor.apply(this,arguments)},initialize:function(){this.setupBehavior()},createBehavior:function(){var e=r.getBehavior(this.model.get("context"));this.behavior=new e({view:this,model:this.model,listItem:this.model.listItem,laneChannelName:this.laneChannelName})},setupBehavior:function(){this.behavior.addAnimation&&this.listenTo(this.behavior,u.QUANTITY_INCREASED,this.doAddAnimation),this.behavior.removeViewWhenZeroQuantity&&(this.listenTo(this.behavior,u.DELETING_FROM_SHOPPINGLIST,c.addDestroyingClass.bind(this,this.$el)),this.listenTo(this.behavior,u.REMOVE_FROM_DOM,this.doRemoveAnimation)),this.behavior.greyedOutWhenZeroQuantity&&this.listenTo(this.behavior,u.QUANTITY_CHANGED,this.toggleGreyedOutClass)},setLink:function(){var e=o.getView(this.model.get("type"));this.append(new e({model:this.model}))},setWrapper:function(){this.append(new s({model:this.model}))},setImage:function(e){this.append(new i({model:e,laneChannelName:this.laneChannelName,region:this.regions.CONTENT,type:this.model.get("type")}))},setDescription:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.regions.CONTENT;this.append(new n({model:e,behavior:this.behavior,region:t}))},setControls:function(){var e=m.createControls(this.model,this.behavior,_.result(this,"controlsViewType"));e&&this.append(e)},handleOverlay:function(e){switch(e){case l.SHOW:this.setOverlay();break;case l.REMOVE:this.removeOverlay()}},setOverlay:function(){this.overlay||(this.overlay=new t,this.append(this.overlay))},removeOverlay:function(){this.overlay&&(this.overlay.remove(),delete this.overlay)},doAddAnimation:function(){return this.$el.hasClass("promo-hunt")?(this.channel(d.CHANNEL).publish("promo-hunt"),new w({$el:this.$el})):new v({$el:this.$el})},doRemoveAnimation:function(){return new g({view:this,onComplete:this.remove.bind(this)})},toggleGreyedOutClass:function(e){this.$el.toggleClass("-greyed-out",!e)},storeAnalytics:function(e){this.analytics=e},remove:function(){this.behavior.destroy(),Backbone.View.prototype.remove.call(this)}}),_.extend(b.prototype,p),b}),define("products/views/shop-item/components/controls/components/alternative/view/alternative.button.view",["require","products/utils/product.utils","settings/components/ui/button/view/button.view","products/decorators/alternative.product.decorator","settings/enums/command/window.command.enum","class-name-builder"],function(e){"use strict";var t=e("products/utils/product.utils"),i=e("settings/components/ui/button/view/button.view"),n=e("products/decorators/alternative.product.decorator"),o=e("settings/enums/command/window.command.enum"),s=e("class-name-builder"),r=void 0;return r=i.extend({optionNames:["behavior","additionalClassName","laneChannelName","title"],persistentClassName:i.prototype.className+" alternative-product-link cta--fold-out color-ah ah-online-icon",className:function(){return s.create()["if"](this.additionalClassName,this.additionalClassName)["if"](this.behavior.checkoutAlternativeButtonIcon,"icon--chevron--after")["else"]("icon--see-more--after").toString()},title:"products.alternative.title",i18n:!0,initialize:function(){i.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){this.channel(o.CHANNEL).command(o.ADD_TESTHOOK,this.$el,"product-alternative-"+t.getProductId(this.model))},onClick:function(e){e.preventDefault(),e.stopPropagation(),this.createFoldOutWithAlternativeProducts()}}),_.extend(r.prototype,n),r}),define("products/views/shop-item/components/controls/components/alternative/view/compare.button.view",["require","products/enums/shop-item.bubble-event.enum","products/views/shop-item/components/controls/components/alternative/view/alternative.button.view"],function(e){"use strict";var t=e("products/enums/shop-item.bubble-event.enum"),i=e("products/views/shop-item/components/controls/components/alternative/view/alternative.button.view");return i.extend({className:"cta--fold-out color-ah icon--see-more compare-product-link",title:"products.compare.title",onClick:function(e){i.prototype.onClick.apply(this,arguments),e.preventDefault(),e.stopPropagation(),this.triggerBubble(t.FLIP_STICKER)}})}),define("products/views/shop-item/components/controls/components/sample/view/sample.button.view",["require","products/views/shop-item/components/controls/components/alternative/view/alternative.button.view","products/utils/product.utils","settings/enums/command/window.command.enum"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/components/alternative/view/alternative.button.view"),i=e("products/utils/product.utils"),n=e("settings/enums/command/window.command.enum");return t.extend({title:"products.sample.title",onRenderComplete:function(){this.channel(n.CHANNEL).command(n.ADD_TESTHOOK,this.$el,"product-sample-"+i.getProductId(this.model))}})}),define("products/views/shop-item/components/controls/components/alternative/view/selected-alternative.button.view",["require","products/utils/product.utils","settings/enums/command/window.command.enum","products/views/shop-item/components/controls/components/alternative/view/alternative.button.view"],function(e){"use strict";var t=e("products/utils/product.utils"),i=e("settings/enums/command/window.command.enum"),n=e("products/views/shop-item/components/controls/components/alternative/view/alternative.button.view");return n.extend({optionNames:["behavior"],className:"icon--close-cross--after -selected-alternative",onRenderComplete:function(){this.channel(i.CHANNEL).command(i.ADD_TESTHOOK,this.$el,"product-selectedAlternative-"+t.getProductId(this.model))},onClick:function(){return n.prototype.onClick.apply(this,arguments),this.behavior.deleteFromShoppingList()}})}),define("products/views/shop-item/product/components/discount-block/components/discount.label.view",["require","products/utils/product.utils","class-name-builder"],function(e){"use strict";var t=e("products/utils/product.utils"),i=e("class-name-builder");return Backbone.View.extend({tagName:"span",persistentClassName:"bold",className:function(){return i.create().always("discount-block__label")["if"](t.hasInfiniteDiscount(this.model),"discount-block__label--infinite-discount").toString()},render:function(){return this.$el.text(this.model.get("discount.label")),this}})}),define("products/views/shop-item/product/components/discount-block/components/discount.type.label.view",["require","products/views/shop-item/product/components/discount-block/components/discount.label.view"],function(e){"use strict";var t=e("products/views/shop-item/product/components/discount-block/components/discount.label.view");return t.extend({className:"discount-block__label-type",render:function(){return this.$el.text(this.request("i18n:get","products.labels."+this.model.get("discount.type.name"))),this}})}),define("products/views/shop-item/product/components/discount-block/view/discount-block.view",["products/utils/product.utils","settings/utils/window-breakpoint","class-name-builder","products/views/shop-item/product/components/discount-block/components/discount.label.view","products/views/shop-item/product/components/discount-block/components/discount.type.label.view","products/views/shop-item/product/components/discount-block/enum/discount-label.enum"],function(){"use strict";var e=require("products/utils/product.utils"),t=require("settings/utils/window-breakpoint"),i=require("class-name-builder"),n=require("products/views/shop-item/product/components/discount-block/components/discount.label.view"),o=require("products/views/shop-item/product/components/discount-block/components/discount.type.label.view"),s=require("products/views/shop-item/product/components/discount-block/enum/discount-label.enum");return Backbone.View.extend({optionNames:["productType"],className:function(){return i.create().always("discount-block")["if"](e.hasGallCard(this.model),"discount-block--gall-card")["if"](e.hasGallDiscount(this.model),"discount-block--gall")["if"](e.hasNoDiscountLabel(this.model),"discount-block--no-labels").toString()},attributes:{"data-region":"discount"},render:function(){return!this.model.get("discount")||!e.isMobileView(this.model,t.activeBreakpoint())&&e.isListView(this.productType)||this.appendDiscount(),this},appendDiscount:function(){var e=this.model.get("discount.type.name");(e===s.ONLINE_BONUS||e===s.GALL_DISCOUNT_CARD)&&this.append(new o({model:this.model})),this.append(new n({model:this.model}))}})}),define("products/views/shop-item/product/components/labels/view/times-purchased.product.label.view",[],function(){"use strict";return Backbone.View.extend({tagName:"span",className:"product-description__times-purchased -multiline",render:function(){var e=this.model.get("numberOfTimesPurchased"),t=this.request("i18n:get","products.labels.times-purchased",{quantity:e});return this.$el.text(t),this}})}),define("products/views/shop-item/product/components/labels/view/top-nutrient.product.label.view",[],function(){"use strict";return Backbone.View.extend({className:"nutrient-label color-black--1",attributes:function(){return{title:this.getNutrientContent()}},render:function(){this.$el.html(this.getNutrientContent())},getNutrientContent:function(){var e=this.model?this.model.get("text"):"",t=this.model?this.model.get("value"):"",i=this.model?this.model.get("unit"):"";return t?""+t+i+" "+e:this.request("i18n:get","products.labels.nutrient-info-not-available")}})}),define("products/views/shop-item/product/components/labels/view/unit-size.product.label.view",[],function(){"use strict";return Backbone.View.extend({tagName:"span",className:"product-description__unit-size -multiline",render:function(){return this.$el.html(this.model.get("unitSize")),this}})}),define("products/views/shop-item/product/components/labels/view/price-per-usage.product.label.view",[],function(){"use strict";return Backbone.View.extend({tagName:"span",className:"product-description__price-per-usage",attributes:{"data-region":"price-info"},render:function(){return this.$el.html(this.model.get("unitOfUseSize")),this}})}),define("products/views/shop-item/product/components/labels/view/atp-unit-size.product.label.view",["require","products/views/shop-item/product/components/labels/view/unit-size.product.label.view"],function(e){"use strict";var t=e("products/views/shop-item/product/components/labels/view/unit-size.product.label.view");return t.extend({render:function(){return this.$el.text(this.model.get("quantity")+" "+this.request("i18n:get","products.labels.atp-unit-size")),this}})}),define("products/views/shop-item/product/components/labels/view/deliverable.product.label.view",[],function(){
"use strict";return Backbone.View.extend({tagName:"span",className:"product-description__unit-deliverable",render:function(){return this.$el.text(this.model.get("available")+" "+this.model.get("label")),this}})}),define("dst!products/views/shop-item/product/components/labels/template/bonus-text.product.label.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<span class="product-sticker -multiline color-bonus">').x(t.getPath(!1,["discount","period"]),t,{block:i},{}).w(" ").x(t.get(["discountLabel"],!1),t,{block:n},{}).w("</span>")}function i(e,t){return e.f(t.getPath(!1,["discount","period"]),t,"h",["s"])}function n(e,t){return e.f(t.getPath(!1,["discount","type","label"]),t,"h")}return e.register("products/views/shop-item/product/components/labels/template/bonus-text.product.label.view.dust",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/components/labels/template/bonus-text.product.label.view.dust",t,i)}}),define("products/views/shop-item/product/components/labels/view/bonus.product.label.view",["dst!products/views/shop-item/product/components/labels/template/bonus-text.product.label.view.dust"],function(){"use strict";return Backbone.View.extend({template:require("dst!products/views/shop-item/product/components/labels/template/bonus-text.product.label.view.dust"),renderMethod:"replace",getTemplateData:function(){var e=!1,t="",i="";return this.model.has("discount")&&(e=!0,i=this.model.get("discount.label"),t=this.model.get("discount.type.label")),{discount:this.model.get("discount"),discountLabel:t,isBonus:e,bonusLabel:i}}})}),define("dst!products/views/shop-item/product/components/labels/template/bonus-incentive.product.label.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<span class="bold product-description__heading -multiline">').x(t.get(["onlineOnly"],!1),t,{block:i},{}).x(t.get(["gallLabel"],!1),t,{block:n},{}).f(t.get(["bonusLabel"],!1),t,"h").w("</span>").x(t.getPath(!1,["discount","period"]),t,{block:o},{}).x(t.get(["discountLabel"],!1),t,{block:s},{})}function i(e,t){return e.w("online ")}function n(e,t){return e.w('<span class="product-description__incentive--gall-card">').f(t.get(["gallLabel"],!1),t,"h").w("</span>")}function o(e,t){return e.w('<span class="product-description__incentive-text -multiline">').f(t.getPath(!1,["discount","period"]),t,"h",["s"]).w("</span>")}function s(e,t){return e.w('<span class="product-description__incentive-text -multiline">').f(t.getPath(!1,["discount","type","label"]),t,"h").w("</span>")}return e.register("products/views/shop-item/product/components/labels/template/bonus-incentive.product.label.view.dust",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/components/labels/template/bonus-incentive.product.label.view.dust",t,i)}}),define("products/views/shop-item/product/components/labels/view/bonus.incentive.product.label.view",["dst!products/views/shop-item/product/components/labels/template/bonus-incentive.product.label.view.dust"],function(){"use strict";return Backbone.View.extend({className:"product-description__incentive color-bonus -multiline",template:require("dst!products/views/shop-item/product/components/labels/template/bonus-incentive.product.label.view.dust"),renderMethod:"append",getTemplateData:function(){var e=!1,t="",i="",n="";return this.model.has("discount")&&(i=this.model.get("discount.label"),t=this.model.get("discount.type.label")),this.model.has("discount")&&"ONLINE_BONUS"===this.model.get("discount.type.name")&&(e=!0),this.model.has("discount")&&"GALL_DISCOUNT_CARD"===this.model.get("discount.type.name")&&(n=this.request("i18n:get","products.labels.GALL_DISCOUNT_CARD")),{stickerLabel:this.model.get("stickerLabel"),discountLabel:t,discount:this.model.get("discount"),bonusLabel:i,onlineOnly:e,gallLabel:n}}})}),define("products/views/shop-item/product/components/labels/view/availability.product.label.view",[],function(){"use strict";return Backbone.View.extend({tagName:"span",className:"product-sticker color-aardbei -multiline",attributes:function e(){var e={};return e.title=this.model.get("availability.label"),e["data-availability"]="sold-out",e},render:function(){this.model.has("availability.label")&&this.$el.html(this.model.get("availability.label"))}})}),define("products/views/shop-item/product/components/labels/view/detail.smart.product.label.view",[],function(){"use strict";return Backbone.View.extend({tagName:"span",className:"product-sticker color-ah -multiline",attributes:function(){return{title:this.model.get("productLabelDetail")}},render:function(){this.$el.html(this.model.get("productLabelDetail"))}})}),define("products/views/shop-item/product/components/labels/view/detail.sticker.product.label.view",[],function(){"use strict";return Backbone.View.extend({tagName:"span",className:"product-sticker color-ah -multiline",attributes:function(){return{title:this.model.get("sticker.detailText")}},render:function(){this.$el.html(this.model.get("sticker.detailText"))}})}),define("products/views/shop-item/product/components/labels/view/theme-sticker.product.label.view",[],function(){"use strict";return Backbone.View.extend({tagName:"span",className:"product-sticker--theme color-ah",attributes:function(){return{title:this.model.get("sticker.image.title")}},render:function(){this.$el.html(this.model.get("sticker.image.title"))}})}),define("dst!products/views/shop-item/product/components/labels/template/unchangeable.product.label.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<i class="ah-online-icon icon--locked product__locked-icon"></i>').f(t.get(["label"],!1),t,"h")}return e.register("products/views/shop-item/product/components/labels/template/unchangeable.product.label.view.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/components/labels/template/unchangeable.product.label.view.dust",t,i)}}),define("products/views/shop-item/product/components/labels/view/unchangeable.product.label.view",["require","dst!products/views/shop-item/product/components/labels/template/unchangeable.product.label.view.dust"],function(e){"use strict";return Backbone.View.extend({tagName:"span",template:e("dst!products/views/shop-item/product/components/labels/template/unchangeable.product.label.view.dust"),className:"product-sticker product-unchangeable__label -multiline",optionNames:["label"],renderMethod:"append",attributes:function(){return{title:this.label}},getTemplateData:function(){return{label:this.label}}})}),define("products/views/shop-item/product/components/labels/view/product.label.view",[],function(){"use strict";return Backbone.View.extend({tagName:"span",className:"product-sticker color-ah -multiline",optionNames:["label"],attributes:function(){return{title:this.label}},render:function(){this.$el.html(this.label)}})}),define("products/views/shop-item/product/components/labels/view/bonus-group-disclaimer.label",[],function(){"use strict";return Backbone.View.extend({tagName:"span",className:"bonus-group-disclaimer -multiline",render:function(){this.$el.text(this.model.get("discountRangeDescription"))}})}),define("products/views/shop-item/product/components/labels/assembler/labels.assembler",["require","products/utils/product.utils","settings/utils/window-breakpoint","products/views/shop-item/product/components/labels/view/times-purchased.product.label.view","products/views/shop-item/product/components/labels/view/top-nutrient.product.label.view","products/views/shop-item/product/components/labels/view/unit-size.product.label.view","products/views/shop-item/product/components/labels/view/price-per-usage.product.label.view","products/views/shop-item/product/components/labels/view/atp-unit-size.product.label.view","products/views/shop-item/product/components/labels/view/deliverable.product.label.view","products/views/shop-item/product/components/labels/view/bonus.product.label.view","products/views/shop-item/product/components/labels/view/bonus.incentive.product.label.view","products/views/shop-item/product/components/labels/view/availability.product.label.view","products/views/shop-item/product/components/labels/view/detail.smart.product.label.view","products/views/shop-item/product/components/labels/view/detail.sticker.product.label.view","products/views/shop-item/product/components/labels/view/theme-sticker.product.label.view","products/views/shop-item/product/components/labels/view/unchangeable.product.label.view","products/enums/product-view-type.enum","products/views/shop-item/product/components/labels/view/product.label.view","products/views/shop-item/product/components/labels/view/bonus-group-disclaimer.label"],function(e){"use strict";var t=e("products/utils/product.utils"),i=e("settings/utils/window-breakpoint"),n=e("products/views/shop-item/product/components/labels/view/times-purchased.product.label.view"),o=e("products/views/shop-item/product/components/labels/view/top-nutrient.product.label.view"),s=e("products/views/shop-item/product/components/labels/view/unit-size.product.label.view"),r=e("products/views/shop-item/product/components/labels/view/price-per-usage.product.label.view"),c=e("products/views/shop-item/product/components/labels/view/atp-unit-size.product.label.view"),u=e("products/views/shop-item/product/components/labels/view/deliverable.product.label.view"),a=e("products/views/shop-item/product/components/labels/view/bonus.product.label.view"),d=e("products/views/shop-item/product/components/labels/view/bonus.incentive.product.label.view"),l=e("products/views/shop-item/product/components/labels/view/availability.product.label.view"),p=e("products/views/shop-item/product/components/labels/view/detail.smart.product.label.view"),m=e("products/views/shop-item/product/components/labels/view/detail.sticker.product.label.view"),h=e("products/views/shop-item/product/components/labels/view/theme-sticker.product.label.view"),v=e("products/views/shop-item/product/components/labels/view/unchangeable.product.label.view"),w=e("products/enums/product-view-type.enum"),g=e("products/views/shop-item/product/components/labels/view/product.label.view"),f=e("products/views/shop-item/product/components/labels/view/bonus-group-disclaimer.label");return{createLabels:function(e,t){var i=_.union(this.getCommonProductLabels(e,t),this.getAvailableProductLabels(e,t));return t.limitLabels&&i.length>t.limitLabels&&(i=i.slice(0,t.limitLabels)),i},isForMobile:function(e){return t.isMobileView(e,i.activeBreakpoint())||t.isListView(e)||t.isListWideView(e)},getAvailableProductLabels:function(e,i){var n=[];return t.isAvailable(e)&&(n=this.isForMobile(e)?this.getProductLabelsForMobile(e,i):this.getProductLabelsForDesktop(e,i)),n},getCommonProductLabels:function(e,i){var n=[];return i.labels&&(e.atp?(n.push(this.getATPUnitSizeLabel(e.listItem)),n.push(this.getDeliverableLabel(e.atp))):n.push(this.getUnitSizeLabel(e.product)),i.pricePerUsageLabel&&n.push(this.getPricePerUsageLabel(e.product)),t.isUnchangeableProduct(e)||t.isReadOnly(e)?n.push(this.getUnchangeableLabel(e,i)):i.recipeMixer&&i.isSpecialCase(e)?n.push(this.getModeMessage(e)):t.isSmartLabelProduct(e)?i.detailSmartLabel?n.push(this.getDetailSmartLabel(e.product)):n.push(this.getSmartLabel(e.product)):t.isAvailable(e)||n.push(this.getUnavailableLabel(e.product))),n},getProductLabelsForMobile:function(e,i){var n=[];return i.stickers&&e.product.get("sticker")&&n.push(this.getThemeStickerLabel(e.product)),i.labels&&(e.product.get("discount")?n.push(this.getBonusIncentiveLabel(e.product)):n.push(this.getProductStickerLabel(e.product)),e.member&&e.member.get("numberOfTimesPurchased")&&n.push(this.getTimesPurchasedLabel(e.member)),e.nutrientLabel&&n.push(this.getTopNutrientLabel(e.nutrientLabel)),t.isBonusGroup(e)&&n.push(this.getBonusGroupDisclaimerLabel(e.product))),n},getProductLabelsForDesktop:function(e,i){var n=[];return i.labels&&e.product.has("discount")?n.push(this.getBonusLabel(e.product)):i.stickers&&e.product.get("sticker.label")&&!t.isSmartLabelProduct(e)&&(e.get("viewType")===w.HERO?n.push(this.getDetailProductStickerLabel(e.product)):n.push(this.getProductStickerLabel(e.product))),i.labels&&e.member&&e.member.get("numberOfTimesPurchased")&&n.push(this.getTimesPurchasedLabel(e.member)),n},getUnitSizeLabel:function(e){return new s({model:e,region:"[data-region=header]"})},getTimesPurchasedLabel:function(e){return new n({model:e,region:"[data-region=header]"})},getTopNutrientLabel:function(e){return new o({model:e,region:"[data-region=header]"})},getPricePerUsageLabel:function(e){return new r({model:e,region:"[data-region=header]"})},getATPUnitSizeLabel:function(e){return new c({model:e,region:"[data-region=header]"})},getDeliverableLabel:function(e){return new u({model:e,region:"[data-region=header]"})},getBonusLabel:function(e){return new a({model:e,region:"[data-region=header]"})},getBonusIncentiveLabel:function(e){return new d({model:e,region:"[data-region=header]"})},getSmartLabel:function(e){return new g({label:e.get("productLabel"),region:"[data-region=header]"})},getModeMessage:function(e){return new g({label:e.mode.get("message"),region:"[data-region=header]"})},getDetailSmartLabel:function(e){return new p({model:e,region:"[data-region=header]"})},getUnavailableLabel:function(e){return new l({model:e,region:"[data-region=header]"})},getUnchangeableLabel:function(e,t){var i=e.product.get("productStatus");return t.recipeMixer&&t.isSpecialCase(e)&&(i=e.mode.get("message")),new v({label:i,region:"[data-region=header]"})},getProductStickerLabel:function(e){return new g({label:e.get("sticker.label"),region:"[data-region=header]"})},getDetailProductStickerLabel:function(e){return new m({model:e,region:"[data-region=header]"})},getThemeStickerLabel:function(e){return new h({model:e,region:"[data-region=header]"})},getBonusGroupDisclaimerLabel:function(e){return new f({model:e,region:"[data-region=content]"})}}}),define("products/views/shop-item/product/components/icons/enum/shop-in-shop.product.icon.enum",[],function(){"use strict";return{GALL:"GA",ETOS:"ET"}}),define("products/views/shop-item/product/components/icons/view/shop-in-shop.product-icon.view",["settings/utils/breakpoints","products/enums/products.type.enum","products/views/shop-item/product/components/icons/enum/shop-in-shop.product.icon.enum"],function(){"use strict";var e=require("settings/utils/breakpoints"),t=require("products/enums/products.type.enum"),i=require("products/views/shop-item/product/components/icons/enum/shop-in-shop.product.icon.enum");return Backbone.View.extend({tagName:"i",className:function(){switch(this.model.get("shopInShop")){case i.GALL:return this.getGallSupplierIconClass();case i.ETOS:return"product-supplier product-supplier--etos"}},checkIfListViewOrDeviceIsBiggerThanPhone:function(){return this.model.get("type")===t.LISTITEM?!1:!e.isPhone()},getGallSupplierIconClass:function(){return"product-supplier product-supplier--gall"}})}),define("products/views/shop-item/product/components/icons/view/previously-bought.product-icon.view",[],function(){"use strict";return Backbone.View.extend({tagName:"i",className:"product__previously-bought",attributes:function(){var e=this.request("i18n:get","products.previously-bought");return{title:e,"aria-label":e}},render:function(){return this}})}),define("dst!products/views/shop-item/product/components/icons/template/property-icon.product.icon.view.dust",["dust"],function(e){return function(){function t(e,t){return e.s(t.get(["propertyIcons"],!1),t,{block:i},{})}function i(e,t){return e.w('<i class="product__property-icon product__property-icon--').f(t.get(["identifier"],!1),t,"h").w('" title="').f(t.get(["tooltip"],!1),t,"h").w('"></i>')}return e.register("products/views/shop-item/product/components/icons/template/property-icon.product.icon.view.dust",t),t.__dustBody=!0,i.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/components/icons/template/property-icon.product.icon.view.dust",t,i)}}),define("products/views/shop-item/product/components/icons/view/property-icon.product-icon.view",["dst!products/views/shop-item/product/components/icons/template/property-icon.product.icon.view.dust"],function(){"use strict";return Backbone.View.extend({template:require("dst!products/views/shop-item/product/components/icons/template/property-icon.product.icon.view.dust"),className:"product__property-icons",renderMethod:"append",getTemplateData:function(){return{propertyIcons:this.model.get("propertyIcons")}}})}),define("products/views/shop-item/product/components/icons/view/sticker.product-icon.view",[],function(){"use strict";return Backbone.View.extend({tagName:"img",className:"product-sticker__thema",attributes:function(){return{src:this.model.get("sticker.image.link.href"),alt:this.model.get("sticker.image.title")}}})}),define("products/views/shop-item/product/components/icons/assembler/icons.assembler",["require","products/views/shop-item/product/components/icons/view/shop-in-shop.product-icon.view","products/views/shop-item/product/components/icons/view/previously-bought.product-icon.view","products/views/shop-item/product/components/icons/view/property-icon.product-icon.view","products/views/shop-item/product/components/icons/view/sticker.product-icon.view","products/enums/product-view-type.enum"],function(e){"use strict";var t=e("products/views/shop-item/product/components/icons/view/shop-in-shop.product-icon.view"),i=e("products/views/shop-item/product/components/icons/view/previously-bought.product-icon.view"),n=e("products/views/shop-item/product/components/icons/view/property-icon.product-icon.view"),o=e("products/views/shop-item/product/components/icons/view/sticker.product-icon.view"),s=e("products/enums/product-view-type.enum");return{regions:{CONTENT:"[data-region=content]",DISCOUNT:"[data-region=discount]",IMAGE:"[data-region=image]",IMAGE_CONTAINER:"[data-region=image-container]"},createIcons:function(e,t){var i=[];if(t.supplier&&e.product.get("shopInShop")&&!e.product.get("sticker.image")&&i.push(this.getShopInShop(e.product)),t.previouslyBought&&e.member&&e.member.get("previouslyBought")&&i.push(this.getPreviouslyBought(e)),t.icons&&e.product.get("propertyIcons")&&e.product.get("propertyIcons").length>0&&i.push(this.getPropertyIcons(e.product)),t.stickers&&e.product.get("sticker.image")){var n=void 0;n=e.get("viewType")===s.HERO?this.regions.IMAGE_CONTAINER:this.regions.CONTENT,i.push(this.getThemeSticker(e.product,n))}return i},getShopInShop:function(e){return{view:new t({model:e,region:this.regions.IMAGE}),addMethod:"prepend"}},getPreviouslyBought:function(e){return{view:new i({model:e})}},getPropertyIcons:function(e){return{view:new n({model:e,region:this.regions.DISCOUNT}),addMethod:"prepend"}},getThemeSticker:function(e,t){return{view:new o({model:e,region:t}),addMethod:"prepend"}}}}),define("products/enums/shop-item.event.enum",[],function(){"use strict";return{PRODUCT_IN_VIEW:"product-in-view"}}),define("products/tracking/product.tracking",["require","settings/model/analytics/add-product.analytics.model","settings/model/analytics/event.analytics.model","settings/model/analytics/add-impression.analytics.model","settings/model/analytics/set-action/set-action.analytics.model","settings/model/analytics/set-action/click.set-action.analytics.model","products/utils/product.utils","settings/enums/command/analytics.command.enum","settings/enums/events/lane.event.enum","settings/enums/events/shoppinglist.event.enum","products/enums/shop-item.event.enum","products/enums/shop-item-behavior.event.enum","settings/enums/google-analytics/action-type.enum","settings/utils/dmp/dmp","settings/enums/dmp.enum","products/enums/product-view-type.enum","products/enums/product.context.enum"],function(e){"use strict";var t=e("settings/model/analytics/add-product.analytics.model"),i=e("settings/model/analytics/event.analytics.model"),n=e("settings/model/analytics/add-impression.analytics.model"),o=e("settings/model/analytics/set-action/set-action.analytics.model"),s=e("settings/model/analytics/set-action/click.set-action.analytics.model"),r=e("products/utils/product.utils"),c=e("settings/enums/command/analytics.command.enum"),u=e("settings/enums/events/lane.event.enum"),a=e("settings/enums/events/shoppinglist.event.enum"),d=e("products/enums/shop-item.event.enum"),l=e("products/enums/shop-item-behavior.event.enum"),p=e("settings/enums/google-analytics/action-type.enum"),m=e("settings/utils/dmp/dmp"),h=e("settings/enums/dmp.enum"),v=e("products/enums/product-view-type.enum"),w=e("products/enums/product.context.enum"),g=void 0;return g=Backbone.Class.extend({optionNames:["$el","model","laneChannelName","behavior"],initialize:function(){var e,t=(e={},_defineProperty(e,l.QUANTITY_SAVED,this.changeQuantity),_defineProperty(e,l.DELETED_FROM_SHOPPINGLIST,this.changeQuantity),_defineProperty(e,l.DRAFT_PRODUCT_ADDED,this.changeQuantity),_defineProperty(e,l.PRODUCT_PAGE_HERO_LOADED,this.onProductPageHeroLoaded),_defineProperty(e,l.PRODUCT_CLICKED,this.onProductClick),_defineProperty(e,l.PRODUCT_FAVORITE_CLICKED,this.onProductFavoriteClick),e);_.bindAll(this,"onProductClick"),this.listenTo(this.behavior,t),this.listenTo(this.model,d.PRODUCT_IN_VIEW,this.trackProductInView),this.channel(a.CHANNEL).subscribe(a.LIST_EMPTIED,this.handleListEmptied,this),this.currentListName=this.getListName()},changeQuantity:function(e,t){var i=void 0,n=void 0,s=void 0;return this.model.get("context")===w.DRAFT&&_.isUndefined(e)?void this.trackDraftProduct():void(_.isNumber(e)&&_.isNumber(t)&&(i=e-t,n=i>0?p.ADD:p.REMOVE,s=o.extend({actionType:n}),this.trackChangeQuantity(i,n),this.trackSetAction(new s({list:this.getListName()}))))},trackChangeQuantity:function(e,i){var n=new t(this.getAnalyticsModelData(),i);n.set(this.getChangeQuantityData(e)),this.trackAddProduct(n)},getChangeQuantityData:function(e){var t=this.model.product.get("discount.label"),i={quantity:Math.abs(e),decrement:0>e};return t&&(i.coupon=t),i},getProductPropertyIconsData:function(){var e=this.model.product.get("propertyIcons");if(e){var t=e.map(function(e){return e.identifier});return{feature:t}}return{}},getProductStickerData:function(){var e=this.model.product.get("sticker.image.title");return e?{sticker:e}:{}},featureIcons:function(){var e=this.model.product.get("propertyIcons");return e?e.map(function(e){return e.identifier}).toString().split(",").join("|"):""},onProductPageHeroLoaded:function(){window.gtmdataLayer.push({page:{product:this.getAnalyticsModelData()}})},trackAddProduct:function(e){e.set(this.getProductPropertyIconsData()),e.set(this.getProductStickerData()),this.model.analytics&&this.model.analytics.get("crossSellParentId")&&(e.set("dimension15","CROSS_SELL"),e.set("dimension17",this.getReferringProductId())),this.channel(c.CHANNEL).command(c.ADD_PRODUCT,e)},trackSetAction:function(e){this.channel(c.CHANNEL).command(c.SET_ACTION,{product:this.getAnalyticsModelData(),model:e})},handleListEmptied:function(){this.model.listitem&&this.changeQuantity(0,this.model.listItem.get("quantity"))},trackProductInView:function(){var e=new n(this.getAnalyticsModelData());e.set("list",this.getListName()),this.model.analytics&&this.model.analytics.get("crossSellParentId")&&(e.set("dimension15","CROSS_SELL"),e.set("dimension17",this.getReferringProductId())),this.model.get("viewType")!==v.HERO&&this.channel(c.CHANNEL).command(c.ADD_IMPRESSION,e)},trackDraftProduct:function(){var e=new i(this.getAnalyticsDraftModelData());e.set({eventAction:this.model.get("controlAction"),eventLabel:this.model.product?this.model.product.get("id"):""}),this.channel(c.CHANNEL).command(c.EVENT,e)},onProductFavoriteClick:function(){var e=h.FAVORISE_PRODUCT,t=_.extend({name:this.model.product.get("description"),category:this.model.product.get("categoryName"),price:this.model.product.get("priceLabel.now")?this.model.product.get("priceLabel.now").toFixed(2):"",unitSize:this.model.product.get("unitSize"),quantity:this.model.listItem?this.model.listItem.get("quantity"):1},this.getProductPropertyIconsData(),this.getProductStickerData());m.pushDmpEvent(t,e)},onProductClick:function(){this.trackAddProduct(new t(this.getAnalyticsModelData(),p.CLICK)),this.trackSetAction(new s({list:this.currentListName||this.getListName()}))},trackProductDimension:function(){var e=this.model.analytics?this.model.analytics.get("alternativeType"):null,t=e?{dimension15:e}:{};return _.assign({dimension13:r.isAvailable(this.model)?1:0,dimension17:this.getReferringProductId(),dimension21:this.model.product.get("categoryName"),dimension18:this.model.listItem?this.model.listItem.get("quantity"):"0",dimension22:this.model.product.get("brandName")||"(not set)"},t)},getReferringProductId:function(){var e="(not set)";return this.model.analytics instanceof Backbone.Model&&this.model.analytics.get("referringProductId")?e=this.model.analytics.get("referringProductId"):this.model.analytics instanceof Backbone.Model&&this.model.analytics.get("crossSellParentId")&&(e=this.model.analytics.get("crossSellParentId")),e},getAnalyticsModelData:function(){return _.assign({id:this.model.product.id,name:this.model.product.get("description"),category:this.model.product.get("categoryName"),variant:this.model.product.get("unitSize"),brand:this.model.product.get("brandName"),price:this.model.product.get("priceLabel.now")?this.model.product.get("priceLabel.now").toFixed(2):"",originalPrice:this.model.product.get("priceLabel.was")?this.model.product.get("priceLabel.was").toFixed(2):"",list:this.getListName(),position:this.model.get("position")||r.getLaneIndex(this.$el)+1,discount:this.model.product.get("discount")?this.model.product.get("discount.label"):"",availability:this.model.product.get("availability.orderable"),feature:this.featureIcons()},this.trackProductDimension())},getAnalyticsDraftModelData:function(){return{eventCategory:"Draft",transport:"beacon"}},getListName:function(){var e=r.getFoldOutId(this.$el),t=location.pathname.substr(1,location.pathname.length).replace(/\//g," - ")||"Home";return e&&(t=e),t},destroy:function(){this.stopListening(),this.$el.find("a").off("click",this.onProductClick),delete this.$el,delete this.model,this.channel(this.laneChannelName).unsubscribe(u.INVIEW,this.trackProductInView,this),this.channel(a.CHANNEL).unsubscribe(a.LIST_EMPTIED,this.handleListEmptied,this)}}),_.extend(g.prototype,Backbone.Events,Backbone.decorators.Command,Backbone.decorators.PubSub),g}),define("products/enums/promotion-class-name.enum",[],function(){"use strict";return{AH:"promotion-theme--ah",ETOS:"promotion-theme--etos",GALL:"promotion-theme--gall"}}),define("products/enums/promotion.type.enum",[],function(){"use strict";return{AH:"ah",ETOS:"etos",GALL:"gall"}}),define("products/views/shop-item/helpers/card-promotion.helper",["require","products/enums/promotion-class-name.enum","products/enums/promotion.type.enum"],function(e){"use strict";var t=e("products/enums/promotion-class-name.enum"),i=e("products/enums/promotion.type.enum");return{getCardPromotionTheme:function(e){var n=e.get("promotionTheme");switch(n){case i.AH:return t.AH;case i.ETOS:return t.ETOS;case i.GALL:return t.GALL;default:return""}}}}),define("products/views/shop-item/components/controls/components/alternative/view/choose-alternative.button.view",["require","settings/components/ui/button/view/button.view","settings/enums/command/window.command.enum","settings/enums/events/product.event.enum","products/utils/product.utils"],function(e){"use strict";var t=e("settings/components/ui/button/view/button.view"),i=e("settings/enums/command/window.command.enum"),n=e("settings/enums/events/product.event.enum"),o=e("products/utils/product.utils");return t.extend({className:t.prototype.className+" product-controls__item--pick-alternative button--1 button-color-blue--1",title:"products.buttons.choose-alternative.title",i18n:!0,initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){this.channel(i.CHANNEL).command(i.ADD_TESTHOOK,this.$el,"product-alternative-"+o.getProductId(this.model))},onClick:function(e){e.preventDefault();var t=this.model.attributes.foldOutChannelId,i=void 0===t?"foldOutChannel":t;this.channel(i).publish(n.ALTERNATIVE_SELECTED,this.model)}})}),define("products/views/shop-item/components/controls/view/alternative.shop-item-controls.view",["require","products/views/shop-item/components/controls/components/alternative/view/choose-alternative.button.view"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/components/alternative/view/choose-alternative.button.view");return Backbone.View.extend({className:"product-controls--select-alternative",render:function(){return this.setChooseAlternativeButton(),this},setChooseAlternativeButton:function(){this.append(new t({model:this.model}))}})}),define("products/views/shop-item/components/controls/components/alternative/view/replace-product.button.view",["require","products/utils/product.utils","class-name-builder","settings/enums/command/window.command.enum","products/views/shop-item/components/controls/components/alternative/view/alternative.button.view"],function(e){"use strict";var t=e("products/utils/product.utils"),i=e("class-name-builder"),n=e("settings/enums/command/window.command.enum"),o=e("products/views/shop-item/components/controls/components/alternative/view/alternative.button.view");return o.extend({className:function(){return i.create().always("icon--see-more--after")["if"](this.additionalClassName,this.additionalClassName).toString()},title:"products.buttons.replace-with-alternative.title",initialize:function(){o.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){this.channel(n.CHANNEL).command(n.ADD_TESTHOOK,this.$el,"product-alternative-"+t.getProductId(this.model))}})}),define("dst!products/views/shop-item/product/components/nutritional-info/template/nutritional-sticker.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div><div class="nutrient-sticker__content"><span class="nutrient-sticker__value">').f(t.get(["value"],!1),t,"h").w('<span class="nutrient-sticker__unit">').f(t.get(["unit"],!1),t,"h").w('</span></span><span class="nutrient-sticker__type">').f(t.get(["text"],!1),t,"h").w("</span></div></div>")}return e.register("products/views/shop-item/product/components/nutritional-info/template/nutritional-sticker.view.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/components/nutritional-info/template/nutritional-sticker.view.dust",t,i)}}),define("products/views/shop-item/product/components/nutritional-info/view/nutritional-sticker.view",["settings/enums/nutrient.enum","dst!products/views/shop-item/product/components/nutritional-info/template/nutritional-sticker.view.dust"],function(){"use strict";var e=require("settings/enums/nutrient.enum");return Backbone.View.extend({template:require("dst!products/views/shop-item/product/components/nutritional-info/template/nutritional-sticker.view.dust"),className:"nutrient-sticker",renderMethod:"append",attributes:function(){return{title:this.getAltText()}},getNutrientName:function(){return this.model?e[this.model.id]:this.request("i18n:get","products.labels.nutrient-info-not-available")},getAltText:function(){return this.model?this.request("i18n:get","products.labels.nutrient-info-alt",{value:this.model.value,unit:this.model.unit,nutrient:this.getNutrientName().toLowerCase()}):this.request("i18n:get","products.labels.nutrient-info-alt-none-available")},getTemplateData:function(){return{text:this.getNutrientName(),value:this.model?this.model.value:"",unit:this.model?this.model.unit:""}}})}),define("products/views/shop-item/product/components/labels/view/nutrient.product.label.view",["settings/enums/nutrient.enum"],function(){
"use strict";var e=require("settings/enums/nutrient.enum");return Backbone.View.extend({optionNames:["active"],className:"nutrient-info color-black--1",attributes:function(){return{title:this.getNutrientContent()}},render:function(){this.$el.text(this.getNutrientContent())},getNutrientContent:function(){var t=this.active,i=t.value,n=t.unit,o=t.id;return i?""+i+n+" "+e[o]:this.request("i18n:get","products.labels.nutrient-info-not-available")}})}),define("dst!products/views/shop-item/product/components/nutritional-info/template/top-nutrient-sticker.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div><div class="nutrient-sticker__content"><span class="nutrient-sticker__value paragraph--1 paragraph--strong">').f(t.get(["value"],!1),t,"h").w('<span class="nutrient-sticker__unit">').f(t.get(["unit"],!1),t,"h").w('</span></span><span class="nutrient-sticker__type paragraph--3">').f(t.get(["text"],!1),t,"h").w("</span></div></div>")}return e.register("products/views/shop-item/product/components/nutritional-info/template/top-nutrient-sticker.view.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/components/nutritional-info/template/top-nutrient-sticker.view.dust",t,i)}}),define("products/views/shop-item/product/components/nutritional-info/view/top-nutrient-sticker.view",["class-name-builder","settings/enums/nutrient.enum","settings/enums/nutrient.css.enum","dst!products/views/shop-item/product/components/nutritional-info/template/top-nutrient-sticker.view.dust"],function(){"use strict";var e=require("class-name-builder"),t=require("settings/enums/nutrient.enum"),i=require("settings/enums/nutrient.css.enum");return Backbone.View.extend({template:require("dst!products/views/shop-item/product/components/nutritional-info/template/top-nutrient-sticker.view.dust"),renderMethod:"append",className:function(){return e.create()["if"](this.model,this.getNutrientCSSClass()).always("nutrient-sticker nutrient-sticker--top-nutrient").toString()},attributes:function(){return{title:this.getAltText()}},getNutrientCSSClass:function(){return"nutrient-sticker--"+this.getValueFromEnum(i)},getValueFromEnum:function(e){var t="";return this.model?e[this.model.get("id")]||t:t},getNutrientNameInLowerCase:function(){return this.getValueFromEnum(t).toLowerCase()},getAltText:function(){if(this.model){var e=this.model.get("quantity")?"products.labels.nutrient-purchased":"products.labels.nutrient-alt";return this.request("i18n:get",e,{value:this.model.get("value"),unit:this.model.get("unit"),type:this.getNutrientNameInLowerCase(),quantity:this.model.get("quantity")})}return this.request("i18n:get","products.labels.nutrient-info-alt-not-available")},getTemplateData:function(){return{text:this.model.get("text"),value:this.model.get("value"),unit:this.model.get("unit"),flipcontainer:this.model.get("flipcontainer"),type:this.getValueFromEnum(t)}}})}),define("dst!products/views/shop-item/product/components/nutritional-info/template/sticker-flip-container.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div><div class="flip-container__flipper" data-region="flipcontainer"></div></div>')}return e.register("products/views/shop-item/product/components/nutritional-info/template/sticker-flip-container.view.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/components/nutritional-info/template/sticker-flip-container.view.dust",t,i)}}),define("products/views/shop-item/product/components/nutritional-info/view/sticker-flip-container.view",["dst!products/views/shop-item/product/components/nutritional-info/template/sticker-flip-container.view.dust"],function(){"use strict";return Backbone.View.extend({template:require("dst!products/views/shop-item/product/components/nutritional-info/template/sticker-flip-container.view.dust"),className:"flip-container",renderMethod:"append"})});var _slicedToArray=function(){function e(e,t){var i=[],n=!0,o=!1,s=void 0;try{for(var r,c=e[Symbol.iterator]();!(n=(r=c.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(u){o=!0,s=u}finally{try{!n&&c["return"]&&c["return"]()}finally{if(o)throw s}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();define("products/views/shop-item/product/view/product.shop-item.view",["require","products/views/shop-item/view/shop-item.view","products/utils/product.utils","products/views/shop-item/components/controls/components/alternative/view/alternative.button.view","products/views/shop-item/components/controls/components/alternative/view/compare.button.view","products/views/shop-item/components/controls/components/sample/view/sample.button.view","products/views/shop-item/components/controls/components/alternative/view/selected-alternative.button.view","products/views/shop-item/product/components/discount-block/view/discount-block.view","settings/components/display/price-block/view/price-block.view","products/views/shop-item/product/components/labels/assembler/labels.assembler","products/views/shop-item/product/components/icons/assembler/icons.assembler","settings/enums/request/application.request.enum","products/views/shop-item/components/controls/enum/shop-item-controls.type.enum","products/tracking/product.tracking","class-name-builder","products/views/shop-item/helpers/card-promotion.helper","products/views/shop-item/components/controls/view/alternative.shop-item-controls.view","products/views/shop-item/components/controls/components/alternative/view/replace-product.button.view","products/views/shop-item/product/components/nutritional-info/view/nutritional-sticker.view","products/views/shop-item/product/components/labels/view/nutrient.product.label.view","products/views/shop-item/product/components/nutritional-info/view/top-nutrient-sticker.view","products/views/shop-item/product/components/nutritional-info/view/sticker-flip-container.view","products/enums/shop-item-behavior.event.enum","settings/enums/events/product.event.enum","settings/enums/channel.enum","settings/enums/nutrient.enum","settings/utils/url-query","products/enums/shop-item.bubble-event.enum"],function(e){"use strict";var t=e("products/views/shop-item/view/shop-item.view"),i=e("products/utils/product.utils"),n=e("products/views/shop-item/components/controls/components/alternative/view/alternative.button.view"),o=e("products/views/shop-item/components/controls/components/alternative/view/compare.button.view"),s=e("products/views/shop-item/components/controls/components/sample/view/sample.button.view"),r=e("products/views/shop-item/components/controls/components/alternative/view/selected-alternative.button.view"),c=e("products/views/shop-item/product/components/discount-block/view/discount-block.view"),u=e("settings/components/display/price-block/view/price-block.view"),a=e("products/views/shop-item/product/components/labels/assembler/labels.assembler"),d=e("products/views/shop-item/product/components/icons/assembler/icons.assembler"),l=e("settings/enums/request/application.request.enum"),p=e("products/views/shop-item/components/controls/enum/shop-item-controls.type.enum"),m=e("products/tracking/product.tracking"),h=e("class-name-builder"),v=e("products/views/shop-item/helpers/card-promotion.helper"),w=e("products/views/shop-item/components/controls/view/alternative.shop-item-controls.view"),g=e("products/views/shop-item/components/controls/components/alternative/view/replace-product.button.view"),f=e("products/views/shop-item/product/components/nutritional-info/view/nutritional-sticker.view"),b=e("products/views/shop-item/product/components/labels/view/nutrient.product.label.view"),y=e("products/views/shop-item/product/components/nutritional-info/view/top-nutrient-sticker.view"),k=e("products/views/shop-item/product/components/nutritional-info/view/sticker-flip-container.view"),C=e("products/enums/shop-item-behavior.event.enum"),N=e("settings/enums/events/product.event.enum"),T=e("settings/enums/channel.enum"),I=e("settings/enums/nutrient.enum"),L=e("settings/utils/url-query"),E=e("products/enums/shop-item.bubble-event.enum");return t.extend({className:function(){return h.create().always(t.prototype.className.call(this))["if"](this.model.has("promotionTheme"),v.getCardPromotionTheme(this.model))["if"](this.model._isValidLink("alternatives"),"product--alternative")["if"](this.behavior.showCompareControls,"product--compare")["if"](this.behavior.showCompareControls&&this.behavior.getQuantity()>0,"-hide-compare-link")["if"](this.model._isValidLink("healthyAlternative"),"product--healthy-recommendation")["if"](i.isUnchangeableProduct(this.model),"product--unchangeable")["if"](i.isSampleProduct(this.model),"product--sample").toString()},attributes:function A(){var A={"data-product":"","data-sku":this.model.product.get("id")},e=this.channel(l.CHANNEL).request(l.IS_RUNNING_WITH_TESTHOOK);return this.model.product&&e&&(A["data-testhookid"]="product-card-"+this.model.product.get("id")),this.behavior.renderSeoAttributes&&(A.itemscope="",A.itemtype="http://schema.org/Product"),A["data-region"]="card",A},bubble:function(){var e={};return e[E.CLOSE_FOLDOUT]="closeFoldOut",e[E.TOGGLE_FOLDOUT]="toggleFoldout",e[E.TOGGLE_OVERLAY]="handleOverlay",e[E.FLIP_STICKER]="flipSticker",e},initialize:function(){t.prototype.initialize.apply(this,arguments),this.createProductTracking(),this.channel(T.PRODUCT).subscribe(N.TOGGLE_NUTRIENT,this.setNutritionalInfo,this),this.behavior.showCompareControls&&this.listenTo(this.behavior,C.QUANTITY_CHANGED,this.toggleCompareLinkBasedOnQuantity),this.listenTo(this,"render-complete",this.onRenderComplete)},events:{"click a":"triggerProductClicked"},onRenderComplete:function(){return this.removeSubviews(),this.model.has("navItem.link.href")?this.setLink():this.setWrapper(),this.setImage(this.model),this.setDescription(this.model.product),this.setDiscountBlock(),this.setProductPrice(),this.setProductLabels(),this.setControls(),this.setProductIcons(),this.checkNutrientCache(),this.setNutrientTotal(),this.model.product.has("nutrients")&&"undefined"==typeof this.model.nutrientLabel&&this.getNutrientFromLaneId(),this},triggerProductClicked:function(){this.behavior.trigger(C.PRODUCT_CLICKED)},setNutritionalInfo:function(e,t){if(e&&e!==I.NONE){if(this.behavior.shouldShowNutritionalInfo&&this.model.product.get("nutrients")){this.$el.addClass("product-cardview--no-theme");var i=this.model.product.get("nutrients").filter(function(t){return t.id===e}),n=_slicedToArray(i,1),o=n[0];this.removeNutritionalInfoViews(),this.setRegion(t),this.append(new f({model:o,region:t,productType:this.model.get("viewType")}),{name:"nutritionalSticker"}),o&&this.append(new b({model:this.model.product,region:"[data-region=header]",active:o}),{name:"nutritionalLabel"}),this.cacheNutrient(e)}}else this.removeNutritionalInfo()},getNutrientFromLaneId:function(){var e=_.get(this.model,"_links.compare.href"),t=e?L.getParameterByName("nutrientId",e):"";this.removeNutritionalInfo(),this.setNutritionalInfo(t,this.regions.CONTENT)},removeNutritionalInfo:function(){this.removeNutritionalInfoViews(),this.request("sessionStorage:remove","nutrientSticker"),this.$el.removeClass("product-cardview--no-theme")},removeNutritionalInfoViews:function(){this.subview("nutritionalSticker")&&this.subview("nutritionalSticker").remove(),this.subview("nutritionalLabel")&&this.subview("nutritionalLabel").remove()},setRegion:function(e){return(""===e||"undefined"==typeof e)&&(e=this.regions.CONTENT),e},cacheNutrient:function(e){this.request("sessionStorage:set","nutrientSticker",e)},checkNutrientCache:function(){var e=this.request("sessionStorage:get","nutrientSticker");e&&e!==I.NONE&&this.setNutritionalInfo(e)},setNutrientTotal:function(){if(this.model.nutrientLabel){this.$el.addClass("product-cardview--no-theme product-cardview--flip-sticker"),this.append(new k({region:this.regions.CONTENT}));var e=this.model.product.get("nutrients");if(e&&e.length){var t=_.get(this.model,"_links.compare.href"),i=t?L.getParameterByName("nutrientId",t):this.request("sessionStorage:get","nutrientSticker");this.removeNutritionalInfo(),this.setNutritionalInfo(i,"[data-region=flipcontainer]")}this.appendTopNutrientStickerView("[data-region=flipcontainer]")}},appendTopNutrientStickerView:function(e){this.setRegion(e);var t=new Backbone.Model({id:this.model.nutrientLabel.get("id"),text:this.model.nutrientLabel.get("text"),value:this.model.nutrientLabel.get("value"),unit:this.model.nutrientLabel.get("unit"),quantity:this.model.member?this.model.member.get("numberOfTimesPurchased"):""});this.append(new y({model:t,region:e,productType:this.model.get("viewType")}),{name:"TopNutritientSticker"})},flipSticker:function(){if(this.$el){var e=this.$el.find(".flip-container__flipper");if(e.hasClass("-flipped"))e.removeClass("-flipped");else{var t=this.$el.closest(".lane");t.find(".-flipped").removeClass("-flipped"),e.addClass("-flipped")}}},setDiscountBlock:function(){this.append(new c({model:this.model.product,region:this.regions.CONTENT,productType:this.model.get("viewType")}))},setControls:function(){t.prototype.setControls.call(this),this.behavior.showAlternativeOfferControls&&this.setChooseAlternativeButton(),this.model._isValidLink("samplesuggestions")&&this.setSampleSuggestionButton(),this.behavior.recipeMixer&&this.model._isValidLink("recipes")&&this.setRecipeMixerButton(),(this.model._isValidLink("alternatives")||this.model._isValidLink("products"))&&this.setAlternativeButton(),this.behavior.showCompareControls&&this.setCompareButton(),this.model._isValidLink("replaceWithAlternative")&&this.setReplaceWithAlternativeButton()},getCardRegionButtonOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.regions.CARD;return{behavior:this.behavior,model:this.model,region:e}},getAlternativeControlsRegion:function(){return this.controlsViewType()===p.LIST?this.regions.CONTENT:this.regions.CARD},setSampleSuggestionButton:function(){var e=this.getCardRegionButtonOptions();this.append(new s(e))},setAlternativeButton:function(e){var t=this.getCardRegionButtonOptions(e);this.append(this.createAlternativeButton(t)),this.behavior.selectedAlternativeButton&&this.append(this.createSelectedAlternativeButton(t))},setCompareButton:function(e){var t=this.getCardRegionButtonOptions(e);this.append(this.createCompareButton(t))},setChooseAlternativeButton:function(){var e=this.getAlternativeControlsRegion(),t=this.getCardRegionButtonOptions(e);this.append(new w(t))},setReplaceWithAlternativeButton:function(){var e=this.getCardRegionButtonOptions(this.regions.CONTENT);_.assign(e,{additionalClassName:"alternative-product--left"}),this.append(new g(e))},setRecipeMixerButton:function(){if(this.model.hasEmbedded("mode")){var e=i.isReadOnly(this.model)?"view":"change",t=this.getCardRegionButtonOptions();_.assign(t,{title:"products.recipeMixer."+e+".title"}),this.append(this.createAlternativeButton(t))}},createAlternativeButton:function(e){return this.behavior.combineControlsAndAlternatives&&_.assign(e,{additionalClassName:"alternative-product--left",region:this.regions.CONTENT}),this.model._isValidLink("products")&&_.assign(e,{title:"products.products.title"}),new n(e)},createCompareButton:function(e){return this.behavior.combineControlsAndAlternatives&&_.assign(e,{additionalClassName:"alternative-product--left",region:this.regions.CONTENT}),new o(e)},createSelectedAlternativeButton:function(e){return new r(_.assign(e,{title:"products.selectedAlternative.title"}))},setProductLabels:function(){var e=this,t=a.createLabels(this.model,this.behavior);t&&t.forEach(function(t){e.append(t)})},setProductIcons:function(){var e=this,t=d.createIcons(this.model,this.behavior);t.forEach(function(t){e.append(t.view,_.omit(t,"view"))})},setProductPrice:function(e){var t=this.model.product.get("priceLabel");t&&!_.isEmpty(t)&&this.append(new u({model:this.model.product,region:e||this.regions.CONTENT,className:"product-price",pricePath:"priceLabel",name:"price"}))},createProductTracking:function(){this.productTracking=new m({$el:this.$el,model:this.model,laneChannelName:this.laneChannelName,behavior:this.behavior})},toggleCompareLinkBasedOnQuantity:function(e){this.$el.toggleClass("-hide-compare-link",e>0),e>0&&this.closeFoldOut()},remove:function(){this.productTracking&&this.productTracking.destroy(),this.channel(T.PRODUCT).unsubscribe(N.TOGGLE_NUTRIENT,this.setNutritionalInfo,this),this.behavior.destroy(),Backbone.View.prototype.remove.apply(this,arguments)}})}),define("products/views/shop-item/product/view/bonus-group.product.shop-item.view",["require","products/views/shop-item/product/view/product.shop-item.view","class-name-builder"],function(e){"use strict";var t=e("products/views/shop-item/product/view/product.shop-item.view"),i=e("class-name-builder");return t.extend({className:function(){return i.create().always(t.prototype.className.call(this)+" product-cardview--bonus-group").toString()}})}),define("products/views/shop-item/helpers/card-view-display-toggle.helper",["require","settings/utils/foundation-utils","settings/utils/window-breakpoint"],function(e){"use strict";var t=e("settings/utils/foundation-utils"),i=e("settings/utils/window-breakpoint");return{toggleCardOrListView:function(e){var n=i.activeBreakpoint(),o=i.previousBreakpoint();n===t.breakPoints.SMALL&&o!==t.breakPoints.SMALL?this.reRenderView(e):n!==t.breakPoints.SMALL&&o===t.breakPoints.SMALL&&this.reRenderView(e)},reRenderView:function(e){e.render(),e.setClassName()}}}),define("products/enums/product-class-name.enum",[],function(){"use strict";return{CARD:"product-cardview small-6 medium-6 large-3 xlarge-2_4 xxlarge-2",LIST:"product-listview",HERO:"product--hero",LIST_WIDE:"product-listview product-listview--wide"}}),define("products/views/shop-item/helpers/card-view-type.helper",["require","products/enums/product-view-type.enum"],function(e){"use strict";var t=e("products/enums/product-view-type.enum");return{getCardViewType:function(){return t.CARD},isCardViewType:function(){return this.getCardViewType()===t.CARD}}}),define("products/views/shop-item/helpers/card-class-name.helper",["require","products/enums/product-class-name.enum","products/views/shop-item/helpers/card-view-type.helper"],function(e){"use strict";var t=e("products/enums/product-class-name.enum"),i=e("products/views/shop-item/helpers/card-view-type.helper");return{getCardClassName:function(){return i.isCardViewType()?t.CARD:t.LIST}}}),define("products/views/shop-item/helpers/card-controls-view-type.helper",["require","products/views/shop-item/helpers/card-view-type.helper","products/views/shop-item/components/controls/enum/shop-item-controls.type.enum"],function(e){"use strict";var t=e("products/views/shop-item/helpers/card-view-type.helper"),i=e("products/views/shop-item/components/controls/enum/shop-item-controls.type.enum");return{getCardControlsViewType:function(){return t.isCardViewType()?i.CARD:i.LIST}}}),define("products/views/shop-item/product/view/card.product.shop-item.view",["require","products/views/shop-item/product/view/product.shop-item.view","class-name-builder","products/views/shop-item/helpers/card-view-display-toggle.helper","products/views/shop-item/helpers/card-class-name.helper","products/views/shop-item/helpers/card-controls-view-type.helper","settings/enums/events/window.event.enum"],function(e){"use strict";var t=e("products/views/shop-item/product/view/product.shop-item.view"),i=e("class-name-builder"),n=e("products/views/shop-item/helpers/card-view-display-toggle.helper"),o=e("products/views/shop-item/helpers/card-class-name.helper"),s=e("products/views/shop-item/helpers/card-controls-view-type.helper"),r=e("settings/enums/events/window.event.enum");return t.extend({className:function(){return i.create().always(t.prototype.className.call(this)).always(o.getCardClassName()).toString()},controlsViewType:s.getCardControlsViewType,initialize:function(){t.prototype.initialize.apply(this,arguments),this.channel(r.CHANNEL).subscribe(r.BREAKPOINT_CHANGE,this.toggleCardOrListView,this)},toggleCardOrListView:function(){n.toggleCardOrListView(this)},remove:function(){this.channel(r.CHANNEL).unsubscribe(r.BREAKPOINT_CHANGE,this.toggleCardOrListView,this),t.prototype.remove.apply(this,arguments)}})}),define("products/views/shop-item/product/view/bonus-group.card.product.shop-item.view",["require","products/views/shop-item/product/view/card.product.shop-item.view","class-name-builder"],function(e){"use strict";var t=e("products/views/shop-item/product/view/card.product.shop-item.view"),i=e("class-name-builder");return t.extend({className:function(){return i.create().always(t.prototype.className.call(this)+" product-cardview--bonus-group").toString()}})}),define("products/views/shop-item/components/description/view/shop-item-summary.view",["require","settings/components/display/paragraph/view/paragraph.view"],function(e){"use strict";var t=e("settings/components/display/paragraph/view/paragraph.view");return t.extend({optionNames:["behavior"],allowBBCode:!0,className:"product__summary",initialize:function(){t.prototype.initialize.apply(this,arguments),this.text=this.model.get("details.summary")}})}),define("products/views/shop-item/components/feature-icons/view/feature-icons.icon-list.view",["require","settings/components/display/icon-list/view/icon-list.view"],function(e){"use strict";var t=e("settings/components/display/icon-list/view/icon-list.view");return t.extend({className:"product__feature-icons"})}),define("dst!products/views/shop-item/product/components/dayprice-info/template/dayprice-info.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<span><span class="-show-for-large-up"> (<a href="#" class="link link-color--primair link--dayprice">').f(t.get(["dayprice"],!1),t,"h").w('</a>)</span><em class="paragraph--3 -show-for-small-up -hide-for-large-up day">').f(t.get(["dayprice-info"],!1),t,"h").w("</em></span>")}return e.register("products/views/shop-item/product/components/dayprice-info/template/dayprice-info.view.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/components/dayprice-info/template/dayprice-info.view.dust",t,i)}}),define("products/views/shop-item/product/components/dayprice-info/view/dayprice-info.view",["dst!products/views/shop-item/product/components/dayprice-info/template/dayprice-info.view.dust"],function(){"use strict";return Backbone.View.extend({template:require("dst!products/views/shop-item/product/components/dayprice-info/template/dayprice-info.view.dust"),className:"tooltip tooltip--dayprice",events:{mouseover:"showTooltip",mouseout:"removeTooltip"},renderMethod:"append",getTemplateData:function(){return{dayprice:this.request("i18n:get","products.dayprice"),"dayprice-info":this.request("i18n:get","products.dayprice-info")}},showTooltip:function(){this.tooltip=$('<div class="tiptool tiptool-top"></div>'),this.tooltip.html(this.request("i18n:get","products.dayprice-info")),this.$el.append(this.tooltip)},removeTooltip:function(){this.tooltip.remove()}})}),define("products/views/shop-item/product/components/discount-remark/view/discount-remark-label.view",["require","settings/enums/request/application.request.enum"],function(e){"use strict";var t=e("settings/enums/request/application.request.enum");return Backbone.View.extend({optionNames:["testHookId","label"],attributes:function(){var e={};return this.channel(t.CHANNEL).request(t.IS_RUNNING_WITH_TESTHOOK)&&this.testHookId&&(e["data-testhookid"]=this.testHookId),e},render:function(){this.$el.html(this.label)}})}),define("products/views/shop-item/product/components/discount-remark/view/discount-remark.view",["require","settings/components/link/enums/link.type.enum","settings/components/link/assembler/link.assembler","products/views/shop-item/product/components/discount-remark/view/discount-remark-label.view"],function(e){"use strict";var t=e("settings/components/link/enums/link.type.enum"),i=e("settings/components/link/assembler/link.assembler"),n=e("products/views/shop-item/product/components/discount-remark/view/discount-remark-label.view");return Backbone.View.extend({className:"discount-remark",render:function(){return this.renderLinks(),this},renderLinks:function(){var e=this;this.model.get("discountRemarks").forEach(function(t,i){e.addLabel(t.label,i),t.navItem&&e.addLink(t,i)})},addLabel:function(e,t){this.append(new n({testHookId:"discount-remark-"+t,label:e}))},addLink:function(e,n){var o=e.navItem;this.append(i.createLinkFromNavItem(t.LINK_CLICK_VIEW,o,{className:"discount-remark__link link link--chevron",testHookId:"discount-remark-link-"+n}))}})}),define("products/views/shop-item/components/controls/components/favorite/view/favorite-wide.button.view",["require","products/views/shop-item/components/controls/components/favorite/view/favorite.button.view"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/components/favorite/view/favorite.button.view");return t.extend({className:"product-controls__item product-controls__item--favorite ah-online-icon icon--product-favorite -topright -has-outline -has-label",events:{click:"onClick"},initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){this.append(this.createButtonTextSpan())},onClick:function(){this.$el.addClass("-is-favorite"),this.openFavoritesWindow()},createButtonTextSpan:function(){var e=new Backbone.View({tagName:"span",className:"favorite-button__label"});return e.$el.text(this.request("i18n:get","products.buttons.favorite-wide.title")),e}})}),define("dst!products/views/shop-item/product/components/seo-attributes/template/product.seo-attributes.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div class="product__seo-elements" data-product-seo-elements><meta itemprop="description" content="').f(t.get(["seoDescription"],!1),t,"h").w('"><meta itemprop="brand" content="').f(t.get(["brand"],!1),t,"h").w('"><meta itemprop="category" content="').f(t.get(["category"],!1),t,"h").w('"><meta itemprop="productID" content="').f(t.get(["productID"],!1),t,"h").w('">').x(t.get(["discount"],!1),t,{block:i},{}).w("</div>")}function i(e,t){return e.w('<div itemprop="offers" itemscope="" itemtype="http://schema.org/Offer"><meta itemprop="priceCurrency" content="EUR"><meta itemprop="seller" content="AH.nl"><meta itemprop="price" content="').f(t.get(["discountPrice"],!1),t,"h").w('"></div>')}return e.register("products/views/shop-item/product/components/seo-attributes/template/product.seo-attributes.view.dust",t),t.__dustBody=!0,i.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/components/seo-attributes/template/product.seo-attributes.view.dust",t,i)}}),define("products/views/shop-item/product/components/seo-attributes/view/product.seo-attributes.view",["dst!products/views/shop-item/product/components/seo-attributes/template/product.seo-attributes.view.dust"],function(){"use strict";return Backbone.View.extend({template:require("dst!products/views/shop-item/product/components/seo-attributes/template/product.seo-attributes.view.dust"),className:"product__seo-elements",getTemplateData:function(){var e=!1,t=void 0;return this.model.get("discount")&&(e=!0,t=this.model.get("priceLabel.now")),{seoDescription:this.model.get("description"),brand:this.model.get("brandName"),category:this.model.get("categoryName"),productID:this.model.get("id"),discount:e,discountPrice:t}}})}),define("products/views/shop-item/product/view/hero.product.shop-item.view",["require","products/views/shop-item/product/view/product.shop-item.view","class-name-builder","products/enums/product-class-name.enum","products/utils/product.utils","products/views/shop-item/product/components/labels/view/price-per-usage.product.label.view","products/views/shop-item/components/description/view/shop-item-description.view","products/views/shop-item/components/description/view/shop-item-summary.view","products/views/shop-item/components/feature-icons/view/feature-icons.icon-list.view","settings/components/display/price-block/view/price-block.view","products/views/shop-item/product/components/dayprice-info/view/dayprice-info.view","products/views/shop-item/product/components/discount-remark/view/discount-remark.view","settings/components/display/multicol/view/multicol.view","products/views/shop-item/components/controls/components/favorite/view/favorite-wide.button.view","products/views/shop-item/product/components/seo-attributes/view/product.seo-attributes.view","products/views/shop-item/components/image/view/shop-item-image-container.view","products/views/shop-item/components/controls/factory/controls.factory","products/enums/product-view-type.enum","products/views/shop-item/components/wrapper/view/product.wrapper.view","products/views/shop-item/product/components/icons/assembler/icons.assembler","products/views/shop-item/components/controls/enum/shop-item-controls.type.enum","products/enums/shop-item-behavior.event.enum"],function(e){"use strict";var t=e("products/views/shop-item/product/view/product.shop-item.view"),i=e("class-name-builder"),n=e("products/enums/product-class-name.enum"),o=e("products/utils/product.utils"),s=e("products/views/shop-item/product/components/labels/view/price-per-usage.product.label.view"),r=e("products/views/shop-item/components/description/view/shop-item-description.view"),c=e("products/views/shop-item/components/description/view/shop-item-summary.view"),u=e("products/views/shop-item/components/feature-icons/view/feature-icons.icon-list.view"),a=e("settings/components/display/price-block/view/price-block.view"),d=e("products/views/shop-item/product/components/dayprice-info/view/dayprice-info.view"),l=e("products/views/shop-item/product/components/discount-remark/view/discount-remark.view"),p=e("settings/components/display/multicol/view/multicol.view"),m=e("products/views/shop-item/components/controls/components/favorite/view/favorite-wide.button.view"),h=e("products/views/shop-item/product/components/seo-attributes/view/product.seo-attributes.view"),v=e("products/views/shop-item/components/image/view/shop-item-image-container.view"),w=e("products/views/shop-item/components/controls/factory/controls.factory"),g=e("products/enums/product-view-type.enum"),f=e("products/views/shop-item/components/wrapper/view/product.wrapper.view"),b=e("products/views/shop-item/product/components/icons/assembler/icons.assembler"),y=e("products/views/shop-item/components/controls/enum/shop-item-controls.type.enum"),k=e("products/enums/shop-item-behavior.event.enum");return t.extend({className:function(){return i.create().always(t.prototype.className.call(this)).always(n.HERO).toString()},regions:{HEADER:"[data-region=header]",CONTENT:"[data-region=content]",IMAGE_CONTAINER:"[data-region=image-container]",PRICE_INFO:"[data=price-info]"},controlsViewType:y.HERO,onRenderComplete:function(){return this.removeSubviews(),this.setFavouriteButton(),this.setImage(this.model),this.setProductContentWrapper(),this.setDescription(),this.setPricePerUsage(),this.setDayPriceInfo(),this.setDiscountBlock(),this.setProductPriceForMobile(),this.setProductLabels(),this.setDiscountRemarks(),this.setProductIcons(),this.setPriceAndProductControls(),this.setSummary(),this.setFeatureIcons(),this.setSeoAttributes(),this.checkForLargeImage(),this.triggerProductPageHeroLoaded(),this},setImage:function(e){this.append(new v({model:e,laneChannelName:this.laneChannelName,region:this.regions.CONTENT,height:700,width:700,type:this.model.get("type")}))},setDescription:function(){this.append(new r({model:this.model.product,behavior:this.behavior,largeTitle:!0,region:this.regions.CONTENT}))},setPricePerUsage:function(){this.append(new s({model:new Backbone.Model(this.model.product.get("details")),
region:this.regions.HEADER}))},setSummary:function(){this.append(new c({model:this.model.product,behavior:this.behavior,region:this.regions.CONTENT}))},setDiscountRemarks:function(){var e=new Backbone.DeepModel(this.model.product.get("details"));e.has("discountRemarks")&&this.append(new l({model:e,region:this.regions.HEADER}))},setFeatureIcons:function(){this.append(new u({model:new Backbone.Model(this.model.product.get("details")),behavior:this.behavior,region:this.regions.CONTENT}))},setProductIcons:function(){var e=this,t=b.createIcons(this.model,this.behavior);t.forEach(function(t){e.append(t.view,_.omit(t,"view"))})},setPriceAndProductControls:function(){this.append(new p(this.getMultiColConfig()),{region:this.regions.CONTENT})},setDayPriceInfo:function(){"nl-BE"===window.locale.toString()&&this.append(new d({region:this.regions.HEADER}))},getMultiColConfig:function(){var e=[];return this.model.product.has("priceLabel")&&e.push({view:this.setPriceBlock()}),e.push({view:this.setProductControls(),className:"-no-padding"}),{components:e}},setPriceBlock:function(){return new a({model:this.model.product,region:this.regions.CONTENT,className:"product-price",pricePath:"priceLabel",name:"price"})},setProductPriceForMobile:function(){t.prototype.setProductPrice.call(this,this.regions.IMAGE_CONTAINER)},setProductContentWrapper:function(){this.append(new f({className:"product-hero__content",model:this.model}))},setProductControls:function(){var e=w.getView(g.HERO);return new e({model:this.model,behavior:this.behavior,region:this.regions.CONTENT,type:this.controlsViewType})},setFavouriteButton:function(){this.append(new m({behavior:this.behavior,model:this.model,productId:o.getProductId(this.model)}),{name:"FavoriteWide"})},setSeoAttributes:function(){this.append(new h({model:this.model.product}))},checkForLargeImage:function(){var e=this;this.model.product.has("images")&&this.model.product.get("images").forEach(function(t){t.width>250&&e.setImageZoom()})},openImageModal:function(){var e={escClose:!0,overlayClose:!0,minWidth:"600",maxWidth:"600",opacity:85,onShow:function(){$(".simplemodal-wrap").addClass("product--hero__image-detail")},onClose:function(){$.modal.close()}},t=$(".product-image").attr("src");$.modal('<img src="'+t+'" class="product--hero__image-detail-zoom">',e)},setImageZoom:function(){$("[data-region=image-container]").addClass("-has-zoom-image").on("click",this.openImageModal)},triggerProductPageHeroLoaded:function(){this.isProductPage()&&this.behavior.trigger(k.PRODUCT_PAGE_HERO_LOADED)},isProductPage:function(){return/^\/producten\/product\//.test(location.pathname)}})}),define("dst!products/views/nasa-number/template/nasa-number.view.dust",["dust"],function(e){return function(){function t(e,t){return e.x(t.get(["value"],!1),t,{block:i},{})}function i(e,t){return e.w('<section class="nasa-number"><span>').f(t.get(["value"],!1),t,"h").w("</span></section>")}return e.register("products/views/nasa-number/template/nasa-number.view.dust",t),t.__dustBody=!0,i.__dustBody=!0,t}(),function(t,i){return e.render("products/views/nasa-number/template/nasa-number.view.dust",t,i)}}),define("products/views/nasa-number/view/nasa-number.view",["require","dst!products/views/nasa-number/template/nasa-number.view.dust"],function(e){"use strict";return Backbone.View.extend({template:e("dst!products/views/nasa-number/template/nasa-number.view.dust"),renderMethod:"append"})}),define("products/views/shop-item/product/view/list.product.shop-item.view",["require","products/views/shop-item/product/view/product.shop-item.view","products/enums/product-class-name.enum","class-name-builder","products/views/shop-item/components/controls/enum/shop-item-controls.type.enum"],function(e){"use strict";var t=e("products/views/shop-item/product/view/product.shop-item.view"),i=e("products/enums/product-class-name.enum"),n=e("class-name-builder"),o=e("products/views/shop-item/components/controls/enum/shop-item-controls.type.enum");return t.extend({controlsViewType:o.LIST,className:function(){return n.create().always(t.prototype.className.call(this)).always(i.LIST).toString()}})}),define("products/views/shop-item/product/view/list-wide.product.shop-item.view",["require","products/views/shop-item/product/view/product.shop-item.view","products/enums/product-class-name.enum","class-name-builder","products/views/shop-item/components/controls/enum/shop-item-controls.type.enum"],function(e){"use strict";var t=e("products/views/shop-item/product/view/product.shop-item.view"),i=e("products/enums/product-class-name.enum"),n=e("class-name-builder"),o=e("products/views/shop-item/components/controls/enum/shop-item-controls.type.enum");return t.extend({controlsViewType:o.LIST_WIDE,className:function(){return n.create().always(t.prototype.className.call(this)).always(i.LIST_WIDE).toString()}})}),define("products/views/shop-item/combi/view/combi.product.shop-item.view",["require","products/views/shop-item/product/view/product.shop-item.view","class-name-builder","products/views/shop-item/helpers/card-controls-view-type.helper","products/enums/shop-item-behavior.event.enum","products/enums/shop-item.bubble-event.enum","products/views/shop-item/product/components/labels/assembler/labels.assembler","products/enums/products.type.enum","products/views/shop-item/components/controls/enum/control-action.enum"],function(e){"use strict";var t=e("products/views/shop-item/product/view/product.shop-item.view"),i=e("class-name-builder"),n=e("products/views/shop-item/helpers/card-controls-view-type.helper"),o=e("products/enums/shop-item-behavior.event.enum"),s=e("products/enums/shop-item.bubble-event.enum"),r=e("products/views/shop-item/product/components/labels/assembler/labels.assembler"),c=e("products/enums/products.type.enum"),u=e("products/views/shop-item/components/controls/enum/control-action.enum");return t.extend({optionNames:["controlsViewType","laneChannelName","analytics"],className:function(){return i.create().always(t.prototype.className.call(this)).always("-active-variant")["if"](this.model.get("type")===c.COMBI,"product-combi")["if"](this.model.get("type")===c.PRODUCT,"product-combi--variant")["if"](this.model.get("isWbtcBox"),"product-combi--box").toString()},controlAction:u.PLUS,controlsViewType:n.getCardControlsViewType,initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this.behavior,o.DELETED_FROM_SHOPPINGLIST,this.showCombiDefaultState)},showCombiDefaultState:function(){this.triggerBubble(s.SHOW_DEFAULT_COMBI_STATE)},setProductTransition:function(){var e=this;_.delay(function(){e.$el.addClass("-active-variant -fade-in")},75)},incrementQuantityAfterVariantChange:function(){this.behavior.setControlAction(this.controlAction),this.behavior.incrementQuantity(!0)},isCombiVariantProduct:function(){return this.$el.hasClass("product-combi--variant")},labelsWithoutSoldOutLabel:function(e){return e.$el.attr("data-availability")?void 0:e},setProductLabels:function(){var e=this,i=r.createLabels(this.model,this.behavior),n=this.model.get("type")===c.COMBI,o=_.has(this.model,"referees");n&&o?i.filter(this.labelsWithoutSoldOutLabel).forEach(function(t){e.append(t)}):t.prototype.setProductLabels.call(this)}})}),define("products/views/shop-item/combi/view/combi.wrapper.view",["require","class-name-builder","products/views/shop-item/combi/view/combi.product.shop-item.view","products/views/shop-item/helpers/card-class-name.helper","products/enums/shop-item.bubble-event.enum","settings/enums/events/page.capture.event.enum"],function(e){"use strict";var t=e("class-name-builder"),i=e("products/views/shop-item/combi/view/combi.product.shop-item.view"),n=e("products/views/shop-item/helpers/card-class-name.helper"),o=e("products/enums/shop-item.bubble-event.enum"),s=e("settings/enums/events/page.capture.event.enum");return Backbone.View.extend({optionNames:["laneChannelName"],className:function(){return t.create().always("product column").always(n.getCardClassName()).toString()},bubble:function r(){var r={};return r[o.PRODUCT_VARIANT_CHANGE]="changeProductVariant",r[o.SHOW_DEFAULT_COMBI_STATE]="changeToDefaultCombiState",r},capture:function(){var e={};return e[s.ANALYTICS]="storeAnalytics",e},render:function(){return this.append(this.createProductCombiView(this.model)),_.has(this.model,"referees")&&this.renderProductVariantWhenOnShoppingList(),this},renderProductVariantWhenOnShoppingList:function(){var e=void 0,t=_.first(this.model.referees.filter(function(e){return e.listItem}));t&&(t.get("referredSecondary")&&t.set("isWbtcBox",this.model.get("references").some(function(e){return"AVA"===e.type})),e=this.createProductCombiView(t),e.$el.addClass("-no-transition"),this.append(e))},createProductCombiView:function(e){return new i({laneChannelName:this.laneChannelName,analytics:this.analytics,model:e})},changeToDefaultCombiState:function(){this.changeProductVariant(this.model)},changeProductVariant:function(e){this.findProductVariantByModel(e).then(this.toggleVariant.bind(this))["catch"](this.appendProductVariant.bind(this))},toggleVariant:function(e){_.each(this.subviews,function(e){e.$el.removeClass("-active-variant -fade-in -no-transition")}),e.setProductTransition(),e.isCombiVariantProduct()&&e.incrementQuantityAfterVariantChange()},findProductVariantByModel:function(e){var t=this;return new Promise(function(i,n){_.each(t.subviews,function(t){t.model===e&&i(t)}),n(e)})},appendProductVariant:function(e){var t=this.createProductCombiView(e);this.append(t),t.setProductTransition(),t.incrementQuantityAfterVariantChange()},storeAnalytics:function(e){this.analytics=e}})}),define("products/views/shop-item/combi/view/list.combi.wrapper.view",["require","products/views/shop-item/combi/view/combi.wrapper.view","products/enums/product-class-name.enum","class-name-builder","products/views/shop-item/combi/view/combi.product.shop-item.view","products/views/shop-item/components/controls/enum/shop-item-controls.type.enum"],function(e){"use strict";var t=e("products/views/shop-item/combi/view/combi.wrapper.view"),i=e("products/enums/product-class-name.enum"),n=e("class-name-builder"),o=e("products/views/shop-item/combi/view/combi.product.shop-item.view"),s=e("products/views/shop-item/components/controls/enum/shop-item-controls.type.enum");return t.extend({optionNames:["laneChannelName","additionalClassName"],className:function(){return n.create().always("product column")["if"](this.additionalClassName,this.additionalClassName).always(i.LIST).toString()},createProductCombiView:function(e){return new o({laneChannelName:this.laneChannelName,model:e,controlsViewType:s.LIST})}})}),define("dst!products/views/shop-item/product/components/product-disclaimer/template/product-disclaimer.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<h2 class="heading--10 strong">').f(t.get(["title"],!1),t,"h").w('</h2><p class="paragraph--1">').f(t.get(["body"],!1),t,"h").w("</p>")}return e.register("products/views/shop-item/product/components/product-disclaimer/template/product-disclaimer.view.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/components/product-disclaimer/template/product-disclaimer.view.dust",t,i)}}),define("products/views/shop-item/product/components/product-disclaimer/view/product-disclaimer.view",["require","settings/enums/request/application.request.enum","dst!products/views/shop-item/product/components/product-disclaimer/template/product-disclaimer.view.dust"],function(e){"use strict";var t=e("settings/enums/request/application.request.enum");return Backbone.View.extend({renderMethod:"append",className:"product-disclaimer",template:e("dst!products/views/shop-item/product/components/product-disclaimer/template/product-disclaimer.view.dust"),attributes:function i(){var i={},e=this.channel(t.CHANNEL).request(t.IS_RUNNING_WITH_TESTHOOK);return e&&(i["data-testhookid"]="product-disclaimer"),i}})}),define("dst!products/views/shop-item/product/components/seo-attributes/template/breadcrumb.seo-attributes.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<ol itemscope itemtype="http://schema.org/BreadcrumbList">').s(t.get(["seoBreadcrumb"],!1),t,{block:i},{}).w("</ol>")}function i(e,t){return e.w('<li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemprop="item" href="').f(t.get(["url"],!1),t,"h").w('"><span itemprop="name">').f(t.get(["title"],!1),t,"h").w('</span></a><meta itemprop="position" content="').f(t.get(["$idx"],!1),t,"h").w('"/></li>')}return e.register("products/views/shop-item/product/components/seo-attributes/template/breadcrumb.seo-attributes.view.dust",t),t.__dustBody=!0,i.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/components/seo-attributes/template/breadcrumb.seo-attributes.view.dust",t,i)}}),define("products/views/shop-item/product/components/seo-attributes/view/breadcrumb.seo-attributes.view",["dst!products/views/shop-item/product/components/seo-attributes/template/breadcrumb.seo-attributes.view.dust"],function(){"use strict";return Backbone.View.extend({template:require("dst!products/views/shop-item/product/components/seo-attributes/template/breadcrumb.seo-attributes.view.dust"),className:"product__seo-elements",renderMethod:"append"})}),define("products/views/shop-item/components/specify-product-link/view/specify-product.link.view",["require","settings/components/link/view/link.router.view","settings/components/link/assembler/link.assembler"],function(e){"use strict";var t=e("settings/components/link/view/link.router.view"),i=e("settings/components/link/assembler/link.assembler");return t.extend({className:"specify-product-link link--1 link-color--primair link--chevron",createLinkModel:function(){var e=i.createLinkModelFromNavItem(this.model.get("navItem"));return e.set("id",this.model.get("description")),e},getLinkModel:function(){return this.linkModel||(this.linkModel=this.createLinkModel()),this.linkModel}})}),define("products/tracking/unspecified.tracking",["require","settings/model/analytics/event.analytics.model","settings/enums/command/analytics.command.enum","settings/enums/events/shoppinglist.event.enum","products/enums/shop-item-behavior.event.enum"],function(e){"use strict";var t=e("settings/model/analytics/event.analytics.model"),i=e("settings/enums/command/analytics.command.enum"),n=e("settings/enums/events/shoppinglist.event.enum"),o=e("products/enums/shop-item-behavior.event.enum"),s=void 0;return s=Backbone.Class.extend({optionNames:["$el","model","behavior"],initialize:function(){var e,t=(e={},_defineProperty(e,o.QUANTITY_SAVED,this.onQuantitySaved),_defineProperty(e,o.DELETED_FROM_SHOPPINGLIST,this.onQuantitySaved),e);this.listenTo(this.behavior,t),this.channel(n.CHANNEL).subscribe(n.LIST_EMPTIED,this.handleListEmptied,this)},onQuantitySaved:function(e,t){var i=e-t;i>0?this.addQuantity(Math.abs(i)):this.removeQuantity(Math.abs(i))},addQuantity:function(e){var i=new t(this.getAnalyticsModelData());i.set({eventAction:"toegevoegd",eventValue:e}),this.trackEvent(i)},removeQuantity:function(e){var i=new t(this.getAnalyticsModelData());i.set({eventAction:"verwijderd",eventValue:e}),this.trackEvent(i)},trackEvent:function(e){this.channel(i.CHANNEL).command(i.EVENT,e)},handleListEmptied:function(){this.model.listitem&&this.removeQuantity(this.model.listItem.get("quantity"))},getAnalyticsModelData:function(){return{eventCategory:"Vage term",eventLabel:this.model.get("description")}},destroy:function(){this.stopListening(),delete this.$el,delete this.model,this.channel(n.CHANNEL).unsubscribe(n.LIST_EMPTIED,this.handleListEmptied,this)}}),_.extend(s.prototype,Backbone.Events,Backbone.decorators.Command,Backbone.decorators.PubSub),s}),define("dst!products/views/shop-item/unspecified/template/unspecified.shop-item.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<article><div class="product__content" data-region="content"></div></article>')}return e.register("products/views/shop-item/unspecified/template/unspecified.shop-item.view.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/unspecified/template/unspecified.shop-item.view.dust",t,i)}}),define("products/views/shop-item/unspecified/view/unspecified.shop-item.view",["require","products/views/shop-item/view/shop-item.view","products/views/shop-item/components/controls/components/alternative/view/selected-alternative.button.view","products/views/shop-item/components/controls/components/alternative/view/alternative.button.view","class-name-builder","products/views/shop-item/components/specify-product-link/view/specify-product.link.view","products/tracking/unspecified.tracking","dst!products/views/shop-item/unspecified/template/unspecified.shop-item.view.dust"],function(e){"use strict";var t=e("products/views/shop-item/view/shop-item.view"),i=e("products/views/shop-item/components/controls/components/alternative/view/selected-alternative.button.view"),n=e("products/views/shop-item/components/controls/components/alternative/view/alternative.button.view"),o=e("class-name-builder"),s=e("products/views/shop-item/components/specify-product-link/view/specify-product.link.view"),r=e("products/tracking/unspecified.tracking");return t.extend({template:e("dst!products/views/shop-item/unspecified/template/unspecified.shop-item.view.dust"),className:function(){return o.create().always(t.prototype.className.call(this))["if"](this.model._isValidLink("productsuggestions"),"unspecified-product").toString()},initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){return this.removeSubviews(),this.setImage(),this.setDescription(this.model),this.appendSpecifyProductLink(),this.setControls(),this.createUnspecifiedTracking(),this},setControls:function(){t.prototype.setControls.call(this),this.model._isValidLink("productsuggestions")&&(this.append(new n({behavior:this.behavior,title:"products.unspecified.title",model:this.model,region:this.regions.CARD})),this.append(new i({behavior:this.behavior,title:"products.selectedAlternative.title",model:this.model,region:this.regions.CARD})))},appendSpecifyProductLink:function(){this.behavior.specifyProduct&&this.model.get("navItem.link.href")&&this.append(new s({model:this.model}),{region:this.regions.CONTENT})},createUnspecifiedTracking:function(){this.unspecifiedTracking=new r({$el:this.$el,model:this.model,behavior:this.behavior})},remove:function(){this.unspecifiedTracking&&this.unspecifiedTracking.destroy(),this.behavior.destroy(),Backbone.View.prototype.remove.apply(this,arguments)}})}),define("products/views/shop-item/unspecified/view/card.unspecified.shop-item.view",["require","products/views/shop-item/unspecified/view/unspecified.shop-item.view","class-name-builder","products/views/shop-item/helpers/card-view-display-toggle.helper","products/views/shop-item/helpers/card-class-name.helper","products/views/shop-item/helpers/card-controls-view-type.helper","settings/enums/events/window.event.enum"],function(e){"use strict";var t=e("products/views/shop-item/unspecified/view/unspecified.shop-item.view"),i=e("class-name-builder"),n=e("products/views/shop-item/helpers/card-view-display-toggle.helper"),o=e("products/views/shop-item/helpers/card-class-name.helper"),s=e("products/views/shop-item/helpers/card-controls-view-type.helper"),r=e("settings/enums/events/window.event.enum");return t.extend({className:function(){return i.create().always(t.prototype.className.call(this)).always(o.getCardClassName()).toString()},controlsViewType:s.getCardControlsViewType,initialize:function(){t.prototype.initialize.apply(this,arguments),this.channel(r.CHANNEL).subscribe(r.BREAKPOINT_CHANGE,this.toggleCardOrListView,this)},toggleCardOrListView:function(){n.toggleCardOrListView(this)},remove:function(){this.channel(r.CHANNEL).unsubscribe(r.BREAKPOINT_CHANGE,this.toggleCardOrListView,this),t.prototype.remove.apply(this,arguments)}})}),define("products/views/shop-item/unspecified/view/list.unspecified.shop-item.view",["require","products/views/shop-item/unspecified/view/unspecified.shop-item.view","products/enums/product-class-name.enum","class-name-builder","products/views/shop-item/components/controls/enum/shop-item-controls.type.enum"],function(e){"use strict";var t=e("products/views/shop-item/unspecified/view/unspecified.shop-item.view"),i=e("products/enums/product-class-name.enum"),n=e("class-name-builder"),o=e("products/views/shop-item/components/controls/enum/shop-item-controls.type.enum");return t.extend({controlsViewType:o.LIST,className:function(){return n.create().always(t.prototype.className.call(this)).always(i.LIST).toString()}})}),define("products/views/shop-item/unspecified/view/list-wide.unspecified.shop-item.view",["require","products/views/shop-item/unspecified/view/unspecified.shop-item.view","products/enums/product-class-name.enum","class-name-builder","products/views/shop-item/components/controls/enum/shop-item-controls.type.enum"],function(e){"use strict";var t=e("products/views/shop-item/unspecified/view/unspecified.shop-item.view"),i=e("products/enums/product-class-name.enum"),n=e("class-name-builder"),o=e("products/views/shop-item/components/controls/enum/shop-item-controls.type.enum");return t.extend({controlsViewType:o.LIST_WIDE,className:function(){return n.create().always(t.prototype.className.call(this)).always(i.LIST_WIDE).toString()}})}),define("products/views/shop-item/components/controls/view/recipe.chevron.shop-item-controls.view",["require","products/views/shop-item/components/controls/view/chevron.shop-item-controls.view"],function(e){"use strict";var t=e("products/views/shop-item/components/controls/view/chevron.shop-item-controls.view");return t.extend({render:function(){return this.addFavoriteButton(),this.appendChevronLink(),this},addFavoriteButton:function(){},getTestHookId:function(){return"recipecard-"+this.model.get("id")}})}),define("products/views/recipe/view/recipe.view",["require","settings/components/recipe-description/view/recipe-description.view","settings/components/recipe-image/view/recipe-image.view","settings/enums/command/window.command.enum","products/views/shop-item/components/link/view/factory/shop-item-link.factory","products/views/shop-item/components/controls/view/recipe.chevron.shop-item-controls.view","products/enums/product-class-name.enum","class-name-builder"],function(e){"use strict";var t=e("settings/components/recipe-description/view/recipe-description.view"),i=e("settings/components/recipe-image/view/recipe-image.view"),n=e("settings/enums/command/window.command.enum"),o=e("products/views/shop-item/components/link/view/factory/shop-item-link.factory"),s=e("products/views/shop-item/components/controls/view/recipe.chevron.shop-item-controls.view"),r=e("products/enums/product-class-name.enum"),c=e("class-name-builder");return Backbone.View.extend({optionNames:["laneChannelName"],tagName:"article",persistentClassName:"recipe-item",className:function(){return c.create().always("column product").always(r.CARD).toString()},regions:{CONTENT:"[data-region=content]"},initialize:function(){this.model&&this.channel(n.CHANNEL).command(n.ADD_TESTHOOK,this.$el,"recipe-card-"+this.model.get("id"))},render:function(){return this.removeSubviews(),this.setRecipeImage(),this.setRecipeLink(),this.setRecipeDescription(),this.setRecipeControls(),this},setRecipeLink:function(){var e=o.getView(this.model.get("type"));this.append(new e({model:this.model}))},setRecipeImage:function(){this.append(new i({model:this.model,channelName:this.laneChannelName}))},setRecipeDescription:function(){this.append(new t({model:this.model,region:this.regions.CONTENT}))},setRecipeControls:function(){this.append(new s({model:this.model}))}})}),define("products/views/filter/components/tabs/view/filter.tabs.view",["require","settings/components/ui/tabs/view/tabs.small.view"],function(e){"use strict";var t=e("settings/components/ui/tabs/view/tabs.small.view");return t.extend({tagName:"div",className:t.prototype.className+" filter__tabs"})}),define("products/views/filter/content/item/view/filter.item.link.count.view",[],function(){"use strict";return Backbone.View.extend({tagName:"span",className:"filter-item__count paragraph--2 color-chocolade--min3",renderMethod:"append",render:function(){return this.$el.html(this.model.get("amount")),this}})}),define("products/views/filter/content/item/view/filter.item.link.label.view",[],function(){"use strict";return Backbone.View.extend({tagName:"span",className:"filter-item__label",render:function(){this.$el.html(this.model.get("title"))}})}),define("products/views/filter/content/item/view/filter.item.link.view",["require","settings/components/link/factory/link.view.factory","settings/components/link/enums/link.type.enum","products/views/filter/content/item/view/filter.item.link.count.view","products/views/filter/content/item/view/filter.item.link.label.view"],function(e){"use strict";var t=e("settings/components/link/factory/link.view.factory"),i=e("settings/components/link/enums/link.type.enum"),n=t.getView(i.LINK_ROUTER_VIEW),o=e("products/views/filter/content/item/view/filter.item.link.count.view"),s=e("products/views/filter/content/item/view/filter.item.link.label.view");return n.extend({className:n.prototype.className+" filter-item__link paragraph--2 color-black--1",initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){this.$el.empty(),this.appendLabel(),this.appendCount()},appendLabel:function(){this.append(new s({model:this.model}))},appendCount:function(){this.model.get("amount")&&this.append(new o({model:this.model}))}})}),define("products/views/filter/content/item/view/filter.item.view",["require","products/views/filter/content/item/view/filter.item.link.view","settings/components/link/model/link.model"],function(e){"use strict";var t=e("products/views/filter/content/item/view/filter.item.link.view"),i=e("settings/components/link/model/link.model");return Backbone.View.extend({tagName:"li",className:"filter-item",render:function(){return this.appendLink(),this},appendLink:function(){var e=new i;e.setFromNavItem(this.model.get("navItem")),e.set("amount",this.model.get("amount")),e.set("id",this.model.get("label")),this.append(new t({model:e}))}})}),define("products/views/filter/content/column/view/filter.column.view",[],function(){"use strict";return Backbone.View.extend({tagName:"ul",className:"column xlarge-6 medium-12 filter__list",render:function(){return this.fragment=document.createDocumentFragment(),this},appendFilter:function(e){this.append(e,{region:$(this.fragment)})},appendFragment:function(){this.$el.append(this.fragment)}})}),define("dst!products/views/filter/content/column/template/filter.column-container.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div><div class="row collapse" data-column-region></div></div>')}return e.register("products/views/filter/content/column/template/filter.column-container.view.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/filter/content/column/template/filter.column-container.view.dust",t,i)}}),define("products/views/filter/content/column/view/filter.column-container.view",["require","products/views/filter/content/column/view/filter.column.view","dst!products/views/filter/content/column/template/filter.column-container.view.dust"],function(e){"use strict";var t=e("products/views/filter/content/column/view/filter.column.view");return Backbone.View.extend({optionNames:["numColumns"],template:e("dst!products/views/filter/content/column/template/filter.column-container.view.dust"),columns:null,initialize:function(){this.createColumns(),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){this.appendColumns()},createColumns:function(){var e=void 0,i=void 0;for(this.columns=[],i=0;i<this.numColumns;i+=1)e=new t,this.columns.push(e)},appendColumns:function(){_.each(this.columns,function(e){this.append(e,{region:"[data-column-region]"})}.bind(this))}})}),define("products/views/filter/components/toggle-filters/view/filter.toggle-filters.link.view",["require","settings/components/link/factory/link.view.factory","settings/components/link/enums/link.type.enum","settings/components/link/model/link.model"],function(e){"use strict";var t=e("settings/components/link/factory/link.view.factory"),i=e("settings/components/link/enums/link.type.enum"),n=t.getView(i.LINK_CLICK_VIEW),o=e("settings/components/link/model/link.model");return Backbone.View.extend({optionNames:["showAll"],className:"column filter-item",render:function(){return this.setLoadMoreLink(),this},setLoadMoreLink:function(){var e=this.showAll?"products.filters.load-less":"products.filters.load-more",t=this.showAll?"link--chevron-up":"link--chevron-down",i=void 0,s=void 0;i=new o({title:this.request("i18n:get",e)}),s=new n({model:i,className:"filter-item__link paragraph--2 link--1 ah-online-icon link-color--primair "+t,onClick:this.toggleFilters.bind(this)}),this.append(s)},toggleFilters:function(e){e.preventDefault(),this.channel("filter").publish("toggle-filters",!this.showAll)}})}),define("products/views/filter/utils/collection-filter.util",[],function(){"use strict";return{filterModelsWithHighestAmount:function(e,t){var i=void 0,n=void 0;return t.length>e?(i=t.clone(),i.comparator=function(e){return-e.get("amount")},i.sort(),i=new Backbone.Collection(i.slice(0,e)),n=t.filter(function(e){return i.contains(e)}),new Backbone.Collection(n)):t},filterModelsWithoutSorting:function(e,t){var i=void 0;return t.length>e?(i=t.clone(),new Backbone.Collection(i.slice(0,e))):t}}}),define("products/views/filter/components/close-content/view/filter.close-content.view",["require","settings/components/link/assembler/link.assembler","settings/components/link/enums/link.type.enum"],function(e){"use strict";var t=e("settings/components/link/assembler/link.assembler"),i=e("settings/components/link/enums/link.type.enum");return Backbone.View.extend({tagName:"div",className:"column filter-item filter-item--close",initialize:function(){this.listenTo(this,"render-complete",this.appendLink)},appendLink:function(){var e={title:this.request("i18n:get","products.filters.close")},n=t.createLinkFromNavItem(i.LINK_CLICK_VIEW,e,{className:"filter-item__link paragraph--2 color-ah",onClick:this.publishCloseFilters.bind(this)});this.append(n)},publishCloseFilters:function(){this.channel("filter").publish("close")}})}),define("products/views/filter/content/view/filter.content.view",["require","products/views/filter/content/item/view/filter.item.view","settings/utils/foundation-utils","products/views/filter/content/column/view/filter.column-container.view","products/views/filter/components/toggle-filters/view/filter.toggle-filters.link.view","products/views/filter/utils/collection-filter.util","products/views/filter/components/close-content/view/filter.close-content.view"],function(e){"use strict";var t=e("products/views/filter/content/item/view/filter.item.view"),i=e("settings/utils/foundation-utils"),n=e("products/views/filter/content/column/view/filter.column-container.view"),o=e("products/views/filter/components/toggle-filters/view/filter.toggle-filters.link.view"),s=e("products/views/filter/utils/collection-filter.util"),r=e("products/views/filter/components/close-content/view/filter.close-content.view");return Backbone.View.extend({optionNames:["showAll"],className:"filter__content row collapse",numContainers:3,numColumnsPerContainer:2,maxFilters:18,columns:null,subscriptions:{filter:{"toggle-filters":"reloadContent"}},initialize:function(){i.isActiveBreakpointLargerThen(i.breakPoints.LARGE)?this.maxFilters=18:"large"===i.activeBreakpoint()?(this.maxFilters=9,this.numColumnsPerContainer=1):this.maxFilters=30;
},render:function(){return this.removeSubviews(),this.appendColumnContainers(),this.appendFilters(),this.appendColumnFragments(),this},appendColumnContainers:function(){var e=void 0,t=void 0;for(this.columns=[],e=0;e<this.numContainers;e+=1)t=new n({className:"column large-"+12/this.numContainers+" small-12",numColumns:this.numColumnsPerContainer}),this.append(t),this.columns=this.columns.concat(t.columns)},appendFilterToColumn:function(e,i){var n=new t({model:i});this.appendToColumn(e,n)},appendToColumn:function(e,t){this.columns[e].appendFilter(t)},appendColumnFragments:function(){_.invoke(this.columns,"appendFragment")},appendFilters:function(){var e=this.numContainers*this.numColumnsPerContainer,t=void 0,i=void 0,n=void 0;n=this.showAll?this.collection:this.applyCollectionFilter(),t=n.length,i=Math.ceil(t/e),this.divideFiltersAcrossColumns(n,i),this.appendSeeMoreLink(),this.appendCloseFilterContent()},applyCollectionFilter:function(){return this.model.get("sorted")?s.filterModelsWithoutSorting(this.maxFilters,this.collection):s.filterModelsWithHighestAmount(this.maxFilters,this.collection)},divideFiltersAcrossColumns:function(e,t){var i=0,n=0;e.each(function(e){this.appendFilterToColumn(i,e),n+=1,n>=t&&(n=0,i+=1)}.bind(this))},appendSeeMoreLink:function(){this.collection.length>this.maxFilters&&this.append(new o({showAll:this.showAll}))},reloadContent:function(e){this.showAll=e,this.render()},appendCloseFilterContent:function(){i.isActiveBreakpointBetween(i.breakPoints.SMALL,i.breakPoints.LARGE)&&this.append(new r)}})}),define("products/views/filter/content/view/filter.content-container.view",["require","products/views/filter/content/view/filter.content.view","settings/enums/command/window.command.enum","class-name-builder"],function(e){"use strict";var t=e("products/views/filter/content/view/filter.content.view"),i=e("settings/enums/command/window.command.enum"),n=e("class-name-builder");return Backbone.View.extend({optionNames:["active","expanded"],className:function(){return n.create().always("filter__content-container")["if"](!this.expanded,"collapsed-filters").toString()},subscriptions:{filter:{"activate-tab":"renderNewContent",close:"closeFilterContainer"}},render:function(){return this.active&&this.renderNewContent(this.active),Backbone.View.prototype.render.call(this)},renderNewContent:function(e){var i=void 0;this.$el.removeClass("collapsed-filters"),e.filterItems&&e.filterItems.length&&(i=new t({model:e,collection:e.filterItems}),this.hideCurrentContent().then(this.showNewContent.bind(this,i)))},appendNewContent:function(e){this.append(e,{name:"content",replace:!0})},hideCurrentContent:function(){var t=this;return new Promise(function(i){var n=t.subview("content");n?e(["greensock"],function(){TweenLite.to(n.el,.1,{opacity:0,y:-20,ease:Quad.easeIn,onComplete:i})}):i()})},showNewContent:function(t){var i=this,n=this.subview("content");return new Promise(function(o){n?e(["greensock"],function(){TweenLite.from(t.el,.1,{opacity:0,y:20,ease:Quad.easeOut,onComplete:function(){i.appendNewContent(t),o()}})}):(i.appendNewContent(t),o())})},closeFilterContainer:function(){var e=this;this.channel(i.CHANNEL).command(i.SCROLL_TO_TOP),this.hideCurrentContent().then(function(){return e.removeSubview("content")})}})}),define("products/views/components/breadcrumb/view/breadcrumb.view",["require","settings/components/list/assembler/list.assembler","settings/components/list/enums/list.link.type.enum","settings/components/link/enums/link.type.enum"],function(e){"use strict";var t=e("settings/components/list/assembler/list.assembler"),i=e("settings/components/list/enums/list.link.type.enum"),n=e("settings/components/link/enums/link.type.enum");return Backbone.View.extend({className:"breadcrumb",render:function(){this.append(t.createListFromNavItems({collection:this.model.breadcrumbs,type:i.LIST_BREADCRUMB_VIEW,linkType:n.LINK_ROUTER_VIEW,classNameListItem:"breadcrumb__item",linkClassName:" link--2 paragraph--2 breadcrumb__link link ah-online-icon link--chevron color-chocolade--plus2"}))}})}),define("products/views/filter/view/filter.view",["require","products/views/filter/components/tabs/view/filter.tabs.view","products/views/filter/content/view/filter.content-container.view","products/views/components/breadcrumb/view/breadcrumb.view","settings/utils/window-breakpoint","settings/components/ui/menu/enums/menu-event.enum"],function(e){"use strict";var t=e("products/views/filter/components/tabs/view/filter.tabs.view"),i=e("products/views/filter/content/view/filter.content-container.view"),n=e("products/views/components/breadcrumb/view/breadcrumb.view"),o=e("settings/utils/window-breakpoint"),s=e("settings/components/ui/menu/enums/menu-event.enum");return Backbone.View.extend({inAnimation:!1,className:"filter",initialize:function(){this.activeBreakpoint=o.activeBreakpoint(),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){this.appendTabs(),this.appendFilterContentContainer(),this.appendBreadcrumb()},appendTabs:function(){if(this.hasLabels()){var e=new t({id:this.model.get("id"),collection:this.model.filters,expanded:this.model.get("expanded")});this.listenTo(e,s.CHANGE,this.publishUpdateFilterContent),this.append(e,{name:"tabs"})}},appendBreadcrumb:function(){this.hasBreadcrumb()&&this.prepend(new n({model:this.model}),{name:"breadcrumb",replace:!0})},appendFilterContentContainer:function(){this.hasFilterItems()?(this.append(new i({active:this.getActiveFilter(),expanded:this.model.get("expanded")})),this.hasLabels()||this.channel("filter").publish("activate-tab",this.model.filters.first())):this.$el.addClass("breadcrumbs-only")},publishUpdateFilterContent:function(e){this.channel("filter").publish("activate-tab",e)},getActiveFilter:function(){return this.subview("tabs")?this.subview("tabs").getSelected():this.hasFilterItems()?this.model.filters.first():void 0},hasLabels:function(){return this.model.filters.length>1||1===this.model.filters.length&&this.model.filters.first().get("label")},hasFilterItems:function(){var e=this.model.filters.filter(function(e){return"undefined"!=typeof e.filterItems});return e.length},hasBreadcrumb:function(){return this.model.breadcrumbs&&this.model.breadcrumbs.length>0}})}),define("products/views/product-collection/view/product-collection.view",["require","settings/enums/factory-type.enum","class-name-builder"],function(e){"use strict";var t=e("settings/enums/factory-type.enum"),i=e("class-name-builder"),n=void 0;return n=Backbone.View.extend({optionNames:["laneChannelName"],tagName:function(){return this.model.get("ordered")?"ol":"ul"},persistentClassName:"product-collection",className:function(){return i.create()["if"](this.model.get("ordered"),"product-collection--ordered").toString()},initialize:function(){this.model&&this.model.items&&(this.collection=this.model.items),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){return this.collection&&this.collection.each(this.renderItem.bind(this)),this},renderItem:function(e){var i=this;this.request(t.PRODUCT_FACTORY).then(function(t){var n=t.getView(e.get("type"),{model:e});n&&i.appendProductView(n,e)})},appendProductView:function(e,t){this.append(new e({tagName:"li",additionalClassName:"product-collection__item",model:t,laneChannelName:this.laneChannelName}))}})}),define("dst!products/views/product-selection/template/product-selection.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<section class="product-selection">').x(t.get(["title"],!1),t,{block:i},{}).w('<div class="component__wrapper" data-region="products"></div></section>')}function i(e,t){return e.w('<div class="component__title"><h1 class="edc-heading heading--9">').f(t.get(["title"],!1),t,"h").w("</h1></div>")}return e.register("products/views/product-selection/template/product-selection.view.dust",t),t.__dustBody=!0,i.__dustBody=!0,t}(),function(t,i){return e.render("products/views/product-selection/template/product-selection.view.dust",t,i)}}),define("products/views/product-selection/view/product-selection.view",["require","products/views/product-collection/view/product-collection.view","dst!products/views/product-selection/template/product-selection.view.dust"],function(e){"use strict";var t=e("products/views/product-collection/view/product-collection.view");return t.extend({tagName:"section",optionNames:["laneChannelName"],template:e("dst!products/views/product-selection/template/product-selection.view.dust"),persistentClassName:"product-selection",appendProductView:function(e,t){this.append(new e({tagName:"article",additionalClassName:"product-selection__item",model:t,laneChannelName:this.laneChannelName}),{region:'[data-region="products"]'})}})}),define("products/views/components/spotlight/view/spotlight.item.view",["require","settings/components/link/factory/link.view.factory","settings/components/link/enums/link.type.enum","products/views/filter/content/item/view/filter.item.link.count.view"],function(e){"use strict";var t=e("settings/components/link/factory/link.view.factory"),i=e("settings/components/link/enums/link.type.enum"),n=t.getView(i.LINK_ROUTER_VIEW),o=e("products/views/filter/content/item/view/filter.item.link.count.view");return n.extend({className:n.prototype.className+" spotlight__link paragraph--2 color-black--1",initialize:function(){n.prototype.initialize.apply(this,arguments),this.model.get("amount")&&this.listenTo(this,"render-complete",this.appendCount)},appendCount:function(){this.append(new o({model:this.model}))}})}),define("products/views/components/spotlight/view/spotlight.property-icon.view",[],function(){"use strict";return Backbone.View.extend({tagName:"i",attributes:function(){return{title:this.model.get("propertyIcon.tooltip")}},className:function(){return"spotlight__icon spotlight__icon--"+this.model.get("propertyIcon.identifier")}})}),define("products/views/components/spotlight/view/spotlight.view",["require","products/views/components/spotlight/view/spotlight.item.view","settings/components/link/model/link.model","products/views/components/spotlight/view/spotlight.property-icon.view","class-name-builder"],function(e){"use strict";var t=e("products/views/components/spotlight/view/spotlight.item.view"),i=e("settings/components/link/model/link.model"),n=e("products/views/components/spotlight/view/spotlight.property-icon.view"),o=e("class-name-builder");return Backbone.View.extend({className:function(){return o.create().always("spotlight__item spotlight__item--"+this.slugify()).toString()},initialize:function(){this.listenTo(this,"render-complete",this.appendSpotlightItem)},slugify:function(){var e=this.model.get("navItem.title"),t=/\s{1,}/gi,i=String(e).replace(t,"-").toLowerCase().trim();return i},createItemLink:function(e){var n=new i;n.setFromNavItem(e.get("navItem")),n.set("amount",e.get("amount")),n.set("id","spotlight-"+e.get("propertyIcon.identifier")),this.spotLightItem=new t({model:n}),this.append(this.spotLightItem),this.prependIcon(e)},appendSpotlightItem:function(){this.createItemLink(this.model)},prependIcon:function(e){e.get("propertyIcon")?this.prepend(new n({model:e,region:this.spotLightItem.$el})):this.spotLightItem.$el.addClass("spotlight__item--no-icon")}})}),define("products/views/components/quick-search/view/quick-search.view",["settings/utils/breakpoints","settings/enums/channel.enum","settings/enums/search-type.enum","settings/enums/events/quick-search.event.enum","settings/enums/events/meta.event.enum","settings/enums/events/product-search.event.enum","settings/enums/request/notification.request.enum","settings/enums/events/notification.event.enum","settings/enums/request/page.request.enum","settings/components/list/assembler/list.assembler","settings/components/list/enums/list.link.type.enum","settings/components/link/enums/link.type.enum"],function(){"use strict";var e=require("settings/utils/breakpoints"),t=require("settings/enums/channel.enum"),i=require("settings/enums/search-type.enum"),n=require("settings/enums/events/quick-search.event.enum"),o=require("settings/enums/events/meta.event.enum"),s=require("settings/enums/events/product-search.event.enum"),r=require("settings/enums/request/notification.request.enum"),c=require("settings/enums/events/notification.event.enum"),u=require("settings/enums/request/page.request.enum"),a=require("settings/components/list/assembler/list.assembler"),d=require("settings/components/list/enums/list.link.type.enum"),l=require("settings/components/link/enums/link.type.enum");return Backbone.View.extend({optionNames:["laneChannelName"],className:"quick-search",renderMethod:"append",animationLabel:"animateQuickSearchControls",initialize:function(){this.channel(t.QUICK_SEARCH).subscribe(n.SHOW_CATEGORY_NAVIGATION,this.showQuickSearch,this),this.channel(t.QUICK_SEARCH).subscribe(n.HIDE_CATEGORY_NAVIGATION,this.hideQuickSearch,this),this.channel(c.CHANNEL).subscribe(c.NOTIFICATIONS_UPDATED,this.handleNotificationChange,this),this.channel(t.QUICK_SEARCH).subscribe(n.SEARCH_FIELD_FOCUS,this.selectProductSearchField,this)},render:function(){return this.appendSuggestions(),this},showQuickSearch:function(){this.quickSearchAnalyics(),this.animateQuickSearchControls(),this.channel(t.PRODUCT_SEARCH).command(s.CHANGE_SEARCH_TYPE,i.QUICK)},hideQuickSearch:function(){this.channel(t.PRODUCT_SEARCH).command(s.CHANGE_SEARCH_TYPE,i.PRODUCT),this.hideQuickSearchControls()},quickSearchAnalyics:function(){var e=this.channel(u.CHANNEL).request(u.META,"analytics");e.parameters.name="quicksearch.index",this.channel(o.CHANNEL).publish(o.ANALYTICS,e)},createAnimationTimeline:function(){this.timeline=new TimelineLite({onReverseComplete:this.cleanUpAfterAnimation.bind(this),pause:!0}),this.timeline.add(this.animationLabel,0)},animateQuickSearchControls:function(){var e=this;require(["greensock"],function(){e.createAnimationTimeline(),e.addProductNavigationAnimation(),e.addProductSearchAnimation(),e.timeline.play(e.animationLabel)})},addProductSearchAnimation:function(){var e=$(".product-search");e.addClass("-fixed"),this.correctTopOffet(e),this.timeline.add(TweenLite.fromTo(e,.2,{y:-e.outerHeight()},{ease:Linear.easeNone,y:0,delay:.1}),this.animationLabel)},addProductNavigationAnimation:function(){var e=$(".product-category-navigation-lane__button");e.parent().addClass("-fixed"),this.correctTopOffet(e.parent()),this.timeline.add(TweenLite.fromTo(e,.2,{y:0},{ease:Linear.easeNone,y:e.outerHeight(),delay:.1}),this.animationLabel)},handleNotificationChange:function(){var e=$(".product-category-navigation-lane"),t=$(".product-search");e.hasClass("-fixed")&&this.correctTopOffet(e),t.hasClass("-fixed")&&this.correctTopOffet(t)},cleanUpAfterAnimation:function(){var e=$(".product-search"),t=$(".product-category-navigation-lane"),i=$(".product-category-navigation-lane__button");[e,i].forEach(function(e){TweenLite.set(e,{clearProps:"transform"})}),e.removeClass("-fixed"),t.removeClass("-fixed"),this.resetTopOffet(e),this.resetTopOffet(t)},correctTopOffet:function(t){if(e.isTabletOrLarger()){var i=this.channel(r.CHANNEL).request(r.GET_HEIGHT);t.css("margin-top",i+"px")}},resetTopOffet:function(t){e.isTabletOrLarger()&&t.css("margin-top","")},hideQuickSearchControls:function(){"undefined"!=typeof this.timeline&&this.timeline.reverse()},selectProductSearchField:function(){var t=$(".product-search__input");e.isDesktopOrLarger()&&!Modernizr.touchevents&&(t.val(""),t.select())},appendSuggestions:function(){var e=this.model.crossSellToggleNavItemList;e&&this.append(a.createListFromNavItems({type:d.LIST_LINK_VIEW,linkType:l.LINK_ROUTER_VIEW,collection:e.items,classNameList:"quick-search__suggestions nav-list nav-list--inline nav-list--toggle nav-list--white",classNameListItem:"nav-list__item",linkClassName:"link--2 link-color--light paragraph--1 nav-list__link"}))},remove:function(){this.channel(t.QUICK_SEARCH).unsubscribe(n.SHOW_CATEGORY_NAVIGATION,this.animateQuickSearchControls,this),this.channel(t.QUICK_SEARCH).unsubscribe(n.HIDE_CATEGORY_NAVIGATION,this.hideQuickSearchControls,this),this.channel(t.QUICK_SEARCH).unsubscribe(n.SEARCH_FIELD_FOCUS,this.selectProductSearchField,this),Backbone.View.prototype.remove.apply(this,arguments)}})}),define("products/views/components/back-link/view/back-link.view",["settings/components/link/enums/link.type.enum","settings/components/link/assembler/link.assembler"],function(){"use strict";var e=require("settings/components/link/enums/link.type.enum"),t=require("settings/components/link/assembler/link.assembler");return Backbone.View.extend({render:function(){this.append(this.createLink())},createLink:function(){return t.createLink(e.LINK_ROUTER_VIEW,this.createLinkModel(),{className:"link link--chevron-back product-detail-navigation__link product-detail-navigation__back-link",storeScrollPosition:!0})},createLinkModel:function(){var e=t.createLinkModelFromNavItem(this.model.get("navItem"));return e.set({testHookId:"back-button"}),e}})}),define("dst!products/views/components/brand-page-link/template/brand-page-link.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div><span class="brand-page-link__spacer" data-brand-page-link-region></span></div>')}return e.register("products/views/components/brand-page-link/template/brand-page-link.view.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/components/brand-page-link/template/brand-page-link.view.dust",t,i)}}),define("products/views/components/brand-page-link/view/brand-page-link.view.js",["settings/components/link/enums/link.type.enum","settings/components/link/assembler/link.assembler","dst!products/views/components/brand-page-link/template/brand-page-link.view.dust"],function(){"use strict";var e=require("settings/components/link/enums/link.type.enum"),t=require("settings/components/link/assembler/link.assembler");return Backbone.View.extend({className:"brand-page-link",template:require("dst!products/views/components/brand-page-link/template/brand-page-link.view.dust"),initialize:function(){this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){this.append(this.createLink(),{region:"[data-brand-page-link-region]"})},createLink:function(){return t.createLink(e.LINK_ROUTER_VIEW,this.createLinkModel(),{className:"link link--chevron product-detail-navigation__link brand-page-link__link",storeScrollPosition:!1})},createLinkModel:function(){var e=t.createLinkModelFromNavItem(this.model.get("navItem"));return e.set({testHookId:"brand-page-link"}),e}})}),define("dst!products/views/shop-item/product/template/large.product.shop-item.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div><div class="product-large__controls-container small-6 medium-7 large-6" data-region="controls-container"></div></div>')}return e.register("products/views/shop-item/product/template/large.product.shop-item.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/template/large.product.shop-item.dust",t,i)}}),define("dst!products/views/shop-item/product/template/large.product.shop-item-content-regions.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div><div class="product-large__content-left columns small-6 medium-5 large-6" data-region="content-left"></div><div class="product-large__content-right columns small-6 medium-7 large-6" data-region="content-right"></div></div>')}return e.register("products/views/shop-item/product/template/large.product.shop-item-content-regions.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/product/template/large.product.shop-item-content-regions.dust",t,i)}}),define("products/views/shop-item/product/view/large.product.shop-item.view",["require","products/views/shop-item/product/view/product.shop-item.view","products/views/shop-item/view/shop-item.view","settings/components/discount-shield/factory/discount-shield.factory","settings/components/display/image/view/background.image.view","products/views/shop-item/components/controls/assembler/controls.assembler","class-name-builder","dst!products/views/shop-item/product/template/large.product.shop-item.dust","dst!products/views/shop-item/product/template/large.product.shop-item-content-regions.dust"],function(e){"use strict";var t=e("products/views/shop-item/product/view/product.shop-item.view"),i=e("products/views/shop-item/view/shop-item.view"),n=e("settings/components/discount-shield/factory/discount-shield.factory"),o=e("settings/components/display/image/view/background.image.view"),s=e("products/views/shop-item/components/controls/assembler/controls.assembler"),r=e("class-name-builder");return t.extend({template:e("dst!products/views/shop-item/product/template/large.product.shop-item.dust"),regions:_.extend(t.prototype.regions,{CONTENT_LEFT:"[data-region=content-left]",CONTENT_RIGHT:"[data-region=content-right]",CONTROLS_CONTAINER:"[data-region=controls-container]"}),className:function(){return r.create().always(i.prototype.className.call(this)).always("product-large")["if"](this.hasFoldout(),"-has-fold-out").toString()},onRenderComplete:function(){this.removeSubviews(),this.model.has("navItem.link.href")?this.setLink():this.setWrapper(),this.appendContentRegions(),this.setControls(),this.setImage(this.model,this.regions.CONTENT_LEFT),this.setDiscountShield(this.regions.CONTENT_LEFT),this.setDescription(this.model.product,this.regions.CONTENT_RIGHT),this.setProductLabels(),this.setProductPrice(this.regions.CONTENT_RIGHT)},appendContentRegions:function(){var t=Backbone.View.extend({template:e("dst!products/views/shop-item/product/template/large.product.shop-item-content-regions.dust")}),i=new t;this.$(this.regions.CONTENT).append(i.render().$el.html())},setControls:function(){var e=s.createControls(this.model,this.behavior,_.result(this,"controlsViewType"),this.regions.CONTROLS_CONTAINER);e&&this.append(e),this.hasFoldout()&&this.setAlternativeButton(this.regions.CONTROLS_CONTAINER)},setImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.regions.CONTENT,i=e.product.get("images");if(i){var n=_.sortBy(i,"height").reverse()[0];this.append(new o({imgSrc:n.link.href,className:"product-large__product-image js-product-image-animated",region:t}))}},setDiscountShield:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.regions.CONTENT,t=n.getView(this.model.product.get("discount.type.name"));this.append(new t({model:this.model.product,discountPath:"discount",region:e}))},setDescription:function(){t.prototype.setDescription.apply(this,arguments),this.$(".product-description__title").addClass("heading--6")},setProductLabels:function(){t.prototype.setProductLabels.call(this),this.$(".product-description__unit-size").addClass("heading--11")},hasFoldout:function(){return this.model._isValidLink("alternatives")||this.model._isValidLink("products")}})}),define("products/enums/shape.type.enum",[],function(){"use strict";return{CIRCLE:"circle"}}),define("products/views/components/decorated-background/shapes/view/shape.view.js",["require","class-name-builder"],function(e){"use strict";var t=e("class-name-builder");return Backbone.View.extend({optionNames:["block"],persistentClassName:function(){return t.create().always("shape")["if"](this.type,"shape--"+this.type).toString()}})}),define("products/views/components/decorated-background/shapes/view/circle.shape.view",["require","products/enums/shape.type.enum","products/views/components/decorated-background/shapes/view/shape.view.js"],function(e){"use strict";var t=e("products/enums/shape.type.enum"),i=e("products/views/components/decorated-background/shapes/view/shape.view.js");return i.extend({type:t.CIRCLE})}),define("products/factory/shapes.factory.js",["require","products/enums/shape.type.enum","settings/components/factory/model/factory.model","products/views/components/decorated-background/shapes/view/circle.shape.view"],function(e){"use strict";var t=e("products/enums/shape.type.enum"),i=e("settings/components/factory/model/factory.model"),n=e("products/views/components/decorated-background/shapes/view/circle.shape.view"),o=new i;return o.set(t.CIRCLE,n),o}),define("products/views/components/decorated-background/view/decorated-background.view",["require","products/factory/shapes.factory.js"],function(e){"use strict";var t=e("products/factory/shapes.factory.js");return Backbone.View.extend({optionNames:["color","shape","ShapeContainerView"],color:"bonus",className:function(){return"decorated-background decorated-background--color-"+this.color},initialize:function(){this.appendContainer(),this.appendShape()},appendContainer:function(){this.ShapeContainerView&&(this.shapeContainerView=new this.ShapeContainerView,this.append(this.shapeContainerView))},appendShape:function(){if(this.shape){var e=t.getView(this.shape),i=this.shapeContainerView||this;i.append(new e({className:"decorated-background__shape"}))}}})}),define("products/views/shop-item/product/view/spotlight.large.product.shop-item.view",["require","products/views/shop-item/product/view/large.product.shop-item.view","products/views/components/decorated-background/view/decorated-background.view","products/enums/shape.type.enum","class-name-builder"],function(e){"use strict";var t=e("products/views/shop-item/product/view/large.product.shop-item.view"),i=e("products/views/components/decorated-background/view/decorated-background.view"),n=e("products/enums/shape.type.enum"),o=e("class-name-builder");return t.extend({className:function(){return o.create().always(t.prototype.className.call(this)).always("product-large--spotlight small-12 large-6 xlarge-4_8 xxlarge-4").toString()},onRenderComplete:function(){t.prototype.onRenderComplete.call(this),this.setDecoratedBackground()},setDecoratedBackground:function(){this.prepend(new i({shape:n.CIRCLE,ShapeContainerView:Backbone.View.extend({className:"decorated-background__shape-container small-6 medium-5 large-6"})}))}})}),define("dst!products/views/components/predict-my-list/template/predict-my-list.modal.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div data-modal class="modal--1 modal-iframe pos-rel"><div data-loader class="color-white__bg--1 -full-size"><div class="page-loader__container" data-loader-container></div></div><iframe data-iframe id="predict-my-list" class="modal-iframe__container" height="100%" width="100%"/></div>')}return e.register("products/views/components/predict-my-list/template/predict-my-list.modal.view.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/components/predict-my-list/template/predict-my-list.modal.view.dust",t,i)}}),define("products/views/components/predict-my-list/view/predict-my-list.modal.view",["require","settings/components/modal/view/modal.iframe.view","dst!products/views/components/predict-my-list/template/predict-my-list.modal.view.dust"],function(e){"use strict";var t=e("settings/components/modal/view/modal.iframe.view");return t.extend({template:e("dst!products/views/components/predict-my-list/template/predict-my-list.modal.view.dust")})}),define("dst!products/views/components/predict-my-list/template/predict-my-list-block.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div class="predict-my-list"><div class="predict-my-list-title" ').h("testHook",t,{block:i},{}).w('><h3 class="predict-my-list__title edc-heading heading--10">').f(t.get(["blockTitle"],!1),t,"h").w(' <span class="predict-my-list-title__quantity">').f(t.get(["quantity"],!1),t,"h").w("</span></h3><h2 ").h("testHook",t,{block:n},{}).w(' class="predict-my-list__unsubscribe" data-unsubscribe>Afmelden voor deze service?</h2></div><article class="predict-my-list__content" ').h("testHook",t,{block:o},{}).w('><figure class="predict-my-list__figure"><div class="image-container image-container--stacked"><img alt="').f(t.get(["imageTitle"],!1),t,"h").w('" src="').f(t.get(["imageUrl"],!1),t,"h").w('" class="image-container__image"><span class="image-container__image"></span><span class="image-container__image"></span></div></figure><div class="predict-my-list__body product-description"><h1 class="product-description__title -multiline heading--7">').f(t.get(["title"],!1),t,"h",["s"]).w('</h1><span class="product-description__subtitle -multiline">').f(t.get(["subTitle"],!1),t,"h",["s"]).w('</span></div><div class="predict-my-list__action" data-region="component-action"></div></article></div>')}function i(e,t){return e.w("predict-my-list__title")}function n(e,t){return e.w("predict-my-list__unsubscribe")}function o(e,t){return e.w("predict-my-list__content")}return e.register("products/views/components/predict-my-list/template/predict-my-list-block.view.dust",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,t}(),function(t,i){return e.render("products/views/components/predict-my-list/template/predict-my-list-block.view.dust",t,i)}}),define("products/views/components/predict-my-list/view/predict-my-list-block.view",["require","settings/utils/bb/bb-parser","settings/enums/channel.enum","settings/enums/command/page.command.enum","settings/enums/command/router.command.enum","settings/enums/events/shoppinglist.event.enum","products/views/components/predict-my-list/view/predict-my-list.modal.view","settings/components/ui/button/view/button.view","dst!products/views/components/predict-my-list/template/predict-my-list-block.view.dust"],function(e){"use strict";var t=e("settings/utils/bb/bb-parser"),i=e("settings/enums/channel.enum"),n=e("settings/enums/command/page.command.enum"),o=e("settings/enums/command/router.command.enum"),s=e("settings/enums/events/shoppinglist.event.enum"),r=e("products/views/components/predict-my-list/view/predict-my-list.modal.view"),c=e("settings/components/ui/button/view/button.view");return Backbone.View.extend({tagName:"section",optionNames:["laneChannelName"],template:e("dst!products/views/components/predict-my-list/template/predict-my-list-block.view.dust"),persistentClassName:"predict-my-list",events:{"click [data-unsubscribe]":"unSubscribePredictMyList"},regions:{ACTION:"[data-region=component-action]"},getTemplateData:function(){return{blockTitle:this.model.get("title"),quantity:this.model.get("quantity"),title:t.parse(this.model.get("text.title")),subTitle:t.parse(this.model.get("text.subtitle")),imageTitle:this.model.get("image.title"),imageUrl:this.model.get("image.link.href")}},initialize:function(){this.listenTo(this,"render-complete",this.onRenderComplete),this.setModalIframeHandler()},setModalIframeHandler:function(){this.closeModalByMessage=this.handleIframeMessage.bind(this),window.addEventListener("message",this.closeModalByMessage,!1)},onClickButton:function(){this.channel(s.CHANNEL).publish(s.PML_SEE_SUGGESTIONS),this.openModal()},onRenderComplete:function(){var e=this,t=new c({model:this.model,region:this.regions.ACTION,title:this.request("i18n:get","products.buttons.predictMyList.title"),className:"button--1 button-color-blue--1",testHookId:"pml-button",onClick:function(){return e.onClickButton()}},{name:"predict-my-list_button"});this.append(t),this.channel(s.CHANNEL).publish(s.PML_ADDED_TO_PAGE,this.model),this.triggerPredictMyListOnload(t)},triggerPredictMyListOnload:function(e){var t=this.request("webCache:get","pml-popup"),i=-1!==document.referrer.indexOf("bestellen/starten");i&&t&&(e.$el.trigger("click"),this.request("webCache:set","pml-popup",!1))},unSubscribePredictMyList:function(){var e=this;this.channel(s.CHANNEL).publish(s.PML_UNSUBSCRIBE),this.request("popup:confirm",{body:this.request("i18n:get","products.predictMyList.unsubscribe.body"),confirmLabel:this.request("i18n:get","products.predictMyList.unsubscribe.confirmLabel"),cancelLabel:this.request("i18n:get","products.predictMyList.unsubscribe.cancelLabel"),close:!0}).then(function(){e.channel(s.CHANNEL).publish(s.PML_UNSUBSCRIBE_CONFIRM),e.sendUserToLoginOrUnSubscribe();
},function(){})},sendUserToLoginOrUnSubscribe:function(){var e=this;return this.model._links&&this.model._links.login?this.channel(o.CHANNEL).command(o.NAVIGATE,this.model._links.login.href):this.model.destroy({success:function(){return e.hideAnimation()}})},openModal:function(){var e=this;this.model.set("href",this.model.get("link.href"));var t=new r({model:this.model});$.modal(t.render().$el,{autoResize:!0,escClose:!0,overlayClose:!0,maxHeight:"90%",minWidth:"800",maxWidth:"800",closeHTML:'<div data-testhookid="close-predict-my-list">',closeClass:"modal-close",onShow:function(t){return e.modalOnShow(t)},onClose:function(){return e.closeModal()}})},closeModal:function(){this.removeStickyCanvasPage(),$.modal.close()},handleIframeMessage:function(e){var t=this;switch(e.data){case"draft-list:close":setTimeout(function(){t.closeModalAndRefreshShoppingList()},250)}},removeStickyCanvasPage:function(){document.documentElement.classList.remove("canvas-page--sticky")},reloadPage:function(){this.channel(i.PAGE).command(n.RELOAD_PAGE)},closeModalAndRefreshShoppingList:function(){this.closeModal(),this.reloadPage()},modalOnShow:function(e){document.documentElement.classList.add("canvas-page--sticky"),e.container.find(".modal-close").addClass("color-salmiak--min4 ah-online-icon icon--close-cross").show()},hideAnimation:function(){this.$el.addClass("predict-my-list--deactivated"),this.reloadPage()},remove:function(){window.removeEventListener("message",this.closeModalByMessage,!1),Backbone.View.prototype.remove.apply(this,arguments)}})}),define("dst!products/views/shop-item/components/shop-in-shop/template/shop-in-shop.badge.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div><img class="shop-badge__image" src="').f(t.getPath(!1,["image","link","href"]),t,"h").w('"/><div class="shop-badge__body">').x(t.get(["tag"],!1),t,{"else":i,block:n},{}).w('<div class="shop-badge__text--description paragraph--2">').f(t.get(["description"],!1),t,"h").w("</div></div></div>")}function i(e,t){return e.w('<div class="shop-badge__text--title">').f(t.get(["title"],!1),t,"h").w("</div>")}function n(e,t){return e.w('<div class="shop-badge__icon--').f(t.getPath(!1,["tag","text"]),t,"h").w('"></div>')}return e.register("products/views/shop-item/components/shop-in-shop/template/shop-in-shop.badge.view.dust",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/components/shop-in-shop/template/shop-in-shop.badge.view.dust",t,i)}}),define("products/views/shop-item/components/shop-in-shop/view/shop-in-shop.badge.view",["require","dst!products/views/shop-item/components/shop-in-shop/template/shop-in-shop.badge.view.dust"],function(e){"use strict";return Backbone.View.extend({className:"shop-badge__container",template:e("dst!products/views/shop-item/components/shop-in-shop/template/shop-in-shop.badge.view.dust")})}),define("products/tracking/shop-in-shop.tracking",["require","settings/model/analytics/event.analytics.model","settings/enums/command/analytics.command.enum","products/enums/shop-item-behavior.event.enum"],function(e){"use strict";var t=e("settings/model/analytics/event.analytics.model"),i=e("settings/enums/command/analytics.command.enum"),n=e("products/enums/shop-item-behavior.event.enum"),o=Backbone.Class.extend({initialize:function(){var e=_defineProperty({},n.SHOP_IN_SHOP_CLICKED,this.trackShopBadge);this.listenTo(this,e)},trackShopBadge:function(e){var i=e.href,n=e.position,o=new t(this.getAnalyticsModelData());o.set({eventAction:""+i,eventLabel:""+n}),this.trackEvent(o)},getAnalyticsModelData:function(){return{eventCategory:"Shop-in-shop navigatie",transport:"beacon"}},trackEvent:function(e){this.channel(i.CHANNEL).command(i.EVENT,e)},destroy:function(){this.stopListening()}});return _.extend(o.prototype,Backbone.Events,Backbone.decorators.Command,Backbone.decorators.PubSub),o}),define("dst!products/views/shop-item/components/shop-in-shop/template/shop-in-shop.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div><div class="navigation-shop-in-shop__title paragraph--2" >').f(t.get(["title"],!1),t,"h").w('</div><div class="navigation-shop-in-shop__shops"></div></div>')}return e.register("products/views/shop-item/components/shop-in-shop/template/shop-in-shop.view.dust",t),t.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/components/shop-in-shop/template/shop-in-shop.view.dust",t,i)}}),define("products/views/shop-item/components/shop-in-shop/view/shop-in-shop.view",["require","products/views/shop-item/components/shop-in-shop/view/shop-in-shop.badge.view","settings/components/link/assembler/link.assembler","settings/components/link/enums/link.type.enum","products/enums/shop-item-behavior.event.enum","products/tracking/shop-in-shop.tracking","dst!products/views/shop-item/components/shop-in-shop/template/shop-in-shop.view.dust"],function(e){"use strict";var t=e("products/views/shop-item/components/shop-in-shop/view/shop-in-shop.badge.view"),i=e("settings/components/link/assembler/link.assembler"),n=e("settings/components/link/enums/link.type.enum"),o=e("products/enums/shop-item-behavior.event.enum"),s=e("products/tracking/shop-in-shop.tracking");return Backbone.View.extend({className:"navigation-shop-in-shop",template:e("dst!products/views/shop-item/components/shop-in-shop/template/shop-in-shop.view.dust"),initialize:function(){this.listenTo(this,"render-complete",this.onRenderComplete),this.shopInShopTracking=new s},onRenderComplete:function(){var e=this;this.model.get("shops").forEach(function(t,i){var n=e.createLink(t.navItem,i);n.append(e.appendShopBadge(t)),e.append(n,{region:".navigation-shop-in-shop__shops"})})},createLink:function(e,t){var s=this;return i.createLinkFromNavItem(n.LINK_ROUTER_VIEW,e,{className:"shop-badge",onClick:function(){var i=e.link.href,n=t+1;s.shopInShopTracking.trigger(o.SHOP_IN_SHOP_CLICKED,{href:i,position:n})}})},appendShopBadge:function(e){return new t({model:new Backbone.Model(e)})},remove:function(){this.shopInShopTracking&&this.shopInShopTracking.destroy(),Backbone.View.prototype.remove.apply(this,arguments)}})}),define("dst!products/views/shop-item/multi-buy/template/multi-buy.view.dust",["dust"],function(e){return function(){function t(e,t){return e.w('<div><div class="multi-buy__container row collapse"><div class="multi-buy__image" data-region="image"></div><div class="multi-buy__body"><h1 class="multi-buy__title heading--7">').f(t.getPath(!1,["text","title"]),t,"h").w('</h1><div class="multi-buy__description paragraph--1">').f(t.getPath(!1,["text","body"]),t,"h").w('</div></div></div><div class="multi-buy__cta"><button class="button product-controls__cta-button ah-online-icon icon--plus-only" type="button" data-action="add-all">').h("i18n",t,{block:i},{}).w("</button></div></div>")}function i(e,t){return e.w("products.buttons.multiBuy.title")}return e.register("products/views/shop-item/multi-buy/template/multi-buy.view.dust",t),t.__dustBody=!0,i.__dustBody=!0,t}(),function(t,i){return e.render("products/views/shop-item/multi-buy/template/multi-buy.view.dust",t,i)}}),define("products/views/shop-item/multi-buy/view/multi-buy.view",["require","settings/enums/events/multi-buy.event.enum","products/enums/products.type.enum","products/views/shop-item/components/image/factory/shop-item-image.factory","dst!products/views/shop-item/multi-buy/template/multi-buy.view.dust"],function(e){"use strict";var t=e("settings/enums/events/multi-buy.event.enum"),i=e("products/enums/products.type.enum"),n=e("products/views/shop-item/components/image/factory/shop-item-image.factory");return Backbone.View.extend({optionNames:["laneChannelName"],className:"multi-buy grid-item column small-12 large-6 xlarge-4_8 xxlarge-4",template:e("dst!products/views/shop-item/multi-buy/template/multi-buy.view.dust"),events:{"click [data-action=add-all]":"onClick"},initialize:function(){this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){var e=n.getView(i.PRODUCT),t=this.model&&this.model.has("image");this.append(new e({images:t?[this.model.get("image")]:null,width:100,height:100,retina:!0,region:"[data-region=image]"}))},onClick:function(){this.channel(this.laneChannelName).publish(t.ADD_PRODUCTS)}})}),define("products/factory/products.factory",["require","products/model/product.factory.model","products/enums/products.type.enum","products/views/shop-item/product/view/product.shop-item.view","products/views/shop-item/product/view/bonus-group.product.shop-item.view","products/views/shop-item/product/view/bonus-group.card.product.shop-item.view","products/views/shop-item/product/view/card.product.shop-item.view","products/views/shop-item/product/view/hero.product.shop-item.view","products/views/nasa-number/view/nasa-number.view","products/views/shop-item/product/view/list.product.shop-item.view","products/views/shop-item/product/view/list-wide.product.shop-item.view","products/views/shop-item/combi/view/combi.wrapper.view","products/views/shop-item/combi/view/list.combi.wrapper.view","products/views/shop-item/product/components/product-disclaimer/view/product-disclaimer.view","products/views/shop-item/product/components/seo-attributes/view/breadcrumb.seo-attributes.view","products/views/shop-item/unspecified/view/card.unspecified.shop-item.view","products/views/shop-item/unspecified/view/list.unspecified.shop-item.view","products/views/shop-item/unspecified/view/list-wide.unspecified.shop-item.view","products/views/recipe/view/recipe.view","products/views/filter/view/filter.view","products/views/product-collection/view/product-collection.view","products/views/product-selection/view/product-selection.view","products/views/components/breadcrumb/view/breadcrumb.view","products/views/components/spotlight/view/spotlight.view","products/views/components/quick-search/view/quick-search.view","products/views/components/back-link/view/back-link.view","products/views/components/brand-page-link/view/brand-page-link.view.js","products/views/shop-item/product/view/spotlight.large.product.shop-item.view","products/views/components/predict-my-list/view/predict-my-list-block.view","products/views/shop-item/components/shop-in-shop/view/shop-in-shop.view","products/views/shop-item/multi-buy/view/multi-buy.view"],function(e){"use strict";var t=e("products/model/product.factory.model"),i=e("products/enums/products.type.enum"),n=e("products/views/shop-item/product/view/product.shop-item.view"),o=e("products/views/shop-item/product/view/bonus-group.product.shop-item.view"),s=e("products/views/shop-item/product/view/bonus-group.card.product.shop-item.view"),r=e("products/views/shop-item/product/view/card.product.shop-item.view"),c=e("products/views/shop-item/product/view/hero.product.shop-item.view"),u=e("products/views/nasa-number/view/nasa-number.view"),a=e("products/views/shop-item/product/view/list.product.shop-item.view"),d=e("products/views/shop-item/product/view/list-wide.product.shop-item.view"),l=e("products/views/shop-item/combi/view/combi.wrapper.view"),p=e("products/views/shop-item/combi/view/list.combi.wrapper.view"),m=e("products/views/shop-item/product/components/product-disclaimer/view/product-disclaimer.view"),h=e("products/views/shop-item/product/components/seo-attributes/view/breadcrumb.seo-attributes.view"),v=e("products/views/shop-item/unspecified/view/card.unspecified.shop-item.view"),w=e("products/views/shop-item/unspecified/view/list.unspecified.shop-item.view"),g=e("products/views/shop-item/unspecified/view/list-wide.unspecified.shop-item.view"),f=e("products/views/recipe/view/recipe.view"),b=e("products/views/filter/view/filter.view"),y=e("products/views/product-collection/view/product-collection.view"),_=e("products/views/product-selection/view/product-selection.view"),k=e("products/views/components/breadcrumb/view/breadcrumb.view"),C=e("products/views/components/spotlight/view/spotlight.view"),N=e("products/views/components/quick-search/view/quick-search.view"),T=e("products/views/components/back-link/view/back-link.view"),I=e("products/views/components/brand-page-link/view/brand-page-link.view.js"),L=e("products/views/shop-item/product/view/spotlight.large.product.shop-item.view"),E=e("products/views/components/predict-my-list/view/predict-my-list-block.view"),A=e("products/views/shop-item/components/shop-in-shop/view/shop-in-shop.view"),S=e("products/views/shop-item/multi-buy/view/multi-buy.view"),O=new t;return O.set(i.PRODUCT,n),O.set(i.PRODUCT_HERO,c),O.set(i.PRODUCT_CARD,r),O.set(i.PRODUCT_LIST,a),O.set(i.PRODUCT_LIST_WIDE,d),O.set(i.PRODUCT_SPOTLIGHT_LARGE,L),O.set(i.PRODUCT_DISCLAIMER,m),O.set(i.PRODUCT_SEO_BREADCRUMB,h),O.set(i.PRODUCT_NASA,u),O.set(i.COMBI_CARD,l),O.set(i.COMBI_LIST,p),O.set(i.PRODUCT_COLLECTION,y),O.set(i.PRODUCT_SELECTION,_),O.set(i.UNCHANGEABLE_PRODUCT_CARD,r),O.set(i.UNCHANGEABLE_PRODUCT_LIST,a),O.set(i.UNCHANGEABLE_PRODUCT_LIST_WIDE,d),O.set(i.UNCHANGEABLE_PRODUCT_HERO,c),O.set(i.BONUS_GROUP,o),O.set(i.BONUS_GROUP_CARD,s),O.set(i.BONUS_GROUP_LIST,a),O.set(i.BONUS_GROUP_LIST_WIDE,d),O.set(i.BONUS_GROUP_SPOTLIGHT_LARGE,L),O.set(i.UNSPECIFIED_CARD,v),O.set(i.UNSPECIFIED_LIST,w),O.set(i.UNSPECIFIED_LIST_WIDE,g),O.set(i.INGREDIENT_CARD,v),O.set(i.INGREDIENT_LIST,w),O.set(i.INGREDIENT_LIST_WIDE,g),O.set(i.RECIPE,f),O.set(i.FILTER_BAR,b),O.set(i.BREADCRUMB_TRAIL,k),O.set(i.SPOTLIGHT,C),O.set(i.QUICK_SEARCH,N),O.set(i.SAMPLE,n),O.set(i.SAMPLE_CARD,r),O.set(i.SAMPLE_LIST,a),O.set(i.SAMPLE_LIST_WIDE,d),O.set(i.SHOP_IN_SHOP,A),O.set(i.BACK_LINK,T),O.set(i.MULTI_BUY_LEGEND,S),O.set(i.PREDICT_MY_LIST,E),O.set(i.BRAND_PAGE_LINK,I),O.set(O.DEFAULT,n),O}),define("products/views/overview/view/overview.product.view",["products/factory/products.factory","settings/model/hal.model"],function(){"use strict";var e=require("products/factory/products.factory"),t=require("settings/model/hal.model");return Backbone.View.extend({subscriptions:{"products:request-reload":"onRequestReload"},initialize:function(){this.model=new t,this.model.fetch({url:this.request("env:products","urls.productlist")}).then(this.render.bind(this))},render:function(){return this.removeSubviews(),this.model.items.each(function(e){this.addItem(e)}.bind(this)),this.publish("overview:render-complete"),this.channel("demo-lane").publish("inview"),this},onRequestReload:function(e){e&&(this.model.abort(),this.model.fetch({url:e}).then(this.render.bind(this)))},addItem:function(t){var i=e.getView(t.get("type"));i&&this.append(new i({model:t,laneChannelName:"demo-lane"}))}})}),define("products/router",["require","products/views/overview/view/overview.product.view"],function(e){"use strict";var t=e("products/views/overview/view/overview.product.view"),i=Backbone.SubRoute.extend({overview:function(){this.view=new t,$("#main").html(this.view.$el)}});return _.extend(i.prototype,Backbone.decorators.PubSub),_.extend(i.prototype,Backbone.decorators.RequestResponse),i}),define("ecommerce-ah-online-products",["products/plugins/plugins","products/router","products/factory/products.factory","css!css-products"],function(){"use strict";var e=require("products/router"),t=require("settings/enums/factory-type.enum"),i=require("products/factory/products.factory");return new e(null,{routes:Backbone.mediator.request("env:products","routes")}),Backbone.mediator.reply(t.PRODUCT_FACTORY,function(){return new Promise(function(e){e(i)})}),i}),requirejs.config({paths:{"ecommerce-ah-online-products":"products/module",translation:"../i18n",environment:"../env","css-products":"../_ui/ecommerce-ah-online-products.min"}}),require(["ecommerce-ah-online-products"],function(){"use strict";return{}}),define("config",function(){});