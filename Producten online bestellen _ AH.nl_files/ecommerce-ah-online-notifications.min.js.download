define("text!environment/dev/notifications.json",[],function(){return'{\n    "id": "notifications",\n    "routes": {\n        "html/notifications(/)": "demo"\n    },\n    "urls": {\n        "shoppinglistReopenedMerge": "/_data/shoppinglist-header-items-pickup.json",\n        "producten": "/producten",\n        "requestNewsLetter": "/service/rest/loyalty/gall/customers"\n    }\n}\n'}),define("text!environment/prod/notifications.json",[],function(){return'{\n    "id": "notifications",\n    "routes": {\n    },\n    "urls": {\n        "shoppinglistReopenedMerge": "/bezorgen/boodschappenlijst-toevoegen",\n        "producten": "/producten",\n        "requestNewsLetter": "/service/rest/loyalty/gall/customers"\n    }\n}\n'}),define("notifications/plugins/environment-plugins",["settings/plugins/environment-plugins.main","text!environment/dev/notifications.json","text!environment/prod/notifications.json"],function(){"use strict";var i=require("settings/plugins/environment-plugins.main");return new i.Model($.parseJSON(require("text!environment/"+i.environment+"/notifications.json")))}),define("text!translation/nl-NL/notifications.json",[],function(){return'{\n    "notifications": {\n        "gallCard": {\n            "header": "Profiteer met de Gall&Gall klantenkaart",\n            "body_1": "Op dit product kan je korting krijgen met de Gall & Gall klantenkaart",\n            "body_2": "Heb je al een klantenkaart?",\n            "links": {\n                "alcoholAwareness": {\n                    "title": "Registreer je klantenkaart",\n                    "href": "/mijn/dashboard/bezorgen"\n                }\n            }\n        },\n        "ageCheck": {\n            "header": "Welkom bij Gall & Gall",\n            "body_1": "Gall & Gall staat voor verantwoord genieten. In al onze winkels en ook online vragen wij naar de leeftijd van onze bezoekers. Als drankenspeciaalzaak wil Gall & Gall bijdragen aan verantwoord drankgebruik,",\n            "body_2": "Ben je ouder dan 18 jaar?",\n            "links": {\n                "alcoholAwareness": {\n                    "title": "lees hier meer over",\n                    "href": "http://www.stiva.nl"\n                }\n            }\n        },\n        "healthyRecommendation": {\n            "body": "We hebben hieronder één of meerdere betere keuzes voor je klaar staan"\n        },\n        "merge": {\n            "header": "Je hebt een product op je nieuwe lijst",\n            "header_plural": "Je hebt producten op je nieuwe lijst",\n            "body": "Wil je deze toevoegen aan je bestelling?"\n        },\n        "mutationConfirm": {\n            "header": "Let op!",\n            "body": "Wijzigingen aan je bestelling zijn pas definitief als je de bestelling opnieuw bevestigt."\n        },\n        "buttons": {\n            "ok": "Ok",\n            "no": "Nee",\n            "yes": "Ja",\n            "cancel": "Annuleer",\n            "confirm": "Controleer bestelling",\n            "continue": "Ga verder",\n            "confirm-bonuscard": "Ik wil wél voordeel",\n            "continue-bonuscard": "Ik wil geen voordeel",\n            "order-now": "Bekijk bezorgbundel(s)",\n            "not-now": "Nu niet",\n            "order-new": "Nee, maak nieuwe bestelling",\n            "order-existing": "Ja, voeg toe"\n        }\n    }\n}\n'}),define("text!translation/nl-BE/notifications.json",[],function(){return'{\n    "notifications": {\n        "merge": {\n            "body": "Wil je deze toevoegen aan je reservatie?"\n        },\n        "mutationConfirm": {\n            "body": "Wijzigingen aan je reservatie zijn pas definitief als je de reservatie opnieuw bevestigt."\n        },\n        "buttons": {\n            "confirm": "Controleer reservatie"\n        }\n    }\n}\n'}),define("notifications/plugins/localisation-plugins",["text!translation/nl-NL/notifications.json","text!translation/nl-BE/notifications.json"],function(){"use strict";return Backbone.mediator.request("i18n:add","text!translation/nl-NL/notifications.json"),Backbone.mediator.request("i18n:add","text!translation/nl-BE/notifications.json"),null}),define("notifications/plugins/plugins",["notifications/plugins/environment-plugins","notifications/plugins/localisation-plugins"],function(){"use strict";return null}),define("notifications/enum/notification.type.enum",[],function(){"use strict";return{NAVIGATION_NOTIFICATION:"NavigationNotification",MY_ORDERS_NOTIFICATION:"MyOrdersNotification",CURRENT_ORDER_NOTIFICATION:"CurrentOrderNotification",PAGE_NOTIFICATION:"PageNotification",CONTEXT_NOTIFICATION:"ContextNotification",SHOPPING_LIST_REOPENED_MUTATION_CONFIRM:"SHOPPINGLIST_REOPENED_MUTATION_CONFIRM",SHOPPING_LIST_REOPENED_MERGE:"SHOPPINGLIST_REOPENED_MERGE",AGE_CHECK:"AgeCheckNotification",NO_GALL_CARD:"GALLPRODUCT_NO_CARD_MEMBER_NOTIFICATION",CREATE_GALL_CARD:"CREATE_CARD",RENEW_GALL_CARD:"RENEW_CARD",POPUP_NOTIFICATION:"PopupNotification",POPUP_CONFIRM_NOTIFICATION:"PopupConfirmNotification",HEALTHY_RECOMMENDATION:"HEALTHY_RECOMMENDATION"}}),define("notifications/views/notification/notification.view",["require","settings/enums/command/notification.command.enum","settings/enums/events/notification.event.enum","settings/components/link/assembler/link.assembler","settings/components/link/enums/link.type.enum"],function(i){"use strict";var t=i("settings/enums/command/notification.command.enum"),n=i("settings/enums/events/notification.event.enum"),e=i("settings/components/link/assembler/link.assembler"),o=i("settings/components/link/enums/link.type.enum");return Backbone.View.extend({className:"notification",delay:2,attachedTo:null,attributes:function(){return{"data-notification-id":this.model.get("id")}},attachToSelector:function(){return this.model.get("attachTo")||"body"},initialize:function(){Backbone.View.prototype.initialize.apply(this,arguments),this.addDisplayType()},render:function(){return this.template?Backbone.View.prototype.render.apply(this,arguments):(this.trigger("render-complete"),this)},addDisplayType:function(){this.model.has("displayType")&&this.$el.addClass("-"+this.model.get("displayType"))},beforeAttach:function(){return!0},attach:function(){var i=this.getTarget();return i&&(this.detachFromPreviousTarget(),this.attachToTarget(i),this.attached(),this.addHasNotificationClass(i),this.transitionIn().then(this.shown.bind(this))),"undefined"!=typeof i},attached:function(){this.channel(n.CHANNEL).publish(n.NOTIFICATION_ATTACHED,this)},shown:function(){this.channel(t.CHANNEL).publish(n.NOTIFICATION_SHOWN,this)},attachToTarget:function(i){i&&($(i).append(this.el),this.attachedTo=$(i))},getTarget:function(){return $(_.result(this,"attachToSelector"))[0]},addHasNotificationClass:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getTarget();i&&$(i).addClass("-has-notification")},removeHasNotificationClass:function(){this.attachedTo&&this.attachedTo.removeClass("-has-notification")},detachFromPreviousTarget:function(){this.attachedTo&&(this.removeHasNotificationClass(),this.$el.detach())},transitionIn:function(){return new Promise(function(i){i()})},transitionOut:function(){return new Promise(function(i){i()})},close:function(){this.transitionOut().then(this.runCloseCommand.bind(this))["catch"](this.runCloseCommand.bind(this))},runCloseCommand:function(){this.channel(t.CHANNEL).command(t.CLOSE,this)},closeForever:function(){this.transitionOut().then(this.runCloseForeverCommand.bind(this))["catch"](this.runCloseForeverCommand.bind(this))},runCloseForeverCommand:function(){this.channel(t.CHANNEL).command(t.CLOSE_FOREVER,this)},appendCloseCross:function(){var i=e.createLink(o.LINK_CLICK_VIEW,new Backbone.Model({id:"close-"+this.model.get("id")}),{className:"ah-online-icon icon--close-cross link--2 link-color-brown--1 paragraph--2 notification-context__close",onClick:this.close.bind(this)});this.prepend(i),this.model.get("timed")&&(this.notificationTimeOut=window.setTimeout(function(){this.close()}.bind(this),2e3))},remove:function(){this.removeHasNotificationClass(),window.clearTimeout(this.notificationTimeOut),Backbone.View.prototype.remove.apply(this,arguments),this.channel(t.CHANNEL).publish(n.NOTIFICATION_CLOSED)}})}),define("notifications/views/notification/context/components/persistent-icon/view/notification.persistent-icon.view",[],function(){"use strict";return Backbone.View.extend({tagName:"i",className:"persistent-icon ah-online-icon icon--notification",render:function(){return this}})}),define("notifications/views/notification/context/components/title/view/notification.title.view.js",[],function(){"use strict";return Backbone.View.extend({tagName:"h2",className:"paragraph--2 paragraph--strong notification-context__title -max2lines",render:function(){var i=this.model.get("text.title")||this.model.get("title");this.$el.html(i)}})}),define("dst!notifications/views/notification/context/template/context.notification.view.dust",["dust"],function(i){return function(){function t(i,t){return i.w('<div><div class="notification-context__content" data-content-container ').h("testHook",t,{block:n},{}).w(">").x(t.get(["icon"],!1),t,{block:e},{}).w("</div></div>")}function n(i,t){return i.w("notification-").f(t.get(["id"],!1),t,"h")}function e(i,t){return i.w('<i class="ah-online-icon icon--').f(t.get(["icon"],!1),t,"h").w(' notification-context__icon"/>')}return i.register("notifications/views/notification/context/template/context.notification.view.dust",t),t.__dustBody=!0,n.__dustBody=!0,e.__dustBody=!0,t}(),function(t,n){return i.render("notifications/views/notification/context/template/context.notification.view.dust",t,n)}}),define("notifications/views/notification/context/view/context.notification",["require","notifications/views/notification/notification.view","notifications/views/notification/context/components/persistent-icon/view/notification.persistent-icon.view","notifications/views/notification/context/components/title/view/notification.title.view.js","settings/components/link/assembler/link.assembler","settings/components/link/enums/link.type.enum","dst!notifications/views/notification/context/template/context.notification.view.dust"],function(i){"use strict";var t=i("notifications/views/notification/notification.view"),n=i("notifications/views/notification/context/components/persistent-icon/view/notification.persistent-icon.view"),e=i("notifications/views/notification/context/components/title/view/notification.title.view.js"),o=i("settings/components/link/assembler/link.assembler"),s=i("settings/components/link/enums/link.type.enum");return t.extend({className:t.prototype.className+" notification-context",template:i("dst!notifications/views/notification/context/template/context.notification.view.dust"),regions:{CONTENT:"[data-content-container]"},relationalToSelector:function(){return this.attachToSelector()},initialize:function(){this.addTriangleOrientation(),this.listenTo(this,"render-complete",this.onRenderComplete)},addTriangleOrientation:function(){var i=this.model.get("triangleOrientation")||"up";i&&this.$el.addClass("notification-context--triangle-"+i)},onRenderComplete:function(){this.addIconClass(),this.appendLink(),this.appendTitle(),this.appendCloseCross(),this.appendPersistentIconToRelationalElement()},addIconClass:function(){this.model.has("icon")&&this.$el.addClass("-has-icon")},appendPersistentIconToRelationalElement:function(){var i=this.getRelationalElement();return i&&this.model.get("persistent")&&(this.icon=new n,$(i).append(this.icon.render().$el)),"undefined"!=typeof i},appendLink:function(){this.model.has("navItem")&&(this.link=o.createLinkFromNavItem(s.LINK_ROUTER_VIEW,this.model.get("navItem"),{className:"link link--2 link-color-brown--1 link--chevron paragraph--2 notification-context__link -max2lines"}),this.append(this.link,{region:this.regions.CONTENT}))},appendTitle:function(){if(this.model.has("text.title")||this.model.has("title")){var i=new e({model:this.model});this.addTitleToLinkOrRegion(i)}},addTitleToLinkOrRegion:function(i){this.link?this.link.prepend(i):this.append(i,{region:this.regions.CONTENT})},getRelationalElement:function(){return $(_.result(this,"relationalToSelector"))[0]},transitionIn:function(){return this.$el.addClass("-show"),new Promise(function(i){return setTimeout(i(),300)})},transitionOut:function(){return this.$el.removeClass("-show"),new Promise(function(i){return setTimeout(i(),300)})}})}),define("notifications/views/notification/context/view/navigation.context.notification.view",["require","notifications/views/notification/context/view/context.notification","settings/enums/events/navigation.event.enum","settings/enums/request/application.request.enum","settings/utils/breakpoints"],function(i){"use strict";var t=i("notifications/views/notification/context/view/context.notification"),n=i("settings/enums/events/navigation.event.enum"),e=i("settings/enums/request/application.request.enum"),o=i("settings/utils/breakpoints");return t.extend({className:t.prototype.className+" notification-context--navigation",beforeAttach:function(){return this.channel(e.CHANNEL).request(e.IS_RUNNING_WITH_NAVIGATION)},attachToSelector:function(){return o.isNavigationSide()?this.relationalToSelector():"[data-notification-center]"},relationalToSelector:function(){return".navigation-section__list-item--"+this.model.get("rel")},attach:function(){var i=t.prototype.attach.apply(this,arguments);i?(this.channel(n.CHANNEL).subscribe(n.TOP,this.attach,this),this.channel(n.CHANNEL).subscribe(n.SIDE,this.attach,this)):this.channel(n.CHANNEL).subscribeOnce(n.RENDER_COMPLETE,this.attach,this)},addHasNotificationClass:function(){var i=$(this.getRelationalElement());t.prototype.addHasNotificationClass.apply(this,arguments),i.closest(".navigation-section").addClass("-has-notification"),i.addClass("-has-notification")},removeHasNotificationClass:function(){var i=$(this.getRelationalElement());t.prototype.removeHasNotificationClass.apply(this,arguments),i.closest(".navigation-section").removeClass("-has-notification"),i.removeClass("-has-notification")},appendPersistentIconToRelationalElement:function(){var i=t.prototype.appendPersistentIconToRelationalElement.apply(this,arguments);i||this.channel(n.CHANNEL).subscribeOnce(n.RENDER_COMPLETE,this.appendPersistentIconToRelationalElement,this)},remove:function(){this.channel(n.CHANNEL).unsubscribe(n.RENDER_COMPLETE,this.attach,this),this.channel(n.CHANNEL).unsubscribe(n.RENDER_COMPLETE,this.appendPersistentIconToRelationalElement,this),this.channel(n.CHANNEL).unsubscribe(n.TOP,this.attach,this),this.channel(n.CHANNEL).unsubscribe(n.SIDE,this.attach,this),t.prototype.remove.apply(this,arguments)}})}),define("notifications/views/notification/context/order/view/my-orders.navigation.context.notification.view",["require","notifications/views/notification/context/view/navigation.context.notification.view"],function(i){"use strict";var t=i("notifications/views/notification/context/view/navigation.context.notification.view");return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this.model.get("properties.orderType")&&this.model.set("icon",this.model.get("properties.orderType").toLocaleLowerCase())}})}),define("notifications/views/notification/context/order/view/current-orders.navigation.context.notification.view",["require","notifications/views/notification/context/view/navigation.context.notification.view"],function(i){"use strict";var t=i("notifications/views/notification/context/view/navigation.context.notification.view");return t.extend({beforeAttach:function(){return t.prototype.beforeAttach.call(this)&&!this.request("shoppingType:inOrderMode")},attached:function(){this.$rel=$(".navigation-section__button--"+this.model.get("rel")),this.$rel.length>0&&!this.bindedClose&&(this.bindedClose=this.close.bind(this),this.$rel.one("click",this.bindedClose)),t.prototype.attached.apply(this,arguments)},close:function(){this.$rel&&this.$rel.off("click",this.bindedClose),t.prototype.close.apply(this,arguments)}})}),define("dst!notifications/views/notification/page/template/page.notification.view.dust",["dust"],function(i){return function(){function t(i,t){return i.w('<div><div class="notification-context__content" data-content-container="notification-').f(t.get(["id"],!1),t,"h").w('" ').h("testHook",t,{block:n},{}).w(">").x(t.get(["icon"],!1),t,{block:e},{}).x(t.get(["body"],!1),t,{block:o},{}).w("</div></div>")}function n(i,t){return i.w("notification-").f(t.get(["id"],!1),t,"h")}function e(i,t){return i.w('<i class="ah-online-icon icon--').f(t.get(["icon"],!1),t,"h").w(' notification-context__icon"/>')}function o(i,t){return i.w('<p class="paragraph--2 notification-context__body">').f(t.get(["body"],!1),t,"h",["s"]).w("</p>")}return i.register("notifications/views/notification/page/template/page.notification.view.dust",t),t.__dustBody=!0,n.__dustBody=!0,e.__dustBody=!0,o.__dustBody=!0,t}(),function(t,n){return i.render("notifications/views/notification/page/template/page.notification.view.dust",t,n)}}),define("notifications/views/notification/page/view/page.notification.view",["require","notifications/views/notification/notification.view","settings/enums/events/window.event.enum","settings/enums/command/layout.command.enum","dst!notifications/views/notification/page/template/page.notification.view.dust"],function(i){"use strict";var t=i("notifications/views/notification/notification.view"),n=i("settings/enums/events/window.event.enum"),e=i("settings/enums/command/layout.command.enum");return t.extend({className:t.prototype.className+" notification-page",notificationTextSelector:".notification-context__body",template:i("dst!notifications/views/notification/page/template/page.notification.view.dust"),initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.onRenderComplete),this.channel(n.CHANNEL).subscribeOnce(n.PAGE_ADDED_TO_DOM,this.transitionIn,this)},onRenderComplete:function(){this.appendCloseCross()},attach:function(){this.model.get("attachTo")?t.prototype.attach.call(this):this.channel(e.CHANNEL).request(e.CURRENT_VIEW,this).prepend(this)},getTemplateData:function(){return{id:this.model.get("id"),title:this.model.get("text.title")||this.model.get("title"),body:this.model.get("text.body")||this.model.get("body"),icon:this.model.get("icon")}},transitionIn:function(){var t=this;return new Promise(function(n){i(["greensock"],function(){var i=new TimelineLite;i.fromTo(t.el,.2,{"margin-top":"-"+t.$el.height(),opacity:0},{"margin-top":0,opacity:1,ease:Cubic.easeIn}).fromTo(t.$(t.notificationTextSelector),.2,{opacity:0},{opacity:1,onComplete:n})})})},transitionOut:function(){var t=this;return new Promise(function(n){i(["greensock"],function(){var i=new TimelineLite;i.to(t.$(t.notificationTextSelector),.2,{opacity:0}).to(t.el,.2,{"margin-top":"-"+t.$el.height(),opacity:0,ease:Cubic.easeOut,onComplete:n})})})},remove:function(){this.channel(n.CHANNEL).unsubscribe(n.PAGE_ADDED_TO_DOM,this.transitionIn,this),t.prototype.remove.apply(this,arguments)}})}),define("notifications/views/notification/page/view/healthy-recommendation.page.notification.view",["require","notifications/views/notification/page/view/page.notification.view"],function(i){"use strict";var t=i("notifications/views/notification/page/view/page.notification.view");return t.extend({className:t.prototype.className+" notification-page notification-page--avocado",notificationTextSelector:".notification-context__body",getTemplateData:function(){return{body:this.request("i18n:get","notifications.healthyRecommendation.body")}}})}),define("dst!notifications/views/notification/popup/components/reopened-mutation/template/reopened-mutation.notification.dust",["dust"],function(i){return function(){function t(i,t){return i.w('<div><h1 class="heading--7 pb--5 mr--30">').h("i18n",t,{block:n},{}).w('</h1><p class="paragraph--1 pb--10">').h("i18n",t,{block:e},{}).w("</p></div>")}function n(i,t){return i.w("notifications.mutationConfirm.header")}function e(i,t){return i.w("notifications.mutationConfirm.body")}return i.register("notifications/views/notification/popup/components/reopened-mutation/template/reopened-mutation.notification.dust",t),t.__dustBody=!0,n.__dustBody=!0,e.__dustBody=!0,t}(),function(t,n){return i.render("notifications/views/notification/popup/components/reopened-mutation/template/reopened-mutation.notification.dust",t,n)}}),define("dst!notifications/views/notification/popup/components/merge-shoppinglists/template/merge-shoppinglists.notification.dust",["dust"],function(i){return function(){function t(i,t){return i.w('<div><h1 class="heading--7 pb--5">').h("i18n",t,{block:n},{count:t.getPath(!1,["properties","notInOrder"])}).w('</h1><p class="paragraph--1 pb--10">').h("i18n",t,{block:e},{}).w("</p></div>")}function n(i,t){return i.w("notifications.merge.header")}function e(i,t){return i.w("notifications.merge.body")}return i.register("notifications/views/notification/popup/components/merge-shoppinglists/template/merge-shoppinglists.notification.dust",t),t.__dustBody=!0,n.__dustBody=!0,e.__dustBody=!0,t}(),function(t,n){return i.render("notifications/views/notification/popup/components/merge-shoppinglists/template/merge-shoppinglists.notification.dust",t,n)}}),define("dst!notifications/views/notification/popup/components/age-check/template/age-check.notification.view.dust",["dust"],function(i){return function(){function t(i,t){return i.w('<div><h1 class="heading--7 pb--5">').h("i18n",t,{block:n},{}).w('</h1><p class="paragraph--1 pb--10">').h("i18n",t,{block:e},{}).w(' <a href="').h("i18n",t,{block:o},{}).w('" target="_blank" class="link--1 color-ah--plus1">').h("i18n",t,{block:s},{}).w("</a>.<br/><br/>").h("i18n",t,{block:a},{}).w("</p></div>")}function n(i,t){return i.w("notifications.ageCheck.header")}function e(i,t){return i.w("notifications.ageCheck.body_1")}function o(i,t){return i.w("notifications.ageCheck.links.alcoholAwareness.href")}function s(i,t){return i.w("notifications.ageCheck.links.alcoholAwareness.title")}function a(i,t){return i.w("notifications.ageCheck.body_2")}return i.register("notifications/views/notification/popup/components/age-check/template/age-check.notification.view.dust",t),t.__dustBody=!0,n.__dustBody=!0,e.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,t}(),function(t,n){return i.render("notifications/views/notification/popup/components/age-check/template/age-check.notification.view.dust",t,n)}}),define("dst!notifications/views/notification/popup/components/gall-card/template/no-gall-card.notification.view.dust",["dust"],function(i){return function(){function t(i,t){return i.w('<div><h1 class="heading--7 pb--5 mr--30">').h("i18n",t,{block:n},{}).w('</h1><p class="paragraph--1 pb--10">').h("i18n",t,{block:e},{}).w("<br/><br/>").h("i18n",t,{block:o},{}).w("<br/><a ").h("testHook",t,{block:s},{}).w(' href="').h("i18n",t,{block:a},{}).w('" class="ah-online-icon button--chevron link link-color--primair">').h("i18n",t,{block:c},{}).w("</a></p></div>")}function n(i,t){return i.w("notifications.gallCard.header")}function e(i,t){return i.w("notifications.gallCard.body_1")}function o(i,t){return i.w("notifications.gallCard.body_2")}function s(i,t){return i.w("link-").f(t.get(["type"],!1),t,"h")}function a(i,t){return i.w("notifications.gallCard.links.alcoholAwareness.href")}function c(i,t){return i.w("notifications.gallCard.links.alcoholAwareness.title")}return i.register("notifications/views/notification/popup/components/gall-card/template/no-gall-card.notification.view.dust",t),t.__dustBody=!0,n.__dustBody=!0,e.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,c.__dustBody=!0,t}(),function(t,n){return i.render("notifications/views/notification/popup/components/gall-card/template/no-gall-card.notification.view.dust",t,n)}}),define("dst!notifications/views/notification/popup/components/popup/popup.notification.view.dust",["dust"],function(i){return function(){function t(i,t){return i.w('<div><h1 class="heading--7 pb--5 mr--30">').f(t.getPath(!1,["text","title"]),t,"h",["s"]).w('</h1><p class="paragraph--1 pb--10">').f(t.getPath(!1,["text","body"]),t,"h",["s"]).w("</p></div>")}return i.register("notifications/views/notification/popup/components/popup/popup.notification.view.dust",t),t.__dustBody=!0,t}(),function(t,n){return i.render("notifications/views/notification/popup/components/popup/popup.notification.view.dust",t,n)}}),define("notifications/views/notification/popup/factory/popup.component.notification.factory",["require","settings/components/factory/model/factory.model","notifications/enum/notification.type.enum","dst!notifications/views/notification/popup/components/reopened-mutation/template/reopened-mutation.notification.dust","dst!notifications/views/notification/popup/components/merge-shoppinglists/template/merge-shoppinglists.notification.dust","dst!notifications/views/notification/popup/components/age-check/template/age-check.notification.view.dust","dst!notifications/views/notification/popup/components/gall-card/template/no-gall-card.notification.view.dust","dst!notifications/views/notification/popup/components/popup/popup.notification.view.dust"],function(i){"use strict";var t=i("settings/components/factory/model/factory.model"),n=i("notifications/enum/notification.type.enum"),e=i("dst!notifications/views/notification/popup/components/reopened-mutation/template/reopened-mutation.notification.dust"),o=i("dst!notifications/views/notification/popup/components/merge-shoppinglists/template/merge-shoppinglists.notification.dust"),s=i("dst!notifications/views/notification/popup/components/age-check/template/age-check.notification.view.dust"),a=i("dst!notifications/views/notification/popup/components/gall-card/template/no-gall-card.notification.view.dust"),c=i("dst!notifications/views/notification/popup/components/popup/popup.notification.view.dust"),r=new t;return r.set(n.SHOPPING_LIST_REOPENED_MUTATION_CONFIRM,e),r.set(n.SHOPPING_LIST_REOPENED_MERGE,o),r.set(n.AGE_CHECK,s),r.set(n.NO_GALL_CARD,a),r.set(n.POPUP_NOTIFICATION,c),r.set(n.POPUP_CONFIRM_NOTIFICATION,c),r}),define("notifications/views/notification/popup/factory/popup.component.view.assembler.js",["require","notifications/views/notification/popup/factory/popup.component.notification.factory"],function(i){"use strict";var t=i("notifications/views/notification/popup/factory/popup.component.notification.factory");return{createPopupView:function(i){var n=Backbone.View.extend({template:t.get(i.get("type"))});return new n({model:i})}}}),define("dst!notifications/views/notification/popup/template/popup.notification.dust",["dust"],function(i){return function(){function t(i,t){return i.w('<div><div data-button class="text__align--right"></div></div>')}return i.register("notifications/views/notification/popup/template/popup.notification.dust",t),t.__dustBody=!0,t}(),function(t,n){return i.render("notifications/views/notification/popup/template/popup.notification.dust",t,n)}}),define("notifications/views/notification/popup/view/popup.notification.view",["require","notifications/views/notification/notification.view","settings/enums/request/application.request.enum","notifications/views/notification/popup/factory/popup.component.view.assembler.js","dst!notifications/views/notification/popup/template/popup.notification.dust"],function(i){"use strict";var t=i("notifications/views/notification/notification.view"),n=i("settings/enums/request/application.request.enum"),e=i("notifications/views/notification/popup/factory/popup.component.view.assembler.js");return t.extend({className:"notification-popup",template:i("dst!notifications/views/notification/popup/template/popup.notification.dust"),attributes:function o(){var o={"data-popup":""};return this.channel(n.CHANNEL).request(n.IS_RUNNING_WITH_TESTHOOK)&&(o["data-testhookid"]="notification-popup-"+this.model.get("type")),o},initialize:function(){this.listenTo(this,"render-complete",this.onRenderComplete),t.prototype.initialize.apply(this,arguments)},onRenderComplete:function(){this.prepend(e.createPopupView(this.model),{region:"[data-popup]"}),this.appendButtons()},attach:function(){var i={escClose:!0,overlayClose:!0,minWidth:"600",maxWidth:"600",onShow:function(){$(".simplemodal-wrap").css("overflow","visible")}.bind(this),onClose:function(){this.disposed||this.close(),$.modal.close()}.bind(this)};this.model.get("closeCross")||(i.close=!1,i.closeHTML=""),$.modal(this.$el,i)},appendButton:function(i){this.append(i,{region:"[data-button]"})}})}),define("notifications/views/notification/popup/view/popup.ok.notification.view",["require","notifications/views/notification/popup/view/popup.notification.view","settings/components/ui/button/view/button.view"],function(i){"use strict";var t=i("notifications/views/notification/popup/view/popup.notification.view"),n=i("settings/components/ui/button/view/button.view");return t.extend({initialize:function(){this.model.set("closeCross","true"),t.prototype.initialize.apply(this,arguments)},appendButtons:function(){var i=new n({title:"notifications.buttons.ok",i18n:!0,className:"button--1 heading--10 button-color-blue--1",onClick:this.okNotification.bind(this)});this.append(i,{region:"[data-button]"})},okNotification:function(){this.notificationOked(),$.modal.close()},notificationOked:function(){}})}),define("notifications/views/notification/popup/view/popup-agreement.confirm.notification.view",["require","notifications/views/notification/popup/view/popup.notification.view","settings/components/ui/button/view/button.view"],function(i){"use strict";var t=i("notifications/views/notification/popup/view/popup.notification.view"),n=i("settings/components/ui/button/view/button.view");return t.extend({defaultButtonClassName:"button--1 heading--10",appendButtons:function(){var i={id:"no",clickHandler:this.cancelNotification.bind(this),className:this.defaultButtonClassName+" button-color-brown--1 mr--5"},t={id:"yes",clickHandler:this.confirmNotification.bind(this),className:this.defaultButtonClassName+" button-color-blue--1"};this.appendButton(this.createButton(i)),this.appendButton(this.createButton(t))},createButton:function(i){var t=i.id,e=i.clickHandler,o=i.className,s=new n({title:"notifications.buttons."+t,i18n:!0,className:o,onClick:e});return s},cancelNotification:function(){this.notificationCancelled(),$.modal.close()},notificationCancelled:function(){},confirmNotification:function(){this.notificationConfirmed(),$.modal.close()},notificationConfirmed:function(){}})}),define("notifications/views/notification/popup/components/age-check/view/age-check.confirm.notification.view",["require","notifications/views/notification/popup/view/popup-agreement.confirm.notification.view"],function(i){"use strict";var t=i("notifications/views/notification/popup/view/popup-agreement.confirm.notification.view");return t.extend({cancelNotification:function(){this.model.unset("id"),window.location.assign(this.request("env:notifications","urls.producten"))},notificationConfirmed:function(){this.runCloseForeverCommand()}})}),define("notifications/views/notification/popup/components/merge-shoppinglists/view/merge-shoppinglists.confirm.helper",["require","notifications/enum/notification.type.enum","settings/enums/events/window.event.enum","settings/enums/events/meta.event.enum","settings/enums/command/page.command.enum"],function(i){"use strict";var t=i("notifications/enum/notification.type.enum"),n=i("settings/enums/events/window.event.enum"),e=i("settings/enums/events/meta.event.enum"),o=i("settings/enums/command/page.command.enum"),s=function(){Backbone.mediator.channel(o.CHANNEL).unsubscribe(n.PAGE_RENDER_COMPLETE),Backbone.mediator.channel(e.CHANNEL).publish(e.NOTIFICATIONS,[{type:t.SHOPPING_LIST_REOPENED_MUTATION_CONFIRM}])};return{reloadPage:function(){Backbone.mediator.channel(n.CHANNEL).subscribe(n.PAGE_RENDER_COMPLETE,s),Backbone.mediator.channel(o.CHANNEL).command(o.RELOAD_PAGE)}}}),
define("notifications/views/notification/popup/components/merge-shoppinglists/view/merge-shoppinglists.confirm.notification.view",["require","notifications/views/notification/popup/view/popup-agreement.confirm.notification.view","notifications/views/notification/popup/components/merge-shoppinglists/view/merge-shoppinglists.confirm.helper","settings/enums/command/page.command.enum"],function(i){"use strict";var t=i("notifications/views/notification/popup/view/popup-agreement.confirm.notification.view"),n=i("notifications/views/notification/popup/components/merge-shoppinglists/view/merge-shoppinglists.confirm.helper"),e=i("settings/enums/command/page.command.enum");return t.extend({notificationConfirmed:function(){this.channel(e.CHANNEL).command(e.SHOW_PAGE_LOADER,{threshold:300}),$.ajax(this.request("env:notifications","urls.shoppinglistReopenedMerge")).then(n.reloadPage)}})}),define("notifications/views/notification/popup/components/gall-card/view/no-gall-card.ok.notification.view",["require","settings/views/react/customer-card-modal/view/customer-card-modal.reactive-element.view","notifications/enum/notification.type.enum","settings/enums/customer-card-type.enum"],function(i){"use strict";var t=i("settings/views/react/customer-card-modal/view/customer-card-modal.reactive-element.view"),n=i("notifications/enum/notification.type.enum"),e=i("settings/enums/customer-card-type.enum");return Backbone.View.extend({appendCustomerCardModal:function(i,n){this.modal=new t({type:i,webshopId:n}),document.body.appendChild(this.modal.el)},render:function(){var i="",t=this.model.get("properties"),o=t.action,s=t.webshopId;o===n.CREATE_GALL_CARD?i=e.GALL:o===n.RENEW_GALL_CARD&&(i=e.GALL_RENEW),this.appendCustomerCardModal(i,s)},beforeAttach:function(){},close:function(){}})}),define("notifications/views/notification/popup/view/popup.confirm.notification.view",["require","notifications/views/notification/popup/view/popup.notification.view","settings/components/link/assembler/link.assembler","settings/components/link/enums/link.type.enum"],function(i){"use strict";var t=i("notifications/views/notification/popup/view/popup.notification.view"),n=i("settings/components/link/assembler/link.assembler"),e=i("settings/components/link/enums/link.type.enum");return t.extend({defaultButtonClassName:"button--1 heading--10",appendButtons:function(){this.hasNavItems()&&this.appendNavItems()},appendNavItems:function(){var i=this;this.model.get("navItems").forEach(function(t){var n=t.key,e=t.title,o=t.link,s=void 0===o?{}:o,a=t.clickHandler,c={key:e,title:n||e,className:i.getClassName(e),href:s.href,clickHandler:a};i.appendButton(i.createLinkView(c))})},hasNavItems:function(){return this.model.get("navItems")?!0:void 0},createLinkView:function(i){var t=this,o=i.key,s=i.title,a=i.href,c=i.className,r=i.clickHandler,f={className:c},u=new Backbone.Model({title:this.request("i18n:get","notifications.buttons."+s),id:"notification-"+o,href:a});return("continue"===o||_.isFunction(r))&&(f.onClick=function(i){return t.confirmNotification(i,r)}),n.createLink(e.LINK_ROUTER_VIEW,u,f)},getClassName:function(i){return 0===i.indexOf("continue")?this.defaultButtonClassName+" button-color-brown--1 button--continue":0===i.indexOf("order")?this.defaultButtonClassName+" button-color-blue--1 button--chevron button--continue":this.defaultButtonClassName+" button-color-blue--1 button--chevron button--confirm"},confirmNotification:function(i){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};$.modal.close(),i.preventDefault(),t()}})}),define("notifications/factory/notification.factory.js",["require","settings/components/factory/model/factory.model","notifications/enum/notification.type.enum","notifications/views/notification/context/view/navigation.context.notification.view","notifications/views/notification/context/order/view/my-orders.navigation.context.notification.view","notifications/views/notification/context/order/view/current-orders.navigation.context.notification.view","notifications/views/notification/page/view/page.notification.view","notifications/views/notification/page/view/healthy-recommendation.page.notification.view","notifications/views/notification/context/view/context.notification","notifications/views/notification/popup/view/popup.ok.notification.view","notifications/views/notification/popup/components/age-check/view/age-check.confirm.notification.view","notifications/views/notification/popup/components/merge-shoppinglists/view/merge-shoppinglists.confirm.notification.view","notifications/views/notification/popup/components/gall-card/view/no-gall-card.ok.notification.view","notifications/views/notification/popup/view/popup.confirm.notification.view"],function(i){"use strict";var t=i("settings/components/factory/model/factory.model"),n=i("notifications/enum/notification.type.enum"),e=i("notifications/views/notification/context/view/navigation.context.notification.view"),o=i("notifications/views/notification/context/order/view/my-orders.navigation.context.notification.view"),s=i("notifications/views/notification/context/order/view/current-orders.navigation.context.notification.view"),a=i("notifications/views/notification/page/view/page.notification.view"),c=i("notifications/views/notification/page/view/healthy-recommendation.page.notification.view"),r=i("notifications/views/notification/context/view/context.notification"),f=i("notifications/views/notification/popup/view/popup.ok.notification.view"),u=i("notifications/views/notification/popup/components/age-check/view/age-check.confirm.notification.view"),p=i("notifications/views/notification/popup/components/merge-shoppinglists/view/merge-shoppinglists.confirm.notification.view"),l=i("notifications/views/notification/popup/components/gall-card/view/no-gall-card.ok.notification.view"),d=i("notifications/views/notification/popup/view/popup.confirm.notification.view"),m=new t;return m.set(n.SHOPPING_LIST_REOPENED_MUTATION_CONFIRM,f),m.set(n.SHOPPING_LIST_REOPENED_MERGE,p),m.set(n.AGE_CHECK,u),m.set(n.NO_GALL_CARD,l),m.set(n.CURRENT_ORDER_NOTIFICATION,s),m.set(n.MY_ORDERS_NOTIFICATION,o),m.set(n.HEALTHY_RECOMMENDATION,c),m.set(n.NAVIGATION_NOTIFICATION,e),m.set(n.CONTEXT_NOTIFICATION,r),m.set(n.PAGE_NOTIFICATION,a),m.set(n.POPUP_NOTIFICATION,f),m.set(n.POPUP_CONFIRM_NOTIFICATION,d),m}),define("notifications/assembler/notification.assembler",["require","notifications/factory/notification.factory.js"],function(i){"use strict";var t=i("notifications/factory/notification.factory.js");return{create:function(i){return i instanceof Backbone.Model?this.createFromModel(i):this.createFromData(i)},createFromModel:function(i){if(i.has("type")){var n=t.getView(i.get("type"));return new n({model:i})}},createFromData:function(i){return this.createFromModel(new Backbone.DeepModel(i))}}}),define("notifications/commands/notification.command",[],function(){"use strict";var i=Backbone.Class.extend({optionNames:["notification"]});return _.extend(i.prototype,Backbone.decorators.RequestResponse),i}),define("notifications/enum/notification.state.enum",[],function(){"use strict";return{VISIBLE:"visible",HIDDEN:"hidden",HIDDEN_FOREVER:"hidden-forever"}}),define("notifications/utils/notification-state.utils",["require","notifications/enum/notification.state.enum","settings/enums/command/notification.command.enum","settings/enums/request/notification.request.enum"],function(i){"use strict";var t=i("notifications/enum/notification.state.enum"),n=i("settings/enums/command/notification.command.enum"),e=i("settings/enums/request/notification.request.enum");return{isNotificationNewOrFromCache:function(i){return!this.isNotificationAlreadyTriggered(i)||this.isFromCache(i)},isPreviouslyVisibleOrAndNotHidden:function(i){return this.wasPreviouslyVisible(i)||!this.isHidden(i)},isNotificationAlreadyTriggered:function(i){return Backbone.mediator.channel(n.CHANNEL).request(e.IS_ALREADY_TRIGGERED,i.model.id)},isFromCache:function(i){return i.model.has("cached")},wasPreviouslyVisible:function(i){return this.getNotificationState(i)===t.VISIBLE},isHiddenForever:function(i){return this.getNotificationState(i)===t.HIDDEN_FOREVER},isHiddenForSession:function(i){return Backbone.mediator.request("sessionStorage:get","notification-"+i.model.id)===t.HIDDEN},isHidden:function(i){return this.isHiddenForSession(i)||this.isHiddenForever(i)},isNotificationPersistent:function(i){return i.model.get("persistent")},getNotificationState:function(i){return Backbone.mediator.request("webCache:get","notification-"+i.model.id)||""},isNotificationSticky:function(i){return i.model.has("sticky")&&i.model.get("sticky")===!0}}}),define("notifications/commands/show.notification.command",["require","notifications/commands/notification.command","notifications/utils/notification-state.utils","settings/enums/request/notification.request.enum"],function(i){"use strict";var t=i("notifications/commands/notification.command"),n=i("notifications/utils/notification-state.utils"),e=i("settings/enums/request/notification.request.enum");return t.extend({execute:function(){this.notification.render(),this.shouldShowNotification()?this.showNotification():(!n.isNotificationPersistent(this.notification)||n.isNotificationAlreadyTriggered(this.notification))&&this.notification.remove()},showNotification:function(){var i=this.notification.beforeAttach();i&&i.then?i.then(this.attachNotification.bind(this),this.closeNotification.bind(this)):i===!0?this.attachNotification():this.closeNotification()},attachNotification:function(){this.channel(e.CHANNEL).request(e.ADD_TRIGGERED_NOTIFICATION,this.notification.model),this.notification.attach()},closeNotification:function(){this.notification.close()},shouldShowNotification:function(){return n.isHidden(this.notification)===!1&&n.isNotificationAlreadyTriggered(this.notification)===!1}})}),define("notifications/commands/show-sticky.notification.command",["require","notifications/commands/show.notification.command","notifications/utils/notification-state.utils","notifications/enum/notification.state.enum","settings/enums/request/notification.request.enum","settings/enums/command/notification.command.enum","settings/enums/events/notification.event.enum"],function(i){"use strict";var t=i("notifications/commands/show.notification.command"),n=i("notifications/utils/notification-state.utils"),e=i("notifications/enum/notification.state.enum"),o=i("settings/enums/request/notification.request.enum"),s=i("settings/enums/command/notification.command.enum"),a=i("settings/enums/events/notification.event.enum");return t.extend({attachNotification:function(){n.isFromCache(this.notification)||this.channel(o.CHANNEL).request(o.ADD_TRIGGERED_NOTIFICATION,this.notification.model),this.request("sessionStorage:set","notification-"+this.notification.model.id,e.VISIBLE),this.notification.attach(),this.channel(s.CHANNEL).publish(a.NOTIFICATION_SHOWN,this.notification)},shouldShowNotification:function(){return n.isNotificationNewOrFromCache(this.notification)&&n.isPreviouslyVisibleOrAndNotHidden(this.notification)}})}),define("notifications/commands/close.notification.command",["require","notifications/commands/notification.command","settings/enums/request/notification.request.enum","notifications/enum/notification.state.enum","settings/enums/command/notification.command.enum"],function(i){"use strict";var t=i("notifications/commands/notification.command"),n=i("settings/enums/request/notification.request.enum"),e=i("notifications/enum/notification.state.enum"),o=i("settings/enums/command/notification.command.enum");return t.extend({execute:function(){this.saveNotificationState(),this.removeTriggeredNotification(),this.removeNotification()},removeTriggeredNotification:function(){this.channel(o.CHANNEL).request(n.REMOVE_TRIGGERED_NOTIFICATION,this.notification.model.id)},saveNotificationState:function(){this.notification.model.id&&this.request("sessionStorage:set","notification-"+this.notification.model.id,e.HIDDEN)},removeNotification:function(){this.notification.remove()}})}),define("notifications/commands/close-forever.notification.command",["require","notifications/commands/close.notification.command","notifications/enum/notification.state.enum"],function(i){"use strict";var t=i("notifications/commands/close.notification.command"),n=i("notifications/enum/notification.state.enum");return t.extend({saveNotificationState:function(){var i="notification-"+this.notification.model.id;this.request("sessionStorage:remove",i),this.request("webCache:set",i,n.HIDDEN_FOREVER,this.notification.model.get("time"))}})}),define("notifications/requests/notification.requests",[],function(){"use strict";return{triggeredNotifications:[],isNotificationAlreadyTriggered:function(i){return"undefined"!=typeof this.getTriggeredNotification(i)},getTriggeredNotification:function(i){return this.getTriggeredNotifications().filter(function(t){return t.id===i})[0]},getTriggeredNotifications:function(){return this.getCachedNotifications().concat(this.triggeredNotifications)},getCachedNotifications:function(){var i=void 0;try{i=JSON.parse(Backbone.mediator.request("sessionStorage:get","notifications"))}catch(t){}return i||[]},setTriggeredNotifications:function(i){var t=void 0;i&&(t=_.where(i,{cached:!0}),this.triggeredNotifications=_.where(i,{cached:!1}),Backbone.mediator.request("sessionStorage:set","notifications",JSON.stringify(t)))},addTriggeredNotification:function(i){var t=this.getTriggeredNotifications();i.set("cached",i.get("sticky")),t.push(i.toJSON()),this.setTriggeredNotifications(t)},removeTriggeredNotification:function(i){var t=this.getTriggeredNotifications();t=t.filter(function(t){return t.id!==i}),this.setTriggeredNotifications(t)}}}),define("notifications/views/notification-center/view/notification-center.view",["settings/enums/request/notification.request.enum","settings/enums/events/notification.event.enum","settings/enums/events/navigation.event.enum","settings/enums/events/window.event.enum"],function(){"use strict";var i=require("settings/enums/request/notification.request.enum"),t=require("settings/enums/events/notification.event.enum"),n=require("settings/enums/events/navigation.event.enum"),e=require("settings/enums/events/window.event.enum");return Backbone.View.extend({className:"notification-center",attributes:{"data-notification-center":""},initialize:function(){this.height=0,this.channel(i.CHANNEL).reply(i.GET_HEIGHT,this.getHeight,this),this.channel(t.CHANNEL).subscribe(t.NOTIFICATION_SHOWN,this.adaptCanvasToNotification,this),this.channel(t.CHANNEL).subscribe(t.NOTIFICATION_CLOSED,this.adaptCanvasToNotification,this),this.channel(n.CHANNEL).subscribe(n.SIDE,this.removeNotificationCenterSpacer,this),this.channel(n.CHANNEL).subscribe(n.NAVIGATION_VISIBLE,this.setNotificationOffset,this),this.channel(n.CHANNEL).subscribe(n.NAVIGATION_HIDDEN,this.setNotificationOffset,this),Backbone.mediator.channel(e.CHANNEL).subscribe(e.RESIZE,this.setNotificationOffset,this)},setNotificationOffset:function(i){var t=$("[data-notification-center]"),n=$(".navigation__section-container");"navigation-hidden"===i?t.css("padding-top",n.height()):"navigation-visible"===i&&t.css("padding-top","")},adaptCanvasToNotification:function(){var i=this.$el.parent(".major:eq(0)"),n=$("[data-notification-center-spacer]");0===i.length&&(i=$("body")),0===n.length&&(n=$("<div data-notification-center-spacer></div>"),i.prepend(n)),$(".notification").length>1&&this.$el.addClass("-has-multiple"),this.setHeight(this.calcNotificationHeight()),n.height(this.getHeight()),this.channel(t.CHANNEL).publish(t.NOTIFICATIONS_UPDATED)},getHeight:function(){return this.height},setHeight:function(i){this.height=i},calcNotificationHeight:function(){var i=0;return this.$(".notification").each(function(){i+=$(this).height()}),i},removeNotificationCenterSpacer:function(){$("[data-notification-center-spacer]").remove(),this.channel(t.CHANNEL).publish(t.NOTIFICATIONS_UPDATED)},remove:function(){this.channel(t.CHANNEL).unsubscribe(t.NOTIFICATION_SHOWN,this.adaptCanvasToNotification,this),this.channel(t.CHANNEL).unsubscribe(t.NOTIFICATION_CLOSED,this.adaptCanvasToNotification,this),this.channel(n.CHANNEL).unsubscribe(n.SIDE,this.removeNotificationCenterSpacer,this),this.channel(n.CHANNEL).unsubscribe(n.NAVIGATION_VISIBLE,this.setNotificationOffset,this),this.channel(n.CHANNEL).unsubscribe(n.NAVIGATION_HIDDEN,this.setNotificationOffset,this),Backbone.View.prototype.remove.call(this)}})}),define("notifications/service/notification.service",["require","settings/enums/command/notification.command.enum","settings/enums/request/notification.request.enum","notifications/assembler/notification.assembler","notifications/commands/show-sticky.notification.command","notifications/commands/show.notification.command","notifications/commands/close.notification.command","notifications/commands/close-forever.notification.command","notifications/requests/notification.requests","notifications/views/notification-center/view/notification-center.view","notifications/enum/notification.type.enum"],function(i){"use strict";var t=i("settings/enums/command/notification.command.enum"),n=i("settings/enums/request/notification.request.enum"),e=i("notifications/assembler/notification.assembler"),o=i("notifications/commands/show-sticky.notification.command"),s=i("notifications/commands/show.notification.command"),a=i("notifications/commands/close.notification.command"),c=i("notifications/commands/close-forever.notification.command"),r=i("notifications/requests/notification.requests"),f=i("notifications/views/notification-center/view/notification-center.view"),u=i("notifications/enum/notification.type.enum"),p=function(){this.initialize()};return _.extend(p.prototype,{initialize:function(){this.createNotificationCenter(),this.setupRequests(),this.setupCommands()},setupRequests:function(){this.channel(t.CHANNEL).reply(n.IS_ALREADY_TRIGGERED,r.isNotificationAlreadyTriggered,r),this.channel(t.CHANNEL).reply(n.GET_TRIGGERED_NOTIFICATIONS,r.getTriggeredNotifications,r),this.channel(t.CHANNEL).reply(n.ADD_TRIGGERED_NOTIFICATION,r.addTriggeredNotification,r),this.channel(t.CHANNEL).reply(n.REMOVE_TRIGGERED_NOTIFICATION,r.removeTriggeredNotification,r)},setupCommands:function(){this.channel(t.CHANNEL).comply(t.SHOW,this.createNotification,this),this.channel(t.CHANNEL).comply(t.SHOW_POPUP_NOTIFICATION,this.showPopupNotification,this),this.channel(t.CHANNEL).comply(t.SHOW_PAGE_NOTIFICATION,this.showPageNotification,this),this.channel(t.CHANNEL).comply(t.SHOW_NAVIGATION_NOTIFICATION,this.showNavigationNotification,this),this.channel(t.CHANNEL).comply(t.SHOW_CACHED,this.showCachedNotifications,this),this.channel(t.CHANNEL).comply(t.CLOSE,this.closeNotification,this),this.channel(t.CHANNEL).comply(t.CLOSE_FOREVER,this.closeForeverNotification,this)},createNotificationCenter:function(){var i=$(".major");0===i.length&&(i=$("body")),i.prepend((new f).el)},showCachedNotifications:function(){var i=this.channel(t.CHANNEL).request(n.GET_TRIGGERED_NOTIFICATIONS);_.each(i,function(i){this.createNotification(i)}.bind(this))},createNotification:function(i){var t=e.create(i);if(!t.model.get("maxNotificationNumber")&&!t.model.get("properties.maxNotificationNumber")||(this.initMaxNotification(t),!this.hasExceededMaxNotification(t.model))){var n=this.isNotificationSticky(t)?o:s,a=new n({notification:t});a.execute()}},showPopupNotification:function(i){this.showNotificationWithType(u.POPUP_NOTIFICATION,i)},initMaxNotification:function(i){i.model.get("maxNotificationNumber")&&i.model.set({"properties.maxNotificationNumber":i.model.get("maxNotificationNumber"),"properties.maxNotificationId":i.model.get("maxNotificationId")},{silent:!0}),this.setNotificationCookie(i.model)},hasExceededMaxNotification:function(i){return i.get("properties.maxNotificationNumber")>0&&this.isMaxNotified(i)},setNotificationCookie:function(i){if("number"==typeof i.get("properties.maxNotificationNumber")){var t=this.getTimesNotified(i),n=i.get("properties.maxNotificationId");Backbone.mediator.request("webCache:set",n,t+1,10080)}},isMaxNotified:function(i){var t=this.getTimesNotified(i),n=i.get("properties.maxNotificationNumber");return t>n},getTimesNotified:function(i){var t=Backbone.mediator.request("webCache:get",i.get("properties.maxNotificationId"));return parseInt(t,10)||0},showPageNotification:function(i){this.showNotificationWithType(u.PAGE_NOTIFICATION,i)},showNavigationNotification:function(i){this.showNotificationWithType(u.NAVIGATION_NOTIFICATION,i)},showNotificationWithType:function(i){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.type=t.type||i,this.createNotification(t)},closeNotification:function(i){var t=new a({notification:i});t.execute()},closeForeverNotification:function(i){var t=new c({notification:i});t.execute()},isNotificationSticky:function(i){return i.model.has("sticky")&&i.model.get("sticky")===!0}},Backbone.decorators.Command,Backbone.decorators.RequestResponse),new p}),define("notifications/router",[],function(){"use strict";var i=Backbone.SubRoute.extend({demo:function(){console.log("Demo route triggered")}});return _.extend(i.prototype,Backbone.decorators.RequestResponse),i}),define("ecommerce-ah-online-notifications",["require","css!css-notifications","notifications/plugins/plugins","notifications/service/notification.service","notifications/router"],function(i){"use strict";i("css!css-notifications"),i("notifications/plugins/plugins"),i("notifications/service/notification.service");var t=i("notifications/router");return new t(null,{routes:Backbone.mediator.request("env:notifications","routes")})}),requirejs.config({paths:{"ecommerce-ah-online-settings":"/_js/ah-online/ecommerce-ah-online-settings.min","ecommerce-ah-online-notifications":"notifications/module",translation:"../i18n",environment:"../env","css-notifications":"../_ui/ecommerce-ah-online-notifications.min"},shim:{"ecommerce-ah-online-notifications":{deps:["ecommerce-ah-online-settings"]}}}),require(["ecommerce-ah-online-notifications"],function(){"use strict"}),define("config",function(){});