function _defineProperty(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}define("text!environment/dev/navigation.json",[],function(){return'{\n    "id": "navigation",\n    "routes": {\n    },\n    "urls": {\n        "navigationService": "/_data/navigation.json",\n        "search": "/zoeken"\n    }\n}\n'}),define("text!environment/prod/navigation.json",[],function(){return'{\n    "id": "navigation",\n    "routes": {\n    },\n    "urls": {\n        "search": "/zoeken"\n    }\n}\n'}),define("navigation/plugins/environment-plugins",["settings/plugins/environment-plugins.main","text!environment/dev/navigation.json","text!environment/prod/navigation.json"],function(){"use strict";var e=require("settings/plugins/environment-plugins.main");return new e.Model($.parseJSON(require("text!environment/"+e.environment+"/navigation.json")))}),define("text!translation/nl-NL/navigation.json",[],function(){return'{\n    "navigation": {\n        "logo": {\n            "slogan": "Gewoon bij Albert Heijn"\n        },\n        "checkout": {\n            "price": "Subtotaal",\n            "bonus": "Bonusvoordeel"\n        },\n        "notification": {\n            "nocurrentorder": "Je hebt momenteel geen openstaande bestellingen.",\n            "showonce": "Deze melding niet meer tonen",\n            "currentorder": {\n                "title": "Zeker weten wat je online kunt bestellen? Kies dan eerst je bezorgmoment."\n            },\n            "cookiebar": "Deze website maakt gebruik van cookies. Door je bezoek ga je akkoord met het plaatsen van deze cookies. <a href=\\"/privacy\\" class=\\"link--2 link-color--primair-min4\\">Lees hier meer</a>."\n        },\n        "side": {\n            "error": {\n                "header": "Werk aan de winkel",\n                "body": "Er is helaas een storing op AH.nl. Wij werken hard aan een oplossing."\n            }\n        },\n        "top": {\n            "error": {\n                "body": "Er is helaas een storing op AH.nl"\n            }\n        },\n        "closeSearch": "Sluiten"\n    }\n}\n'}),define("text!translation/nl-BE/navigation.json",[],function(){return'{\n    "navigation": {\n        "logo": {\n            "slogan": "Albert Heijn BelgiÃ«"\n        },\n        "side": {\n            "error": {\n                "body": "Er is helaas een storing op AH.be. Wij werken hard aan een oplossing."\n            }\n        },\n        "top": {\n            "error": {\n                "body": "Er is helaas een storing op AH.be"\n            }\n        }\n    }\n}\n'}),define("navigation/plugins/localisation-plugins",["text!translation/nl-NL/navigation.json","text!translation/nl-BE/navigation.json"],function(){"use strict";return Backbone.mediator.request("i18n:add","text!translation/nl-NL/navigation.json"),Backbone.mediator.request("i18n:add","text!translation/nl-BE/navigation.json"),null}),define("navigation/plugins/plugins",["navigation/plugins/environment-plugins","navigation/plugins/localisation-plugins"],function(){"use strict";return null}),define("navigation/main/enums/section.enum",[],function(){"use strict";return{COMMON:"common",HOME:"home",PERSONAL:"personal",SEARCH:"search",SECONDARY:"secondary",SHOPPING:"shopping",SHOPPING2:"shopping2",ALLERHANDE:"allerhande",SERVICE:"service",ABOUT:"about",SOCIAL:"social",CORPORATE_INFORMATION:"corporate-information",NOTICE:"notice"}}),define("navigation/main/views/section/components/title/view/section.title.view",[],function(){"use strict";return Backbone.View.extend({tagName:"h2",persistentClassName:"navigation-section__title",className:function(){return"ah-online-icon icon--"+this.model.id.toLowerCase()},attributes:{"data-toggle-section":""},render:function(){return this.getTitle(),Backbone.View.prototype.render.call(this)},getTitle:function(){var e="",n=this.model.get("legend");"personal"===this.model.get("id")&&this.model.sections.filter(function(i){"loginPopup"===i.id&&("inloggen"!==i.get("navItem.title")?(e=i.get("navItem.title").split(" ")[0],n="van "+e):n="inloggen")}),this.$el.text(n).wrapInner('<span class="navigation-section__title-inner"></span>')}})}),define("navigation/main/views/section/components/title/view/doormat.section.title.view",[],function(){"use strict";return Backbone.View.extend({tagName:"h3",className:"doormat-section__section-title heading--10 heading--strong",render:function(){return this.$el.text(this.model.get("legend")),this}})}),define("navigation/main/views/section/factory/section.title.factory",["navigation/main/enums/section.enum","settings/components/factory/model/factory.model","navigation/main/views/section/components/title/view/section.title.view","navigation/main/views/section/components/title/view/doormat.section.title.view"],function(){"use strict";var e=require("navigation/main/enums/section.enum"),n=require("settings/components/factory/model/factory.model"),i=require("navigation/main/views/section/components/title/view/section.title.view"),t=require("navigation/main/views/section/components/title/view/doormat.section.title.view"),o=void 0;return o=new n,o.set(e.SHOPPING2,t),o.set(e.ALLERHANDE,t),o.set(e.SERVICE,t),o.set(e.ABOUT,t),o.set(o.DEFAULT,i),o}),define("navigation/main/views/section/assembler/section.title.assembler",["require","navigation/main/views/section/factory/section.title.factory"],function(e){"use strict";var n=e("navigation/main/views/section/factory/section.title.factory");return{create:function(e){var i=n.getView(e.id);return new i({model:e})}}}),define("navigation/main/enums/section.link.enum",[],function(){"use strict";return{LOGIN:"login",LOGIN_POPUP:"loginPopup",SHOPPING_LIST:"shoppinglist",SHOPPING_LIST_DRAWER:"shoppinglistDrawer",CURRENT_ORDER:"currentOrder",CHECKOUT:"checkout",ALCOHOL:"alcohol",THUISWINKEL:"thuiswinkel"}}),define("navigation/main/views/section/components/link/view/section.link.view",["require","settings/components/link/factory/link.view.factory","settings/components/link/enums/link.type.enum","settings/components/link/assembler/link.assembler","class-name-builder"],function(e){"use strict";var n=e("settings/components/link/factory/link.view.factory"),i=e("settings/components/link/enums/link.type.enum"),t=e("settings/components/link/assembler/link.assembler"),o=n.getView(i.LINK_CLICK_VIEW),s=e("class-name-builder");return o.extend({persistentClassName:"navigation-section__link",icon:!0,className:function(){var e=this.model.id.toLowerCase();return s.create().always("link--2 navigation-section__link--"+e)["if"](this.icon,"navigation-section__link--left-icon ah-online-icon icon--"+e).toString()},createLinkModel:function(){var e=t.createLinkModelFromNavItem(this.model.get("navItem"));return e.set({id:this.model.id,testHookId:"navigation-"+this.model.id}),e},getLinkModel:function(){return this.linkModel||(this.linkModel=this.createLinkModel()),this.linkModel}})}),define("navigation/main/views/section/components/link/view/section.login.link.view",["require","navigation/main/views/section/components/link/view/section.link.view","settings/enums/events/window.event.enum"],function(e){"use strict";var n=e("navigation/main/views/section/components/link/view/section.link.view"),i=e("settings/enums/events/window.event.enum");return n.extend({subscriptions:function(){return _defineProperty({},i.CHANNEL,_defineProperty({},i.PAGE_RENDER_COMPLETE,"setLoginRefUrl"))},initialize:function(){n.prototype.initialize.apply(this,arguments),this.setLoginRefUrl()},setLoginRefUrl:function(){var e=encodeURI(window.location.pathname),n=this.replaceUrlParam(this.model.get("navItem.link.href"),"ref",e);this.getLinkModel().set("navItem.link.href",n),this.el.setAttribute("href",n)},replaceUrlParam:function(e,n,i){var t=new RegExp("("+n+"=).*?(&|$)"),o=e;return o=e.search(t)>=0?e.replace(t,"$1"+i+"$2"):""+o+(o.indexOf("?")>0?"&":"?")+n+"="+i}})}),define("navigation/main/views/section/components/link/view/section.login-popup.link.view",["require","navigation/main/views/section/components/link/view/section.link.view","settings/views/react/login-or-sign-up-modal/view/login-or-sign-up-modal.reactive-element.view","class-name-builder","settings/components/link/assembler/link.assembler"],function(e){"use strict";var n=e("navigation/main/views/section/components/link/view/section.link.view"),i=e("settings/views/react/login-or-sign-up-modal/view/login-or-sign-up-modal.reactive-element.view"),t=e("class-name-builder"),o=e("settings/components/link/assembler/link.assembler");return n.extend({doNotPreventDefault:!0,className:function(){return t.create().always("link--2 navigation-section__link--login").always("navigation-section__link--left-icon ah-online-icon icon--login").toString()},createLinkModel:function(){var e=o.createLinkModelFromNavItem(this.model.get("navItem"));return e.set({id:this.model.id,testHookId:"navigation-login"}),e},onClick:function(e){this.model.get("navItem.properties.loggedIn")||(e.preventDefault(),this.appendLoginOrSignUpModal())},appendLoginOrSignUpModal:function(){this.modal=new i,document.body.appendChild(this.modal.el)}})}),define("navigation/main/animations/navigation.quantity.animation",[],function(){"use strict";return{animationQuantity:function(e,n){require(["greensock"],function(){var i=new TimelineLite;i.to(e,.3,{scale:.5,ease:Back.easeIn,onComplete:function(){return"function"==typeof n?n():void 0}}).to(e,.3,{scale:1,ease:Back.easeIn})})}}}),define("navigation/main/views/section/components/link/view/section.shopping-list.view",["require","settings/components/link/factory/link.view.factory","settings/components/link/enums/link.type.enum","settings/model/shopping-context.model","settings/enums/events/meta.event.enum","settings/enums/events/navigation.event.enum","navigation/main/animations/navigation.quantity.animation","class-name-builder"],function(e){"use strict";var n=e("settings/components/link/factory/link.view.factory"),i=e("settings/components/link/enums/link.type.enum"),t=n.getView(i.LINK_CLICK_VIEW),o=e("settings/model/shopping-context.model"),s=e("settings/enums/events/meta.event.enum"),a=e("settings/enums/events/navigation.event.enum"),r=e("navigation/main/animations/navigation.quantity.animation"),c=e("class-name-builder");return t.extend({persistentClassName:"navigation-section__button",className:function(){var e=this.model.id.toLowerCase();return c.create().always("navigation-section__button--"+e).always("button--1 button-color-blue--1 button--chevron").always("ah-online-icon icon--"+this.getShoppingTypeIcon()).toString()},initialize:function(){Backbone.View.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.onRenderComplete),this.listenTo(this.model,"change",_.debounce(this.determineChange.bind(this),250)),this.channel(s.CHANNEL).subscribe(s.SHOPPINGLIST,this.handleShoppingListMeta,this),Backbone.mediator.subscribe("navigation:shopping-changed",this.onShoppingChanged,this)},onRenderComplete:function(){this.oldQuantity=this.model.previous("navItem.properties.quantity"),this.$quantity=this.$(".navigation__shopping-quantity")},getShoppingTypeIcon:function(){switch(this.model.get("navItem.properties.shoppingType")){case o.shoppingTypes.PHYSICAL_STORE:case o.shoppingTypes.SPECIALS_ONLY:return"store";case o.shoppingTypes.PICKUP:case o.shoppingTypes.IN_STORE_PICK:return"pickup";case o.shoppingTypes.DELIVERY:case o.shoppingTypes.DELIVERY_POINT:return"delivery";default:return"shoppinglist"}},handleShoppingListMeta:function(e){var n=void 0;(e.itemCount>=0||e.itemsInOrderCount>=0)&&(n=e.itemsInOrderCount||e.itemCount,this.model.set("navItem.properties.quantity",n))},onShoppingChanged:function(e){e?this.url=e:this.url=this.model._links.self.href,this.model.fetch({url:this.url})},determineChange:function(){this.newQuantity=this.model.get("navItem.properties.quantity"),this.$quantity&&this.oldQuantity!==this.newQuantity&&(this.transitionQuantity(),this.channel(a.CHANNEL).publish(a.QUANTITY_CHANGED,this.newQuantity))},transitionQuantity:function(){r.animationQuantity(this.$quantity,this.updatedQuantity.bind(this))},updatedQuantity:function(){this.$quantity.html(this.newQuantity)},remove:function(){this.channel(s.CHANNEL).unsubscribe(s.SHOPPINGLIST,this.handleShoppingListMeta,this),Backbone.View.prototype.remove.apply(this,arguments)}})}),define("dst!navigation/main/views/section/components/link/template/section.shopping-list.link.view.dust",["dust"],function(e){return function(){function n(e,n){return e.w("<a>").f(n.get(["title"],!1),n,"h").w('<span class="navigation__shopping-quantity paragraph--3 paragraph--strong" ').h("testHook",n,{block:i},{}).w(">").f(n.get(["quantity"],!1),n,"h").w("</span></a>")}function i(e,n){return e.w("shoppinglist_quantity").f(n.get(["id"],!1),n,"h")}return e.register("navigation/main/views/section/components/link/template/section.shopping-list.link.view.dust",n),n.__dustBody=!0,i.__dustBody=!0,n}(),function(n,i){return e.render("navigation/main/views/section/components/link/template/section.shopping-list.link.view.dust",n,i)}}),define("navigation/main/views/section/components/link/view/section.shopping-list.link.view",["require","settings/components/link/assembler/link.assembler","navigation/main/views/section/components/link/view/section.shopping-list.view","dst!navigation/main/views/section/components/link/template/section.shopping-list.link.view.dust"],function(e){"use strict";var n=e("settings/components/link/assembler/link.assembler"),i=e("navigation/main/views/section/components/link/view/section.shopping-list.view");return i.extend({tagName:"a",template:e("dst!navigation/main/views/section/components/link/template/section.shopping-list.link.view.dust"),createLinkModel:function(){var e=n.createLinkModelFromNavItem(this.model.get("navItem"));return e.set({id:this.model.id,testHookId:"navigation-"+this.model.id,quantity:this.model.get("navItem").properties.quantity,shoppingTypeIcon:this.getShoppingTypeIcon()}),e},getLinkModel:function(){return this.linkModel||(this.linkModel=this.createLinkModel()),this.linkModel}})}),define("navigation/main/enums/buttonstate.classname.enum",[],function(){"use strict";return{ACTIVE_COLOR:"button-color-white--1",INACTIVE_COLOR:"button-color-blue--1",ACTIVATED:"-active"}}),define("navigation/utils/navigation.utils",[],function(){"use strict";return{linkEqualsWindowLocation:function(e){return e?(e=this.linkEscapeSlashes(e),this.linkLookAheadSlashOrNothing(e,window.location.pathname)):!1},isAllerhande:function(){return"undefined"!=typeof window.Allerhande},linkEscapeSlashes:function(e){return e.replace(/\//g,"\\/")},linkLookAheadSlashOrNothing:function(e,n){var i=new RegExp(e+"(?=/|$)","g");return i.test(n)}}}),define("dst!navigation/main/views/section/components/link/template/section.shopping-list-drawer.button.view.dust",["dust"],function(e){return function(){function n(e,n){return e.w("<button>").f(n.get(["title"],!1),n,"h").w('<span class="navigation__shopping-quantity paragraph--3 paragraph--strong">').f(n.get(["quantity"],!1),n,"h").w("</span></button>")}return e.register("navigation/main/views/section/components/link/template/section.shopping-list-drawer.button.view.dust",n),n.__dustBody=!0,n}(),function(n,i){return e.render("navigation/main/views/section/components/link/template/section.shopping-list-drawer.button.view.dust",n,i)}}),define("navigation/main/views/section/components/link/view/section.shopping-list-drawer.button.view",["require","settings/enums/command/shoppinglist.command.enum","settings/enums/request/application.request.enum","settings/enums/command/router.command.enum","settings/enums/events/shoppinglist.event.enum","settings/enums/channel.enum","navigation/main/enums/buttonstate.classname.enum","navigation/utils/navigation.utils","navigation/main/views/section/components/link/view/section.shopping-list.view","dst!navigation/main/views/section/components/link/template/section.shopping-list-drawer.button.view.dust"],function(e){"use strict";var n=e("settings/enums/command/shoppinglist.command.enum"),i=e("settings/enums/request/application.request.enum"),t=e("settings/enums/command/router.command.enum"),o=e("settings/enums/events/shoppinglist.event.enum"),s=e("settings/enums/channel.enum"),a=e("navigation/main/enums/buttonstate.classname.enum"),r=e("navigation/utils/navigation.utils"),c=e("navigation/main/views/section/components/link/view/section.shopping-list.view");return c.extend({tagName:"button",template:e("dst!navigation/main/views/section/components/link/template/section.shopping-list-drawer.button.view.dust"),events:{click:"toggleDrawer"},initialize:function(){c.prototype.initialize.apply(this,arguments),this.url=this.model.get("navItem").link.href,this.channel(o.CHANNEL).subscribe(o.DRAWER_OPENED,this.addButtonActiveClass,this),this.channel(o.CHANNEL).subscribe(o.DRAWER_CLOSED,this.removeButtonActiveClass,this),this.setButtonActiveState()},getTemplateData:function(){return{title:this.model.get("navItem").title,quantity:this.model.get("navItem").properties.quantity,shoppingTypeIcon:this.getShoppingTypeIcon()}},setButtonActiveState:function(){r.linkEqualsWindowLocation(this.url)?this.addButtonActiveClass():this.removeButtonActiveClass()},toggleDrawer:function(){this.channel(i.CHANNEL).request(i.IS_LEGACY_PAGE||r.isAllerhande())?this.channel(s.ROUTER).command(t.NAVIGATE,this.url,{trigger:!0,replace:!0}):r.linkEqualsWindowLocation(this.url)||this.channel(n.CHANNEL).command(n.TOGGLE_DRAWER)},addButtonActiveClass:function(){this.$el.switchClass(a.INACTIVE_COLOR,a.ACTIVE_COLOR),this.$el.addClass(a.ACTIVATED)},removeButtonActiveClass:function(){this.$el.switchClass(a.ACTIVE_COLOR,a.INACTIVE_COLOR),this.$el.removeClass(a.ACTIVATED)},remove:function(){this.channel(o.CHANNEL).unsubscribe(o.DRAWER_OPENED,this.addButtonActiveClass,this),this.channel(o.CHANNEL).unsubscribe(o.DRAWER_CLOSED,this.removeButtonActiveClass,this),c.prototype.remove.apply(this,arguments)}})}),define("navigation/main/views/section/components/link/view/section.current-order.link.view",["require","navigation/main/views/section/components/link/view/section.link.view","settings/enums/events/navigation.event.enum","settings/enums/command/notification.command.enum"],function(e){"use strict";var n=e("navigation/main/views/section/components/link/view/section.link.view"),i=e("settings/enums/events/navigation.event.enum"),t=e("settings/enums/command/notification.command.enum");return n.extend({persistentClassName:"navigation-section__button",className:function(){var e=this.model.id.toLowerCase();return"ah-online-icon icon--"+e+" button--1 button-color-chocolade button--chevron navigation-section__button--"+e},subscriptions:{},constructor:function(){this.subscriptions[i.CHANNEL]={},this.subscriptions[i.CHANNEL][i.QUANTITY_CHANGED]="notifyAboutFiveItems",n.prototype.constructor.apply(this,arguments)},notifyAboutFiveItems:function(e){e>=5&&(this.notification=this.channel("notification").command(t.SHOW,{type:"CurrentOrderNotification",sticky:!0,id:"currentOrder-notify-five-items",rel:"currentorder",navItem:{id:"currentOrder-notify-five-items",title:Backbone.mediator.request("i18n:get","navigation.notification.currentorder.title"),link:{href:"/bestellen"}},displayType:"alert"}))}})}),define("navigation/main/views/section/components/checkout/view/checkout.price.view.js",["require","settings/enums/events/navigation.event.enum","settings/components/display/price/view/price.view"],function(e){"use strict";var n=e("settings/enums/events/navigation.event.enum"),i=e("settings/components/display/price/view/price.view");return i.extend({className:"price heading--strong",pricePath:"navItem.properties.subtotalPrice",initialize:function(){this.channel(n.CHANNEL).subscribe(n.PRICE_CHANGED,this.render,this),i.prototype.initialize.apply(this,arguments)},remove:function(){this.channel(n.CHANNEL).unsubscribe(n.PRICE_CHANGED,this.render,this),i.prototype.remove.apply(this,arguments)}})}),define("navigation/main/views/section/components/checkout/view/checkout.bonus.view.js",["require","settings/enums/events/navigation.event.enum","settings/components/display/price/view/price.view"],function(e){"use strict";var n=e("settings/enums/events/navigation.event.enum"),i=e("settings/components/display/price/view/price.view");return i.extend({className:"price heading--strong",pricePath:"navItem.properties.bonus",bonus:!0,initialize:function(){this.channel(n.CHANNEL).subscribe(n.PRICE_CHANGED,this.render,this),i.prototype.initialize.apply(this,arguments)},remove:function(){this.channel(n.CHANNEL).unsubscribe(n.PRICE_CHANGED,this.render,this),i.prototype.remove.apply(this,arguments)}})}),define("navigation/main/animations/navigation.price.animation",["settings/utils/breakpoints"],function(){"use strict";var e=require("settings/utils/breakpoints"),n=void 0,i=void 0,t=void 0,o=void 0,s=1,a=function(){return"undefined"!=typeof n},r=function(){n.to(i.$checkout,.3*s,{opacity:1}).to(i.$navigationSectionShopping,.3*s,{right:0,ease:Back.easeOut},0).to([i.$navigationSectionHome],.1*s,{opacity:.3},.1*s).to([i.$navigationSectionPersonal],.1*s,{opacity:0},0)},c=function(){window.clearTimeout(t),t=window.setTimeout(function(){n.reverse(),i.$navigationSectionShopping.find(".icon--delivery").removeClass("-reverse")},2e3)},l=function(){o=!1,i.$navigationSectionCheckout.css("display","none"),i.$navigationSectionShopping.css("right",0)},u=function(){i.$navigationSectionCheckout.css("display","inline-block"),o||(o=!0,i.$navigationSectionShopping.css("right",-i.$navigationSectionCheckout.outerWidth(!0)).find(".icon--delivery").addClass("-reverse"))},m=function(e){var n=e.$checkoutElement,t=n.parents(".navigation-section--shopping"),o=t.find(".navigation-section__list-item--checkout"),s=t.siblings(".navigation-section--home"),a=t.siblings(".navigation-section--personal");i={$checkout:n,$navigationSectionShopping:t,$navigationSectionCheckout:o,$navigationSectionHome:s,$navigationSectionPersonal:a}},v=function(e,n){return e&&n.$bonusElement.hasClass("-hidden")||!e&&!n.$bonusElement.hasClass("-hidden")},h=function(e){var n=0!==e.bonusValue;v(n,e)&&TweenLite.fromTo(e.$bonusElement,n?0:.1,{height:n?0:32,opacity:n?0:1},{height:n?32:0,opacity:n?1:0,onComplete:function(){e.$bonusElement.toggleClass("-hidden")}})},d=function(e){var n=void 0;return n=e.bonusAmountDifference>0&&e.subtotalAmountDifference>0?e.$bonusPriceElement.add(e.$subtotalPriceElement):e.bonusAmountDifference>0?e.$bonusPriceElement:e.subtotalAmountDifference>0?e.$subtotalPriceElement:!1},g=function(e,n){var i=d(e),t=void 0;return i?(t=new TimelineLite,void t.to(i,.3,{transform:"rotateX(270deg)",scale:.8,onComplete:function(){n()}.bind(this)}).to(i,.1,{transform:"rotateX(360deg)",scale:1})):n()},p=function(e){a()||(n=new TimelineLite({onComplete:c,onReverseComplete:l}),n.stop(),m(e),r())},w=function(i){(e.isPhone()||e.isPhablet())&&(p(i),u(),n.play())};return{animatePrice:function(e,n){require(["greensock"],function(){w(e),h(e),g(e,n)})}}}),define("dst!navigation/main/views/section/components/checkout/template/checkout.view.dust",["dust"],function(e){return function(){function n(e,n){return e.w('<div class="navigation__checkout-summary"><div class="navigation__checkout-summary__item navigation__checkout-summary__item-bonus paragraph--1 paragraph--strong heading--responsive-height color-bonus').h("if",n,{block:i},{cond:t}).w('"><span data-bonus="" class="navigation__checkout-summary__price"></span><span class="navigation__checkout-summary__label">').h("i18n",n,{block:o},{}).w('</span></div><div class="navigation__checkout-summary__item navigation__checkout-summary__item-price paragraph--1 paragraph--strong heading--responsive-height color-drop"><span data-price="" class="navigation__checkout-summary__price"></span><span class="navigation__checkout-summary__label">').h("i18n",n,{block:s},{}).w("</span></div></div>")}function i(e,n){return e.w(" -hidden")}function t(e,n){return e.w("'").f(n.getPath(!1,["navItem","properties","bonus"]),n,"h").w("' == 0")}function o(e,n){return e.w("navigation.checkout.bonus")}function s(e,n){return e.w("navigation.checkout.price")}return e.register("navigation/main/views/section/components/checkout/template/checkout.view.dust",n),n.__dustBody=!0,i.__dustBody=!0,t.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,n}(),function(n,i){return e.render("navigation/main/views/section/components/checkout/template/checkout.view.dust",n,i)}}),define("navigation/main/views/section/components/checkout/view/checkout.view",["require","navigation/main/views/section/components/checkout/view/checkout.price.view.js","navigation/main/views/section/components/checkout/view/checkout.bonus.view.js","settings/enums/events/meta.event.enum","settings/enums/events/navigation.event.enum","navigation/main/animations/navigation.price.animation","dst!navigation/main/views/section/components/checkout/template/checkout.view.dust"],function(e){"use strict";var n=e("navigation/main/views/section/components/checkout/view/checkout.price.view.js"),i=e("navigation/main/views/section/components/checkout/view/checkout.bonus.view.js"),t=e("settings/enums/events/meta.event.enum"),o=e("settings/enums/events/navigation.event.enum"),s=e("navigation/main/animations/navigation.price.animation");return Backbone.View.extend({template:e("dst!navigation/main/views/section/components/checkout/template/checkout.view.dust"),className:"navigation__checkout-summary",$bonus:null,initialize:function(){this.model&&(this.listenTo(this,"render-complete",this.onRenderComplete),this.listenTo(this.model,"change:navItem.properties.bonus",this.onPriceChange.bind(this)),this.listenTo(this.model,"change:navItem.properties.subtotalPrice",this.onPriceChange.bind(this)),this.channel(t.CHANNEL).subscribe(t.SHOPPINGLIST,this.handleShoppingListMeta,this),Backbone.mediator.subscribe("navigation:shopping-changed",this.onShoppingChanged,this))},onRenderComplete:function(){this.$totalPrice=this.$("[data-price]"),this.$bonusPrice=this.$("[data-bonus]"),this.$bonusItem=this.$(".navigation__checkout-summary__item-bonus"),this.append(new n({model:this.model,region:this.$totalPrice})),this.append(new i({model:this.model,region:this.$bonusPrice}))},handleShoppingListMeta:function(e){this.model.set("navItem.properties.bonus",e.totalBonusDiscount),this.model.set("navItem.properties.subtotalPrice",e.subtotalPrice)},onShoppingChanged:function(e){e?this.url=e:this.url=this.model._links.self.href,this.model.fetch({url:this.url})},onPriceChange:function(){var e={bonusAmountDifference:this.model.get("navItem.properties.bonus")-this.model.previous("navItem.properties.bonus"),subtotalAmountDifference:this.model.get("navItem.properties.subtotalPrice")-this.model.previous("navItem.properties.subtotalPrice"),bonusValue:this.model.get("navItem.properties.bonus"),$checkoutElement:this.$el,$bonusElement:this.$bonusItem,$bonusPriceElement:this.$bonusPrice,$subtotalPriceElement:this.$totalPrice};s.animatePrice(e,this.updatePrice.bind(this))},updatePrice:function(){this.channel(o.CHANNEL).publish(o.PRICE_CHANGED,this)},remove:function(){this.channel(t.CHANNEL).unsubscribe(t.SHOPPINGLIST,this.handleShoppingListMeta,this),Backbone.View.prototype.remove.apply(this,arguments)}})}),define("navigation/main/views/section/components/link/view/section.checkout.link.view",["require","navigation/main/views/section/components/link/view/section.link.view","navigation/main/views/section/components/checkout/view/checkout.view"],function(e){"use strict";var n=e("navigation/main/views/section/components/link/view/section.link.view"),i=e("navigation/main/views/section/components/checkout/view/checkout.view");return n.extend({icon:!1,initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.appendCheckout)},appendCheckout:function(){this.model.get("navItem")&&this.append(new i({model:this.model}))},render:function(){return Backbone.View.prototype.render.apply(this,arguments)}})}),define("dst!navigation/main/views/section/components/link/template/section.alcohol.link.view.dust",["dust"],function(e){return function(){function n(e,n){return e.w('<a><span class="link-notice__image"></span><span class="link-notice__text">').f(n.get(["title"],!1),n,"h").f(n.getPath(!1,["navItem","title"]),n,"h").w("</span></a>")}return e.register("navigation/main/views/section/components/link/template/section.alcohol.link.view.dust",n),n.__dustBody=!0,n}(),function(n,i){return e.render("navigation/main/views/section/components/link/template/section.alcohol.link.view.dust",n,i)}}),define("navigation/main/views/section/components/link/view/section.alcohol.link.view",["require","navigation/main/views/section/components/link/view/section.link.view","class-name-builder","dst!navigation/main/views/section/components/link/template/section.alcohol.link.view.dust"],function(e){"use strict";var n=e("navigation/main/views/section/components/link/view/section.link.view"),i=e("class-name-builder");return n.extend({persistentClassName:"link-notice",className:function(){return i.create().always(n.prototype.className.call(this)).always("link-notice--alcohol paragraph--3 link--2 link-color-brown--3").toString()},template:e("dst!navigation/main/views/section/components/link/template/section.alcohol.link.view.dust")})}),define("dst!navigation/main/views/section/components/link/template/section.thuiswinkel.link.view.dust",["dust"],function(e){return function(){function n(e,n){return e.w('<a><span class="link-notice__image"></span><span class="link-notice__text">').f(n.get(["title"],!1),n,"h").f(n.getPath(!1,["navItem","title"]),n,"h").w("</span></a>")}return e.register("navigation/main/views/section/components/link/template/section.thuiswinkel.link.view.dust",n),n.__dustBody=!0,n}(),function(n,i){return e.render("navigation/main/views/section/components/link/template/section.thuiswinkel.link.view.dust",n,i)}}),define("navigation/main/views/section/components/link/view/section.thuiswinkel.link.view",["require","navigation/main/views/section/components/link/view/section.link.view","dst!navigation/main/views/section/components/link/template/section.thuiswinkel.link.view.dust"],function(e){"use strict";var n=e("navigation/main/views/section/components/link/view/section.link.view");return n.extend({persistentClassName:"link-notice",className:function(){return"link-notice--thuiswinkel paragraph--3 link--2 link-color-brown--3"},template:e("dst!navigation/main/views/section/components/link/template/section.thuiswinkel.link.view.dust")})}),define("navigation/main/views/section/factory/section.link.factory",["navigation/main/enums/section.link.enum","settings/components/factory/model/factory.model","navigation/main/views/section/components/link/view/section.link.view","navigation/main/views/section/components/link/view/section.login.link.view","navigation/main/views/section/components/link/view/section.login-popup.link.view","navigation/main/views/section/components/link/view/section.shopping-list.link.view","navigation/main/views/section/components/link/view/section.shopping-list-drawer.button.view","navigation/main/views/section/components/link/view/section.current-order.link.view","navigation/main/views/section/components/link/view/section.checkout.link.view","navigation/main/views/section/components/link/view/section.alcohol.link.view","navigation/main/views/section/components/link/view/section.thuiswinkel.link.view"],function(){"use strict";var e=require("navigation/main/enums/section.link.enum"),n=require("settings/components/factory/model/factory.model"),i=require("navigation/main/views/section/components/link/view/section.link.view"),t=require("navigation/main/views/section/components/link/view/section.login.link.view"),o=require("navigation/main/views/section/components/link/view/section.login-popup.link.view"),s=require("navigation/main/views/section/components/link/view/section.shopping-list.link.view"),a=require("navigation/main/views/section/components/link/view/section.shopping-list-drawer.button.view"),r=require("navigation/main/views/section/components/link/view/section.current-order.link.view"),c=require("navigation/main/views/section/components/link/view/section.checkout.link.view"),l=require("navigation/main/views/section/components/link/view/section.alcohol.link.view"),u=require("navigation/main/views/section/components/link/view/section.thuiswinkel.link.view"),m=void 0;
return m=new n,m.set(e.LOGIN,t),m.set(e.LOGIN_POPUP,o),m.set(e.SHOPPING_LIST,s),m.set(e.SHOPPING_LIST_DRAWER,a),m.set(e.CURRENT_ORDER,r),m.set(e.CHECKOUT,c),m.set(e.ALCOHOL,l),m.set(e.THUISWINKEL,u),m.set(m.DEFAULT,i),m}),define("navigation/main/views/section/assembler/section.link.assembler",["require","navigation/main/views/section/factory/section.link.factory"],function(e){"use strict";var n=e("navigation/main/views/section/factory/section.link.factory");return{createLink:function(e){var i=n.getView(e.id);return new i({model:e})}}}),define("navigation/main/views/section/components/list-item/view/section.list-item.view",["require","navigation/main/views/section/assembler/section.link.assembler","class-name-builder"],function(e){"use strict";var n=e("navigation/main/views/section/assembler/section.link.assembler"),i=e("class-name-builder");return Backbone.View.extend({tagName:"li",persistentClassName:"navigation-section__list-item",className:function(){var e=this.model.id.toLowerCase();return i.create().always("navigation-section__list-item--"+e)["if"](this.model.has("navItem.active")&&this.model.get("navItem.active")===!1,"navigation-section__list-item--greyed-out").toString()},initialize:function(){Backbone.View.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.appendLink)},appendLink:function(){this.append(n.createLink(this.model))}})}),define("navigation/main/views/section/components/list/view/section.list.view",["require","navigation/main/views/section/components/list-item/view/section.list-item.view"],function(e){"use strict";var n=e("navigation/main/views/section/components/list-item/view/section.list-item.view");return Backbone.View.extend({tagName:"ul",className:"navigation-section__list",initialize:function(){this.channel("navigation").comply(this.model.id+":prepend-item",this.prependItem,this),this.channel("navigation").comply(this.model.id+":remove-item",this.removeItem,this)},render:function(){return this.removeSubviews(),this.appendItems(),this},appendItems:function(){this.model.sections&&this.model.sections.each(this.appendItem.bind(this))},prependItem:function(e){e.get("navItem")&&this.prepend(new n({model:e}))},appendItem:function(e){e.get("navItem")&&this.append(new n({model:e}))},removeItem:function(e){var n=this;_.each(this.subviews,function(i){i.model===e&&n.removeSubview(i.cid)})},remove:function(){this.channel("navigation").stopComplying(this.model.id+":append-item",this.appendItem,this),this.channel("navigation").stopComplying(this.model.id+":remove-item",this.removeItem,this),Backbone.View.prototype.remove.apply(this,arguments)}})}),define("navigation/main/views/section/components/list/view/fold-out.section.list.view",["require","navigation/main/views/section/components/list/view/section.list.view"],function(e){"use strict";var n=e("navigation/main/views/section/components/list/view/section.list.view");return n.extend({className:n.prototype.className+" navigation-section__list--foldout"})}),define("navigation/main/views/section/components/list/view/doormat.section.list.view",["require","navigation/main/views/section/components/list/view/section.list.view"],function(e){"use strict";var n=e("navigation/main/views/section/components/list/view/section.list.view");return n.extend({className:"doormat-section__list"})}),define("navigation/main/views/section/components/list/view/common.section.list.view",["require","navigation/main/views/section/components/list/view/section.list.view","settings/enums/events/window.event.enum","settings/enums/events/navigation.event.enum","settings/enums/command/navigation.command.enum","navigation/main/enums/section.enum","settings/utils/breakpoints"],function(e){"use strict";var n=e("navigation/main/views/section/components/list/view/section.list.view"),i=e("settings/enums/events/window.event.enum"),t=e("settings/enums/events/navigation.event.enum"),o=e("settings/enums/command/navigation.command.enum"),s=e("navigation/main/enums/section.enum"),a=e("settings/utils/breakpoints");return n.extend({overflowingItems:null,initialize:function(){n.prototype.initialize.apply(this,arguments),this.overflowingItems=[],this.channel(i.CHANNEL).subscribe(i.RESIZE,this.moveOverflowingItemsToSecondarySection,this),this.channel(t.CHANNEL).subscribe(t.RENDER_COMPLETE,this.moveOverflowingItemsToSecondarySection,this)},moveOverflowingItemsToSecondarySection:function(){var e=void 0,n=void 0,i=void 0;this.shouldOverflowToSecondarySectionList()?(e=this.getOverflowingItemModels(),n=_.difference(e,this.overflowingItems),i=_.difference(this.overflowingItems,e),this.removeItemsFromSecondarySection(i),this.prependItemsToSecondarySection(n),this.overflowingItems=e):this.overflowingItems.length>0&&(this.removeItemsFromSecondarySection(this.overflowingItems),this.overflowingItems=[])},prependItemsToSecondarySection:function(e){_.each(e.reverse(),function(e){this.channel(o.CHANNEL).command(s.SECONDARY+":prepend-item",e)}.bind(this))},removeItemsFromSecondarySection:function(e){_.each(e,function(e){this.channel(o.CHANNEL).command(s.SECONDARY+":remove-item",e)}.bind(this))},getOverflowingItemModels:function(){var e=[],n=void 0,i=void 0;return _.each(this.subviews,function(t){n=t.$el,i=n.position().top,i>=this.$el.height()&&e.push(t.model)}.bind(this)),e},shouldOverflowToSecondarySectionList:function(){return!a.isNavigationSide()&&!a.isPhone()&&!a.isPhablet()},remove:function(){this.channel(i.CHANNEL).unsubscribe(i.RESIZE,this.moveOverflowingItemsToSecondarySection,this),this.channel(t.CHANNEL).unsubscribe(t.RENDER_COMPLETE,this.moveOverflowingItemsToSecondarySection,this),n.prototype.remove.apply(this,arguments)}})}),define("navigation/main/views/section/factory/section.list.factory",["navigation/main/enums/section.enum","settings/components/factory/model/factory.model","navigation/main/views/section/components/list/view/section.list.view","navigation/main/views/section/components/list/view/fold-out.section.list.view","navigation/main/views/section/components/list/view/doormat.section.list.view","navigation/main/views/section/components/list/view/common.section.list.view"],function(){"use strict";var e=require("navigation/main/enums/section.enum"),n=require("settings/components/factory/model/factory.model"),i=require("navigation/main/views/section/components/list/view/section.list.view"),t=require("navigation/main/views/section/components/list/view/fold-out.section.list.view"),o=require("navigation/main/views/section/components/list/view/doormat.section.list.view"),s=require("navigation/main/views/section/components/list/view/common.section.list.view"),a=void 0;return a=new n,a.set(e.PERSONAL,t),a.set(e.SECONDARY,t),a.set(e.COMMON,s),a.set(e.SHOPPING2,o),a.set(e.ALLERHANDE,o),a.set(e.SERVICE,o),a.set(e.ABOUT,o),a.set(a.DEFAULT,i),a}),define("navigation/main/views/section/assembler/section.list.assembler",["require","navigation/main/views/section/factory/section.list.factory"],function(e){"use strict";var n=e("navigation/main/views/section/factory/section.list.factory");return{create:function(e){var i=n.getView(e.id);return new i({model:e})}}}),define("navigation/main/views/section/view/section.view",["require","navigation/main/views/section/assembler/section.title.assembler","navigation/main/views/section/assembler/section.list.assembler"],function(e){"use strict";var n=e("navigation/main/views/section/assembler/section.title.assembler"),i=e("navigation/main/views/section/assembler/section.list.assembler");return Backbone.View.extend({tagName:"nav",persistentClassName:"navigation-section",className:function(){return"navigation-section--"+this.model.id.toLowerCase()},initialize:function(){Backbone.View.prototype.initialize.apply(this,arguments),this.listenTo(this,"render-complete",this.onRenderComplete)},onRenderComplete:function(){this.appendTitle(),this.appendList()},appendTitle:function(){this.append(n.create(this.model))},appendList:function(){this.append(i.create(this.model))}})}),define("navigation/main/views/section/view/doormat.section.view",["require","navigation/main/views/section/view/section.view"],function(e){"use strict";var n=e("navigation/main/views/section/view/section.view");return n.extend({persistentClassName:"doormat-section",className:function(){return"doormat-section--"+this.model.id.toLowerCase()}})}),define("navigation/main/views/section/view/home.section.view",["require","navigation/main/views/section/view/section.view","navigation/main/views/section/assembler/section.link.assembler"],function(e){"use strict";var n=e("navigation/main/views/section/view/section.view"),i=e("navigation/main/views/section/assembler/section.link.assembler");return n.extend({tagName:"div",onRenderComplete:function(){this.appendLink(),this.appendUsernameTitle()},appendLink:function(){this.append(i.createLink(this.model))},appendUsernameTitle:function(){var e=this.model&&this.model.get("navItem")&&this.model.get("navItem.properties")?this.model.get("navItem.properties.userName"):"",n=this.$("a");"undefined"!=typeof e&&""!==e&&(e=e.split(" ")[0],n.html('<span class="navigation-header-compact__user">van '+e+"</span>").addClass("navigation-section__link--homehasusername"),n.parent().addClass("navigation-section--homehomehasusername"))}})}),define("navigation/main/views/section/view/interactive.section.view",["require","navigation/main/views/section/view/section.view","settings/enums/command/navigation.command.enum","settings/enums/events/window.event.enum","settings/utils/breakpoints"],function(e){"use strict";var n=e("navigation/main/views/section/view/section.view"),i=e("settings/enums/command/navigation.command.enum"),t=e("settings/enums/events/window.event.enum"),o=e("settings/utils/breakpoints");return n.extend({events:{"click [data-toggle-section]":"toggleSection","mouseover [data-toggle-section]":"openSection",mouseleave:"closeSectionDelayed",mouseenter:"clearCloseTimeout"},closeDelay:400,toggleSection:function(e){e.preventDefault(),this.channel(i.CHANNEL).command(i.TOGGLE_SECTION,this.model.id)},openSection:function(e){Modernizr.touchevents?this.channel(t.CHANNEL).subscribe(t.SCROLL,this.closeSectionOnScroll,this):(e.preventDefault(),this.isDesktopNavigation()&&(this.clearCloseTimeout(),this.channel(i.CHANNEL).command(i.OPEN_SECTION,this.model.id)))},closeSectionDelayed:function(e){Modernizr.touchevents||(e.preventDefault(),this.isDesktopNavigation()&&(this.closeTimeoutId=_.delay(this.closeSection.bind(this),this.closeDelay)))},clearCloseTimeout:function(){this.closeTimeoutId&&(window.clearTimeout(this.closeTimeoutId),delete this.closeTimeoutId)},closeSection:function(){Modernizr.touchevents||this.channel(i.CHANNEL).command(i.CLOSE_SECTION,this.model.id)},isDesktopNavigation:function(){return!(o.isNavigationSide()||o.isPhone()||o.isPhablet()||o.isTablet())},closeSectionOnScroll:function(){Modernizr.touchevents&&(this.channel(i.CHANNEL).command(i.CLOSE_SECTION,this.model.id),this.channel(t.CHANNEL).unsubscribe(t.SCROLL,this.closeSectionOnScroll,this))},remove:function(){this.channel(t.CHANNEL).unsubscribe(t.SCROLL,this.closeSectionOnScroll),n.prototype.remove.call(this)}})}),define("navigation/main/views/section/components/link/view/section.close.link.view",["require","settings/components/link/assembler/link.assembler","settings/components/link/enums/link.type.enum","settings/enums/command/navigation.command.enum"],function(e){"use strict";var n=e("settings/components/link/assembler/link.assembler"),i=e("settings/components/link/enums/link.type.enum"),t=e("settings/enums/command/navigation.command.enum");return Backbone.View.extend({className:"navigation__section--close",render:function(){return this.appendLink(),this},appendLink:function(){var e={},t=n.createLinkFromNavItem(i.LINK_CLICK_VIEW,e,{className:"navigation__section--close-link link--1  paragraph--1 ah-online-icon icon--close-cross",onClick:this.publishCloseSection.bind(this)});this.append(t)},publishCloseSection:function(){this.channel(t.CHANNEL).command(t.CLOSE_SECTION,this.model.id)}})}),define("navigation/main/views/section/view/personal.interactive.section.view",["require","navigation/main/views/section/view/interactive.section.view","navigation/main/views/section/components/link/view/section.close.link.view"],function(e){"use strict";var n=e("navigation/main/views/section/view/interactive.section.view"),i=e("navigation/main/views/section/components/link/view/section.close.link.view");return n.extend({openSection:function(){this.appendCloseSection(),n.prototype.openSection.apply(this,arguments)},appendCloseSection:function(){var e=new i({model:this.model});this.append(e,{name:"sectionCloseLink",replace:!0})}})}),define("navigation/main/views/autocomplete/model/autocomplete.model",[],function(){"use strict";return Backbone.DeepModel.extend({parse:function(e){return e.suggestions?(e.suggestions=new Backbone.Collection(e.suggestions,{model:Backbone.DeepModel}),e):void 0}})}),define("dst!navigation/main/views/autocomplete/template/autocomplete-item.dust",["dust"],function(e){return function(){function n(e,n){return e.x(n.get(["type"],!1),n,{block:i},{})}function i(e,n){return e.w('<li class="navigation-autocomplete__item">').h("select",n,{block:t},{key:d}).w("</li>")}function t(e,n){return e.h("eq",n,{block:o},{value:"title"}).h("eq",n,{block:l},{value:"noresult"}).h("default",n,{block:u},{})}function o(e,n){return e.w('<a href="').f(n.get(["link"],!1),n,"h").w('"class="navigation-autocomplete__title link--2 link-color-brown--1 heading--10 ah-online-icon link-left-icon icon--autosuggest-').h("lowerCase",n,{block:s},{}).w('"').x(n.get(["external"],!1),n,{block:a},{}).w(">").f(n.get(["value"],!1),n,"h").x(n.get(["external"],!1),n,{block:r},{}).w("</a>")}function s(e,n){return e.f(n.get(["icon"],!1),n,"h")}function a(e,n){return e.w(' target="_blank"')}function r(e,n){return e.w(" ").h("icon",n,{block:c},{domain:"ui",className:"icon--smallest"})}function c(e,n){return e.w("external-link")}function l(e,n){return e.w('<span class="navigation-autocomplete__empty heading--10 color-chocolade--min3">').f(n.get(["value"],!1),n,"h").w("</span>")}function u(e,n){return e.w('<a href="').f(n.get(["link"],!1),n,"h").w('"class="navigation-autocomplete__link link--2 link-color--primair heading--10"').x(n.get(["external"],!1),n,{block:m},{}).w(">").f(n.get(["value"],!1),n,"h").x(n.get(["external"],!1),n,{block:v},{}).w("</a>")}function m(e,n){return e.w(' target="_blank"')}function v(e,n){return e.w(" ").h("icon",n,{block:h},{domain:"ui",className:"icon--smallest"})}function h(e,n){return e.w("external-link")}function d(e,n){return e.f(n.get(["type"],!1),n,"h")}return e.register("navigation/main/views/autocomplete/template/autocomplete-item.dust",n),n.__dustBody=!0,i.__dustBody=!0,t.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,c.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,h.__dustBody=!0,d.__dustBody=!0,n}(),function(n,i){return e.render("navigation/main/views/autocomplete/template/autocomplete-item.dust",n,i)}}),define("navigation/main/views/autocomplete/view/autocomplete",["require","settings/enums/command/navigation.command.enum","navigation/main/views/autocomplete/model/autocomplete.model","dst!navigation/main/views/autocomplete/template/autocomplete-item.dust"],function(e){"use strict";var n=e("settings/enums/command/navigation.command.enum"),i=e("navigation/main/views/autocomplete/model/autocomplete.model");return function(t){var o={appendTo:t.appendTo,model:t.model,className:"navigation-autocomplete__list",item:e("dst!navigation/main/views/autocomplete/template/autocomplete-item.dust")},s=t.input,a=void 0;return s.clearSearch({callback:function(){s.autocomplete("close")}.bind(this),autoPosition:!1}),a=s.autocomplete({appendTo:o.appendTo,minLength:2,messages:{noResults:"",results:function(){}},select:function(e,n){return n.item.link&&!n.item.external&&window.location.assign(n.item.link),!1},open:function(){Backbone.mediator.channel(n.CHANNEL).publish(n.OPEN_AUTOCOMPLETE),$(o.appendTo).mCustomScrollbar({theme:"minimal-dark",scrollInertia:200,advanced:{updateOnContentResize:!1,updateOnImageLoad:!1,autoUpdateTimeout:300}}),$(o.appendTo).addClass(o.className)},close:function(){Backbone.mediator.channel(n.CHANNEL).publish(n.CLOSE_AUTOCOMPLETE),$(o.appendTo).mCustomScrollbar("destroy"),$(o.appendTo).removeClass(o.className)},source:function(e,n){var t=o.model,s=new Backbone.Collection(null,{model:i}),a=function(e){var n=/\?/;return n.test(e)?"&":"?"},r=function(e){return e&&"external"===e};t.set("inputText",encodeURI(e.term)),s.url=t._getHref("suggestions"),s.fetch().then(function(){var e=[],i="global";s.each(function(n){if(n.has("titleLink")){var t=n.get("titleLink.link.href"),o=a(t);e.push({type:"title",icon:n.get("titleLink.title").replace(/ /g,"-"),value:n.get("titleLink.title"),link:""+t+o+"searchType="+i,external:r(n.get("titleLink.link.pageType"))})}if(n.has("suggestions")&&n.get("suggestions").each(function(n){var t=n.get("link.href"),o=a(t);e.push({type:"suggestion",value:n.get("title"),link:""+t+o+"searchType="+i,external:r(n.get("link.pageType"))})}),n.has("moreLink")){var s=n.get("moreLink.link.href"),c=a(s);e.push({type:"more",value:n.get("moreLink.title"),link:""+s+c+"searchType="+i,external:r(n.get("moreLink.link.pageType"))})}n.has("noResultsLink")&&e.push({type:"noresultlink",value:n.get("noResultsLink.title"),link:n.get("noResultsLink.link.href"),external:r(n.get("noResultsLink.link.pageType"))}),n.has("noResultsMessage")&&e.push({type:"noresult",value:n.get("noResultsMessage")})}),e.length&&n(e)})}}).data("ui-autocomplete"),a.search=function(e,n){return e=null!==e?e:this._value(),this.term=this._value(),this._trigger("search",n)!==!1?this._search(e):void 0},a._move=function(e,n){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):(this.menu.active?"next"===e&&0===this.menu.active.next().find("a").length?this.menu[e](n):"previous"===e&&0===this.menu.active.prev().find("a").length&&this.menu[e](n):"previous"===e&&this.menu[e](n),void this.menu[e](n)):void this.search(null,n)},a._suggest=function(e){var n=this.menu.element.empty();this._renderMenu(n,e),this.isNewMenu=!0,this.menu.refresh(),n.addClass("navigation-notifications__search-section").fadeIn(80)},a._renderItem=function(e,n){var i=void 0;return o.item(n,function(e,n){i=$(n)}),i?i.appendTo(e):null},a}}),define("dst!navigation/main/views/search/template/search.view.dust",["dust"],function(e){return function(){function n(e,n){return e.w('<form><div class="navigation-search__input-container clear_input_div"><input type="text" name="rq" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"class="paragraph--1 navigation-search__input" data-navigation-autocomplete-input data-search-input data-autosuggest placeholder="').f(n.get(["legend"],!1),n,"h").w('"').h("testHook",n,{block:i},{}).w('><input name="searchType" type="hidden" value="global"><a class="paragraph--1 navigation-search__clear-input clear_input" data-close>Ã</a><label for="rq" class="ah-online-icon icon--search navigation-search__label"></label><button type="button" class="paragraph--1 link--1 link-color--primair navigation-search__close" data-close>').h("i18n",n,{block:t},{}).w("</button></div></form>")}function i(e,n){return e.w("product-search-global")}function t(e,n){return e.w("navigation.closeSearch")}return e.register("navigation/main/views/search/template/search.view.dust",n),n.__dustBody=!0,i.__dustBody=!0,t.__dustBody=!0,n}(),function(n,i){return e.render("navigation/main/views/search/template/search.view.dust",n,i)}}),define("navigation/main/views/search/view/search.view",["require","settings/enums/command/navigation.command.enum","settings/enums/command/page.command.enum","settings/enums/command/shoppinglist.command.enum","navigation/main/views/autocomplete/view/autocomplete","dst!navigation/main/views/search/template/search.view.dust"],function(e){"use strict";var n=e("settings/enums/command/navigation.command.enum"),i=e("settings/enums/command/page.command.enum"),t=e("settings/enums/command/shoppinglist.command.enum"),o=e("navigation/main/views/autocomplete/view/autocomplete");return Backbone.View.extend({tagName:"form",attributes:{method:"get",action:Backbone.mediator.request("env:navigation","urls.search"),autocomplete:"off"},template:e("dst!navigation/main/views/search/template/search.view.dust"),events:{"click .navigation-search__label":"openSection","keyup input":"createAutocomplete","click [data-close]":"closeSection"},initialize:function(){Backbone.mediator.channel(n.CHANNEL).subscribe(n.CLOSE_AUTOCOMPLETE,this.closeSection,this)},openSection:function(e){e.preventDefault(),this.channel(n.CHANNEL).command(n.OPEN_SECTION,this.model.id),this.showPageOverlay(),this.$("input").focus()},closeSection:function(e){e&&e.preventDefault(),this.channel(n.CHANNEL).command(n.CLOSE_SECTION,this.model.id),this.destroyAutocomplete(),this.hidePageOverlay(),this.clearInput()},clearInput:function(){this.$("input").val("").change()},createAutocomplete:function(n){var i=this;27===n.keyCode||this.autocomplete||(this.channel(t.CHANNEL).command(t.CLOSE_DRAWER),e(["jquery-ui"],function(){i.showPageOverlay(),e(["settings/jquery-ui"],function(){i.autocomplete=new o({model:i.model,input:i.$(".navigation-search__input"),appendTo:$(".navigation__autocomplete")})})}))},destroyAutocomplete:function(){this.autocomplete&&(this.autocomplete.destroy(),delete this.autocomplete)},showPageOverlay:function(){this.channel(i.CHANNEL).command(i.SHOW_PAGE_OVERLAY,{onClick:this.closeSection.bind(this)})},hidePageOverlay:function(){this.channel(i.CHANNEL).command(i.HIDE_PAGE_OVERLAY)},remove:function(){Backbone.mediator.channel(n.CHANNEL).unsubscribe(n.CLOSE_AUTOCOMPLETE,this.closeSection,this)}})}),define("navigation/main/views/section/view/search.interactive.section.view",["require","navigation/main/views/section/view/interactive.section.view","navigation/main/views/search/view/search.view"],function(e){"use strict";var n=e("navigation/main/views/section/view/interactive.section.view"),i=e("navigation/main/views/search/view/search.view");return n.extend({tagName:"div",onRenderComplete:function(){this.appendSearch()},appendSearch:function(){this.append(new i({model:this.model}))},openSection:function(){},closeSectionDelayed:function(){}})}),define("navigation/main/views/section/factory/section.factory",["require","navigation/main/enums/section.enum","settings/components/factory/model/factory.model","navigation/main/views/section/view/section.view","navigation/main/views/section/view/doormat.section.view","navigation/main/views/section/view/home.section.view","navigation/main/views/section/view/interactive.section.view","navigation/main/views/section/view/personal.interactive.section.view","navigation/main/views/section/view/search.interactive.section.view"],function(e){"use strict";var n=e("navigation/main/enums/section.enum"),i=e("settings/components/factory/model/factory.model"),t=e("navigation/main/views/section/view/section.view"),o=e("navigation/main/views/section/view/doormat.section.view"),s=e("navigation/main/views/section/view/home.section.view"),a=e("navigation/main/views/section/view/interactive.section.view"),r=e("navigation/main/views/section/view/personal.interactive.section.view"),c=e("navigation/main/views/section/view/search.interactive.section.view"),l=void 0;return l=new i,l.set(n.HOME,s),l.set(n.PERSONAL,r),l.set(n.COMMON,a),l.set(n.SECONDARY,a),l.set(n.SEARCH,c),l.set(n.SHOPPING2,o),l.set(n.ALLERHANDE,o),l.set(n.SERVICE,o),l.set(n.ABOUT,o),l.set(l.DEFAULT,t),l}),define("navigation/main/views/section/assembler/section.assembler",["require","navigation/main/views/section/factory/section.factory"],function(e){"use strict";var n=e("navigation/main/views/section/factory/section.factory");return{createSection:function(e){var i=n.getView(e.id);return new i({model:e})}}}),define("dst!navigation/cross-site/template/cross-site.view.dust",["dust"],function(e){return function(){function n(e,n){return e.w('<div><ul class="cross-site-navigation__menu"><li><a class="cross-site-navigation__menu-item cross-site-navigation__menu-item--bierbox" href="https://bierbox.ah.nl/?ah_medium=www.ah.nl&ah_source=header&ah_campaign=na" target="_blank"><span class="cross-site-navigation__menu-item__a11y-text">Bierbox</span></a></li><li><a class="cross-site-navigation__menu-item cross-site-navigation__menu-item--wijnbox" href="https://wijnbox.ah.nl/?ah_medium=www.ah.nl&ah_source=header&ah_campaign=na" target="_blank"><span class="cross-site-navigation__menu-item__a11y-text">Wijnbox</span></a></li><li><a class="cross-site-navigation__menu-item cross-site-navigation__menu-item--ticketshop" href="https://lekkerweglekkerthuis.ah.nl/?ah_medium=www.ah.nl&ah_source=header&ah_campaign=na" target="_blank"><span class="cross-site-navigation__menu-item__a11y-text">Ticketshop</span></a></li><li><a class="cross-site-navigation__menu-item cross-site-navigation__menu-item--taartenbakkers" href="https://taartenbakkers.ah.nl/?ah_medium=www.ah.nl&ah_source=header&ah_campaign=na" target="_blank"><span class="cross-site-navigation__menu-item__a11y-text">Taartenbakkers</span></a></li><li><a class="cross-site-navigation__menu-item cross-site-navigation__menu-item--bloemist" href="https://bloemist.ah.nl/?ah_medium=www.ah.nl&ah_source=header&ah_campaign=na" target="_blank"><span class="cross-site-navigation__menu-item__a11y-text">Bloemist</span></a></li></ul></div>')}return e.register("navigation/cross-site/template/cross-site.view.dust",n),n.__dustBody=!0,n}(),function(n,i){return e.render("navigation/cross-site/template/cross-site.view.dust",n,i)}}),define("navigation/cross-site/view/cross-site.view",["require","settings/enums/events/navigation.event.enum","settings/enums/command/navigation.command.enum","settings/enums/events/window.event.enum","dst!navigation/cross-site/template/cross-site.view.dust"],function(e){"use strict";var n=e("settings/enums/events/navigation.event.enum"),i=e("settings/enums/command/navigation.command.enum"),t=e("settings/enums/events/window.event.enum"),o=Backbone.View.extend({template:e("dst!navigation/cross-site/template/cross-site.view.dust"),className:"cross-site-navigation",initialize:function(){this.setListeners(),$("body").addClass("has-cross-site-navigation")},setListeners:function(){this.channel(t.CHANNEL).subscribe(t.PAGE_RENDER_COMPLETE,this.showCrossSiteBar,this),this.channel(t.CHANNEL).subscribe(t.SCROLL,this.checkScrollDistance,this),this.channel(i.CHANNEL).comply(i.SHOW_NAVIGATION,this.showCrossSiteBar,this)},checkScrollDistance:function(e){e.distance>=45?this.hideCrossSiteBar():e.scrollY<=60&&this.showCrossSiteBar()},hideCrossSiteBar:function(){var e=!this.$el.hasClass("hide-navigation");e&&(this.$el.addClass("hide-navigation"),this.channel(n.CHANNEL).publish(n.NAVIGATION_HIDDEN,"navigation-hidden"))},showCrossSiteBar:function(){var e=this.$el.hasClass("hide-navigation");e&&(this.$el.removeClass("hide-navigation"),this.channel(n.CHANNEL).publish(n.NAVIGATION_VISIBLE,"navigation-visible"))},remove:function(){$("body").removeClass("has-cross-site-navigation"),this.channel(t.CHANNEL).unsubscribe(t.PAGE_RENDER_COMPLETE,this.showCrossSiteBar,this),this.channel(t.CHANNEL).unsubscribe(t.SCROLL,this.checkScrollDistance,this),this.channel(i.CHANNEL).stopComplying(i.SHOW_NAVIGATION,this.showCrossSiteBar,this),Backbone.View.prototype.remove.apply(this,arguments)}});return o}),define("navigation/main/utils/navigation-util",["require","settings/enums/events/navigation.event.enum"],function(e){"use strict";var n=e("settings/enums/events/navigation.event.enum"),i=void 0;return i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.initialize()},_.extend(i.prototype,{initialize:function(){this.channel(n.CHANNEL).subscribe(n.RENDER_COMPLETE,this.updateActiveNavigationItem,this)},updateActiveNavigationItem:function(){this.selectedNavItemArray=[],"undefined"!=typeof this.options.$el&&_.each(this.options.$el.find("a"),this.everyNavigationItem.bind(this))},everyNavigationItem:function(e){var n=$(e),i=n.attr("href");this.linkEqualsWindowLocation(i)&&this.isUrlLongerThenCurrentActive(i)&&(this.clearAllNavigationItems(),this.setActiveNavigationItem(n,i))},linkEscapeSlashes:function(e){return e.replace(/\//g,"\\/")},linkLookAheadSlashOrNothing:function(e,n){var i=new RegExp(e+"(?=/|$)","g");return i.test(n)},linkEqualsWindowLocation:function(e){return e?(e=this.linkEscapeSlashes(e),this.linkLookAheadSlashOrNothing(e,window.location.pathname)):!1},setActiveNavigationItem:function(e,n){0===this.selectedNavItemArray.length&&(this.selectedNavItemArray.push({$el:e,linkUrl:n}),e.addClass("-active"))},isUrlLongerThenCurrentActive:function(e){return 0===this.selectedNavItemArray.length||e.length>=this.selectedNavItemArray[0].linkUrl.length},clearAllNavigationItems:function(){_.each(this.selectedNavItemArray,function(e){e.$el.removeClass("-active")}),this.selectedNavItemArray=[]}}),_.extend(i.prototype,Backbone.decorators.PubSub),i}),define("navigation/main/decorators/scrollbar/scrollbar.decorator",["require","settings/enums/events/window.event.enum","settings/utils/breakpoints"],function(e){"use strict";var n=e("settings/enums/events/window.event.enum"),i=e("settings/utils/breakpoints");return{scrollbarOptions:{theme:"minimal-dark",autoHideScrollbar:!0},initScrollbars:function(){Backbone.mediator.channel(n.CHANNEL).subscribe(n.RESIZE,this.checkScrollbars,this),this.checkScrollbars()},checkScrollbars:function(){var e=this;"undefined"!=typeof this.$el.attr("data-scrollbar")&&this.checkIfScrollbarIsNeeded(this.el),this.$("[data-scrollbar]").each(function(n,t){i.isNavigationSide()?e.createScrollbar(t):e.destroyScrollbar(t)})},createScrollbar:function(e){var n=void 0;this.hasScrollbar(e)?$(e).mCustomScrollbar("update"):(n=_.clone(this.scrollbarOptions),n.callbacks={advanced:{updateOnContentResize:!1,updateOnImageLoad:!1,autoUpdateTimeout:300}},$(e).mCustomScrollbar(n).attr("data-scrollbar-enabled",""))},onElementScroll:function(e){this.trigger("element-scrolling",e)},destroyScrollbar:function(e){this.hasScrollbar(e)&&($(e).mCustomScrollbar("destroy"),$(e).css({position:"",overflow:""}).removeAttr("data-scrollbar-enabled"))},hasScrollbar:function(e){return"undefined"!=typeof $(e).attr("data-scrollbar-enabled")}}}),define("dst!navigation/main/views/template/navigation.view.dust",["dust"],function(e){return function(){function n(e,n){return e.w('<div><div class="navigation__cross-site" data-cross-site></div><div class="navigation__scroll-container" data-scrollbar><div class="navigation__section-container" data-sections></div></div><div class="navigation__autocomplete navigation-autocomplete"></div></div>')}return e.register("navigation/main/views/template/navigation.view.dust",n),n.__dustBody=!0,n}(),function(n,i){return e.render("navigation/main/views/template/navigation.view.dust",n,i)}}),define("navigation/main/views/view/navigation.view",["require","navigation/main/views/section/assembler/section.assembler","navigation/cross-site/view/cross-site.view","settings/enums/command/navigation.command.enum","settings/enums/events/navigation.event.enum","settings/enums/events/window.event.enum","settings/enums/request/navigation.request.enum","navigation/main/utils/navigation-util","settings/utils/breakpoints","navigation/main/decorators/scrollbar/scrollbar.decorator","dst!navigation/main/views/template/navigation.view.dust"],function(e){"use strict";var n=e("navigation/main/views/section/assembler/section.assembler"),i=e("navigation/cross-site/view/cross-site.view"),t=e("settings/enums/command/navigation.command.enum"),o=e("settings/enums/events/navigation.event.enum"),s=e("settings/enums/events/window.event.enum"),a=e("settings/enums/request/navigation.request.enum"),r=e("navigation/main/utils/navigation-util"),c=e("settings/utils/breakpoints"),l=e("navigation/main/decorators/scrollbar/scrollbar.decorator"),u=void 0;
return u=Backbone.View.extend({el:"[data-navigation]",template:e("dst!navigation/main/views/template/navigation.view.dust"),currentOpenSection:null,isSide:null,regions:{SECTION:"[data-sections]",CROSSSITE:"[data-cross-site]"},subscriptions:{"navigation:error":"handleError"},initialize:function(){this.listenTo(this,"render-complete",this.onRenderComplete),this.setListeners(),this.listenTo(this.model,"sync",this.render),this.listenTo(this.model,"add",this.render)},setListeners:function(){this.channel(t.CHANNEL).comply(t.TOGGLE_SECTION,this.toggleSection,this),this.channel(t.CHANNEL).comply(t.OPEN_SECTION,this.openSection,this),this.channel(t.CHANNEL).comply(t.CLOSE_SECTION,this.closeSection,this),this.channel(a.CHANNEL).reply(a.SECTION_OPEN,this.isSectionOpen,this),this.channel(s.CHANNEL).subscribe(s.RESIZE,this.publishPosition,this),this.channel(s.CHANNEL).subscribe(s.LOCATION_CHANGED,this.toggleCrossSiteNavigation,this)},isHomePageNL:function(){return"/"===location.pathname&&location.hostname.indexOf("ah.nl")>-1},removeListeners:function(){this.channel(t.CHANNEL).stopComplying(t.TOGGLE_SECTION,this.toggleSection,this),this.channel(t.CHANNEL).stopComplying(t.OPEN_SECTION,this.openSection,this),this.channel(t.CHANNEL).stopComplying(t.CLOSE_SECTION,this.closeSection,this),this.channel(a.CHANNEL).stopReplying(a.SECTION_OPEN,this.isSectionOpen,this),this.channel(s.CHANNEL).unsubscribe(s.RESIZE,this.publishPosition,this),this.channel(s.CHANNEL).unsubscribe(s.LOCATION_CHANGED,this.toggleCrossSiteNavigation,this)},render:function(){this.$el.empty(),Backbone.View.prototype.render.apply(this,arguments)},onRenderComplete:function(){this.renderMainSections(),this.createNavigationHighlightUtil(),this.initScrollbars(),this.toggleCrossSiteNavigation(),this.channel(o.CHANNEL).publish(o.RENDER_COMPLETE)},renderMainSections:function(){var e=this.model.sections.get("main");e.sections&&e.sections.each(this.appendSection.bind(this))},isCrossSiteNavigationEnabled:function(){return!!window.AB_CROSS_SITE_NAVIGATION},toggleCrossSiteNavigation:function(){this.isHomePageNL()&&this.isCrossSiteNavigationEnabled()?this.addCrossSiteNavigation():this.removeCrossSiteNavigation()},addCrossSiteNavigation:function(){this.subviews.crossSite||this.append(new i,{region:this.regions.CROSSSITE,name:"crossSite"})},removeCrossSiteNavigation:function(){this.subviews.crossSite&&this.subviews.crossSite.remove()},createNavigationHighlightUtil:function(){new r({$el:this.$el})},appendSection:function(e){this.append(n.createSection(e),{region:this.regions.SECTION})},toggleSection:function(e){this.isSectionOpen(e)?this.closeSection(e):this.openSection(e),this.toggleOverflow()},openSection:function(e){var n=this.getOpenClass(e);this.isSectionOpen(e)||(this.closeCurrentOpenSection(),this.currentOpenSection=e,this.$el.addClass(n))},closeSection:function(e){var n=this.getOpenClass(e);this.isSectionOpen(e)&&this.$el.removeClass(n)},toggleOverflow:function(){$("html").toggleClass("--disable-scroll")},closeCurrentOpenSection:function(){this.currentOpenSection&&(this.closeSection(this.currentOpenSection),this.currentOpenSection=null)},publishPosition:function(){var e=c.isNavigationSide();this.isSide!==e&&(this.isSide=e,this.channel(o.CHANNEL).publish(this.isSide?o.SIDE:o.TOP))},isSectionOpen:function(e){return this.$el.hasClass(this.getOpenClass(e))},getOpenClass:function(e){return"has-open__navigation--"+e},remove:function(){this.removeListeners(),Backbone.View.prototype.remove.apply(this,arguments)}}),_.extend(u.prototype,l),u}),define("dst!navigation/main/views/template/navigation.error.view.dust",["dust"],function(e){return function(){function n(e,n){return e.w('<div class="navigation__section-container navigation--error"><div class="navigation-section navigation-section--home"><a href="/" class="ah-online-icon icon--home link--2 navigation-section__link navigation-section__link--left-icon navigation-section__link--home">Home</a></div><div class="navigation-section navigation-section--error-message hide-on--side-navigation"><p class="paragraph--1 color-salmiak--min3">').h("i18n",n,{block:i},{}).w('</p></div><div class="navigation-section navigation-section--error-message hide-on--top-navigation"><p class="paragraph--1 paragraph--strong color-salmiak--min3">').h("i18n",n,{block:t},{}).w('</p><p class="paragraph--1 color-salmiak--min3">').h("i18n",n,{block:o},{}).w("</p></div></div>")}function i(e,n){return e.w("navigation.top.error.body")}function t(e,n){return e.w("navigation.side.error.header")}function o(e,n){return e.w("navigation.side.error.body")}return e.register("navigation/main/views/template/navigation.error.view.dust",n),n.__dustBody=!0,i.__dustBody=!0,t.__dustBody=!0,o.__dustBody=!0,n}(),function(n,i){return e.render("navigation/main/views/template/navigation.error.view.dust",n,i)}}),define("navigation/main/views/view/navigation.error.view",["require","dst!navigation/main/views/template/navigation.error.view.dust"],function(e){"use strict";return Backbone.View.extend({el:"[data-navigation]",template:e("dst!navigation/main/views/template/navigation.error.view.dust"),renderMethod:"append",render:function(){this.$el.empty(),Backbone.View.prototype.render.apply(this,arguments)}})}),define("dst!navigation/main/views/section/template/social.section.dust",["dust"],function(e){return function(){function n(e,n){return e.w('<div><span class="social-section-tagline heading--10 color-ah">').h("i18n",n,{block:i},{}).w("</span></div>")}function i(e,n){return e.w("navigation.logo.slogan")}return e.register("navigation/main/views/section/template/social.section.dust",n),n.__dustBody=!0,i.__dustBody=!0,n}(),function(n,i){return e.render("navigation/main/views/section/template/social.section.dust",n,i)}}),define("navigation/main/views/section/view/social.section.view",["require","navigation/main/views/section/view/section.view","dst!navigation/main/views/section/template/social.section.dust"],function(e){"use strict";var n=e("navigation/main/views/section/view/section.view");return n.extend({tagName:"div",className:"social-section",template:e("dst!navigation/main/views/section/template/social.section.dust"),events:{"mouseover a":"onInteraction","mouseout a":"onInteraction"},onRenderComplete:function(){var e=$("<span></span>").addClass("social-section__link social-section__link--hover paragraph--2 color-ah").html("&nbsp;");n.prototype.onRenderComplete.apply(this,arguments),this.$el.append(e)},onInteraction:function(e){var n=this.$(".social-section__link--hover"),i=void 0;switch(e.type){case"mouseover":i=this.$(e.target).text(),n.html(i);break;default:n.html("&nbsp;")}}})}),define("navigation/main/views/doormat/view/doormat.view",["require","navigation/main/views/section/assembler/section.assembler","navigation/main/views/section/view/social.section.view"],function(e){"use strict";var n=e("navigation/main/views/section/assembler/section.assembler"),i=e("navigation/main/views/section/view/social.section.view");return Backbone.View.extend({el:"[data-doormat-global]",className:"doormat-global doormat__section-container",initialize:function(){"undefined"==typeof this.el&&this._ensureElement()},render:function(){var e=this.model.sections.get("quickAccess");return e.sections&&e.sections.each(this.appendSection.bind(this)),this.appendSocialSection(),this},appendSocialSection:function(){this.append(new i({model:this.model.sections.get("social")}))},appendSection:function(e){this.append(n.createSection(e))}})}),define("dst!navigation/main/views/template/navigation.footer.view.dust",["dust"],function(e){return function(){function n(e,n){return e.w('<div class="navigation__section-container" data-sections></div>')}return e.register("navigation/main/views/template/navigation.footer.view.dust",n),n.__dustBody=!0,n}(),function(n,i){return e.render("navigation/main/views/template/navigation.footer.view.dust",n,i)}}),define("navigation/main/views/view/footer.view",["require","navigation/main/views/section/assembler/section.assembler","navigation/main/enums/section.enum","navigation/main/views/doormat/view/doormat.view","dst!navigation/main/views/template/navigation.footer.view.dust"],function(e){"use strict";var n=e("navigation/main/views/section/assembler/section.assembler"),i=e("navigation/main/enums/section.enum"),t=e("navigation/main/views/doormat/view/doormat.view");return Backbone.View.extend({optionNames:["showDoormat"],el:"[data-footer-global]",template:e("dst!navigation/main/views/template/navigation.footer.view.dust"),className:"footer-global",tagName:"footer",attributes:{"data-doormat-global":""},regions:{SECTION:"[data-sections]"},initialize:function(){this.listenTo(this,"render-complete",this.onRenderComplete),"undefined"==typeof this.el&&this._ensureElement()},render:function(){this.$el.empty(),this.showDoormat&&this.renderDoormat(),this.appendCorporateInformation(),this.appendNotice(),this.appendToDom()},renderDoormat:function(){this.doormatView=new t({model:this.model}).render()},appendCorporateInformation:function(){this.append(n.createSection(this.model.sections.get(i.CORPORATE_INFORMATION)),{region:this.regions.SECTION})},appendNotice:function(){this.append(n.createSection(this.model.sections.get(i.NOTICE)),{region:this.regions.SECTION})},appendToDom:function(){var e=$("#wrapper"),n=0!==e.length?e:$(".major");0===n.find(".footer-global").length&&(this.showDoormat&&n.append(this.doormatView.$el),n.append(this.$el))}})}),define("navigation/main/model/navigation.model",["require","settings/model/hal.model"],function(e){"use strict";var n=e("settings/model/hal.model");return n.extend({isSynced:function(){return this.sections}})}),define("navigation/main/module",["require","navigation/main/views/view/navigation.view","navigation/main/views/view/navigation.error.view","navigation/main/views/view/footer.view","settings/enums/request/application.request.enum","navigation/main/model/navigation.model","settings/enums/command/navigation.command.enum","settings/enums/events/window.event.enum","settings/enums/events/member.event.enum"],function(e){"use strict";var n=e("navigation/main/views/view/navigation.view"),i=e("navigation/main/views/view/navigation.error.view"),t=e("navigation/main/views/view/footer.view"),o=e("settings/enums/request/application.request.enum"),s=e("navigation/main/model/navigation.model"),a=e("settings/enums/command/navigation.command.enum"),r=e("settings/enums/events/window.event.enum"),c=e("settings/enums/events/member.event.enum"),l=void 0;return l=Backbone.Class.extend({showFooterRequested:!1,isSetup:!1,initialize:function(){this.model=new s,this.subscribe("navigation:request-reload",this.onRequestReload,this),this.getNavigationUrl()&&(this.setup(),this.fetchModel())},setup:function(){this.isSetup=!0,this.setupListeners()},setupListeners:function(){var e=this;this.listenTo(this.model,"sync",this.createNavigationAndFooter),this.listenTo(this.model,"error",this.handleModelError),this.subscribe("navigation:error",this.handleModelError,this),this.channel(c.CHANNEL).subscribe(c.AUTHENTICATED,function(){return e.onRequestReload()}),this.channel(a.CHANNEL).complyOnce(a.SHOW_FOOTER,this.createFooter,this),this.channel(r.CHANNEL).subscribeOnce(r.PAGE_RENDER_COMPLETE,this.createFooterOnPageRenderComplete,this)},fetchModel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNavigationUrl();this.model.fetch({url:e})},createNavigationAndFooter:function(){this.navigationView||this.createNavigation(),(this.isFooterContainerOnPage()||this.showFooterRequested)&&this.createFooter()},createNavigation:function(){this.navigationView=new n({model:this.model}),this.navigationView.render()},createFooterOnPageRenderComplete:function(){this.channel(a.CHANNEL).command(a.SHOW_FOOTER)},createFooter:function(){this.showFooterRequested=!0,this.model.isSynced()&&(this.footerView=new t({model:this.model,showDoormat:this.shouldShowDoormat()}),this.footerView.render(),this.showFooterRequested=!1)},handleModelError:function(){this.navigationView=new i,this.navigationView.render()},onRequestReload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNavigationUrl();this.isSetup||this.setup(),this.setNavigationUrl(e),this.fetchModel(e)},isFooterContainerOnPage:function(){return $("[data-footer-global]").length},getNavigationUrl:function(){var e=this.getNavigationContainer();return e?e.getAttribute("data-url"):void 0},setNavigationUrl:function(e){var n=this.getNavigationContainer();return n?n.setAttribute("data-url",e):void 0},shouldShowDoormat:function(){var e=this.getNavigationContainer();return null===e.getAttribute("data-hide-doormat")},getNavigationContainer:function(){return document.querySelector("[data-navigation]")}}),_.extend(l.prototype,Backbone.decorators.PubSub,Backbone.Events),Backbone.mediator.channel(o.CHANNEL).request(o.IS_RUNNING_IN_MOBILE_MODE)?void 0:new l}),define("navigation/enums/navigation-type.enum",[],function(){"use strict";return{SUB_NAVIGATION:"SubNavigation"}}),define("navigation/sub/view/sub-navigation.view",["require","settings/components/ui/menu/view/menu.view"],function(e){"use strict";var n=e("settings/components/ui/menu/view/menu.view");return n.extend({className:"sub-navigation",attributes:function(){return{"data-branding":this.model.get("branding")}},initialize:function(){this.model.itemList&&this.model.itemList.items&&(this.collection=this.model.itemList.items,n.prototype.initialize.apply(this,arguments))}})}),define("navigation/factory/navigation.factory",["require","settings/components/factory/model/factory.model","navigation/enums/navigation-type.enum","settings/enums/factory-type.enum","navigation/sub/view/sub-navigation.view"],function(e){"use strict";var n=e("settings/components/factory/model/factory.model"),i=e("navigation/enums/navigation-type.enum"),t=e("settings/enums/factory-type.enum"),o=e("navigation/sub/view/sub-navigation.view"),s=new n;return s.set(i.SUB_NAVIGATION,o),Backbone.mediator.reply(t.NAVIGATION_FACTORY,function(){return Promise.resolve(s)}),s}),define("ecommerce-ah-online-navigation",["require","navigation/plugins/plugins","navigation/main/module","navigation/factory/navigation.factory"],function(e){"use strict";e("navigation/plugins/plugins"),e("navigation/main/module");var n=e("navigation/factory/navigation.factory");return n}),requirejs.config({paths:{"ecommerce-ah-online-navigation":"navigation/module",translation:"../i18n",environment:"../env"},shim:{"ecommerce-ah-online-navigation":{deps:["ecommerce-ah-online-settings"]}}}),require(["ecommerce-ah-online-navigation"],function(){"use strict";return{}}),define("config",function(){});