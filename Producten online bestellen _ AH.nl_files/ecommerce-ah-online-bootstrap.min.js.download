"use strict";define("bootstrap/command/router/navigate.command",["require","settings/components/link/enums/page.type.enum","settings/enums/events/navigation.event.enum","settings/enums/events/window.event.enum","settings/enums/command/window.command.enum","settings/enums/command/router.command.enum"],function(e){var n=e("settings/components/link/enums/page.type.enum"),t=e("settings/enums/events/navigation.event.enum"),o=e("settings/enums/events/window.event.enum"),i=e("settings/enums/command/window.command.enum"),s=e("settings/enums/command/router.command.enum"),r=void 0;return r=function(){this.channel(s.CHANNEL).comply(s.NAVIGATE,this.execute,this)},_.extend(r.prototype,{execute:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=void 0,r=void 0;o=_.defaults(o,{urlParameters:"",trigger:!0}),o.storeScrollPosition&&this.channel(i.CHANNEL).command(i.STORE_SCROLL_POSITION),_.isString(e)?(s=e,r=o.pageType||n.LEGACY):_.isObject(e)&&(s=e.get("href")+o.urlParameters,r=o.pageType||e.get("pageType")||n.LEGACY),this.channel(t.CHANNEL).publish(t.PRE_NAVIGATE),r===n.GRID?this.navigateToGridPage(s,o):r===n.SELF?this.updateLocationSilent(s):this.updateLocation(s)},navigateToGridPage:function(e,n){e.match("http")&&(e=e.replace(window.location.origin,"")),Backbone.history.navigate(e,n)},updateLocationSilent:function(e){this.isHashOnly(e)&&(e=Backbone.history.getFragment()+e),Backbone.history.navigate(e,{silent:!0}),this.channel(o.CHANNEL).publish(o.LOCATION_UPDATED)},isHashOnly:function(e){return"#"===e.charAt(0)},updateLocation:function(e){window.document.location.assign(e)}},Backbone.decorators.PubSub,Backbone.decorators.Command),r}),define("bootstrap/command/router/back.command",["require","settings/enums/command/router.command.enum"],function(e){var n=e("settings/enums/command/router.command.enum"),t=void 0;return t=function(){this.channel("router").comply(n.BACK,this.execute,this),this.initialize()},_.extend(t.prototype,{initialize:function(){this.routesHit=parseInt(this.request("webCache:get","router:routesHit"),10)||0,Backbone.history.on("route",this.updateRoutesHit,this)},updateRoutesHit:function(){this.routesHit+=1,this.request("webCache:set","router:routesHit",this.routesHit,5)},execute:function(){this.routesHit>1?window.history.back():window.location="/"}},Backbone.decorators.RequestResponse,Backbone.decorators.Command),t}),define("bootstrap/request/router/referrer.request",["require","settings/enums/request/router.request.enum","settings/enums/events/navigation.event.enum"],function(e){var n=e("settings/enums/request/router.request.enum"),t=e("settings/enums/events/navigation.event.enum"),o=void 0;return o=Backbone.Class.extend({initialize:function(){this.channel(n.CHANNEL).reply(n.REFERRER,this.getReferrer,this),this.channel(t.CHANNEL).subscribe(t.PRE_NAVIGATE,this.updateReferrer,this)},updateReferrer:function(){this.referrer=window.location.href},getReferrer:function(){return this.referrer||document.referrer}}),_.extend(o.prototype,Backbone.decorators.RequestResponse),o}),define("bootstrap/router",["require","bootstrap/command/router/navigate.command","bootstrap/command/router/back.command","bootstrap/request/router/referrer.request","settings/enums/events/window.event.enum"],function(e){var n=e("bootstrap/command/router/navigate.command"),t=e("bootstrap/command/router/back.command"),o=e("bootstrap/request/router/referrer.request"),i=e("settings/enums/events/window.event.enum"),s=void 0;return s=Backbone.Router.extend({routes:function(){return Backbone.mediator.request("domain:bootstrap","routes")},routesHit:null,referrer:null,initialize:function(){Backbone.history.start({pushState:!0,hashChange:!1,root:"/"}),this.disableConsoleForIe(),this.setupCommands(),this.setupRequests(),this.setupEvents()},setupCommands:function(){new n,new t},setupRequests:function(){new o},setupEvents:function(){this.skipInitialLocationChangedEvent=!0,Backbone.history.on("route",this.publishLocationChanged,this)},publishLocationChanged:function(){return this.skipInitialLocationChangedEvent?void(this.skipInitialLocationChangedEvent=!1):void this.channel(i.CHANNEL).publish(i.LOCATION_CHANGED)},account:function(){this.loadModules("modules.account")},checkout:function(){this.loadModules("modules.checkout")},canvas:function(){this.loadModules("modules.canvas")},favorites:function(){this.loadModules("modules.favorites")},g2c:function(){this.loadModules("modules.g2c")},king:function(){this.loadModules("modules.king")},orderList:function(){this.loadModules("modules.orderList")},orders:function(){this.loadModules("modules.orders")},producten:function(){this.loadModules("modules.producten")},shoppinglist:function(){this.loadModules("modules.shoppinglist")},search:function(){this.loadModules("modules.search")},personalLists:function(){this.loadModules("modules.personalLists")},stores:function(){this.loadModules("modules.stores")},loyaltyService:function(){this.loadModules("modules.loyaltyService")},customerService:function(){this.loadModules("modules.customerService")},customerServiceMobile:function(){this.loadModules("modules.customerServiceMobile")},"default":function(){this.loadModules("modules.default")},loadModules:function(e){this.channel(i.CHANNEL).publish(i.MODULES_LOAD_START),this.request("module:load",Backbone.mediator.request("domain:bootstrap",e)).then(function(){this.channel(i.CHANNEL).publish(i.MODULES_LOAD_COMPLETE)}.bind(this))},disableConsoleForIe:function(){var e=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],t=window.console=window.console||{};n.forEach(function(n){t[n]=t[n]||e})}}),_.extend(s.prototype,Backbone.decorators.RequestResponse,Backbone.decorators.Command),s}),define("bootstrap/model/head.model",["require","settings/enums/events/meta.event.enum","settings/enums/command/head.command.enum"],function(e){var n=e("settings/enums/events/meta.event.enum"),t=e("settings/enums/command/head.command.enum"),o=void 0;return o=Backbone.Model.extend({defaults:{title:"",description:""},initialize:function(){this.channel("head").comply(t.UPDATE_TITLE,this.updateTitle,this),this.channel("head").comply(t.UPDATE_DESCRIPTION,this.updateDescription,this),this.channel("meta").subscribe(n.META_TAGS,this.updateMetaTags,this),this.channel("meta").subscribe(n.LINK_TAGS,this.updateLinkTags,this)},updateTitle:function(e,n){this.updateProperty("title",e,n)},updateDescription:function(e,n){this.updateProperty("description",e,n)},updateProperty:function(e,n,t){t=_.defaults(t||{},{i18n:!1}),t.i18n&&(n=this.request("i18n:get",n)),_.isEmpty(n)||this.set(e,n)},updateMetaTags:function(e){e.items&&this.set("metaTags",e.items)},updateLinkTags:function(e){e.items&&this.set("linkTags",e.items)}}),_.extend(o.prototype,Backbone.decorators.Command,Backbone.decorators.RequestResponse,Backbone.decorators.PubSub),o}),define("bootstrap/views/head/view/head.view",["require","bootstrap/model/head.model"],function(e){var n=e("bootstrap/model/head.model");return Backbone.View.extend({el:"head",initialize:function(){this.model=new n,this.model.on("change:title",this.updateTitle,this),this.model.on("change:description",this.updateDescription,this),this.model.on("change:metaTags",this.updateMetaTags,this),this.model.on("change:linkTags",this.updateLinkTags,this)},updateTitle:function(){window.document.title=this.model.get("title")},updateDescription:function(){var e=this.model.get("description");e&&0!==e.trim().length&&this.updateMetaTag({name:"description",content:e.substr(0,155)})},updateMetaTags:function(){_.each(this.model.get("metaTags"),this.updateMetaTag.bind(this))},updateMetaTag:function(e){this.$("meta[name="+e.name+"]").remove(),this.$el.append('<meta name="'+e.name+'" content="'+e.content+'">')},updateLinkTags:function(){_.each(this.model.get("linkTags"),function(e){this.removeLinkTagsWithRel(e.rel)}.bind(this)),_.each(this.model.get("linkTags"),this.addLinkTag.bind(this))},addLinkTag:function(e){var n=$('<link rel="'+e.rel+'" href="'+e.href+'">');e.hreflang&&n.attr("hreflang",e.hreflang),this.$el.append(n)},removeLinkTagsWithRel:function(e){this.$('link[rel="'+e+'"]').remove()}})}),define("bootstrap/views/layout/components/region/command/switch-view.command",["require","settings/views/page/enums/page-phase.enum"],function(e){var n=e("settings/views/page/enums/page-phase.enum"),t=void 0;return t=Backbone.Class.extend({optionNames:["regionView","view","oldView","emptyBeforeRender","reload"],emptyBeforeRender:!1,reload:!1,initialize:function(){_.bindAll(this,"handleError")},switchView:function(){this.start()},start:function(){var e=this;this.view.executePhase(n.LOAD,{reload:this.reload}).then(function(){return e.hideCurrentView()}).then(function(){return e.emptyView()}).then(function(){return e.view.executePhase(n.PRERENDER)}).then(function(){return e.updateView()}).then(function(){return e.view.transitionIn()}).then(function(){return e.view.executePhase(n.RENDER)}).then(function(){return e.resolve()})["catch"](function(n){return e.handleError(n)})},hideCurrentView:function(){return this.oldView?this.oldView.transitionOut():Promise.resolve()},updateView:function(){return this.appendView(),Promise.resolve()},emptyView:function(){return this.emptyBeforeRender&&this.view.removeSubviews(),Promise.resolve()},appendView:function(){this.regionView.append(this.view,{name:this.regionView.region,render:!1,replace:!0})},handleError:function(e){return this.disposed||this.publish("exception",e),_.isFunction(this.reject)?this.reject(e):void 0},execute:function(){return new Promise(function(e,n){this.resolve=e,this.reject=n,this.switchView()}.bind(this))}}),_.extend(t.prototype,Backbone.Events,Backbone.decorators.Command,Backbone.decorators.PubSub),t}),define("bootstrap/views/layout/components/region/view/region.view",["require","bootstrap/views/layout/components/region/command/switch-view.command","settings/views/page/enums/page-phase.event.enum","settings/views/page/enums/page-phase.enum","settings/enums/events/window.event.enum","settings/enums/request/notification.request.enum"],function(e){var n=e("bootstrap/views/layout/components/region/command/switch-view.command"),t=e("settings/views/page/enums/page-phase.event.enum"),o=e("settings/views/page/enums/page-phase.enum"),i=e("settings/enums/events/window.event.enum"),s=e("settings/enums/request/notification.request.enum");return Backbone.View.extend({optionNames:["region"],Command:n,show:function(e,n){var t=new this.Command(_.extend(n||{},{view:e,oldView:this.view,regionView:this}));return this.stopListening(this.view),this.view=e,this.setupListeners(),t.execute()},setupListeners:function(){this.listenTo(this.view,t.START,this.onPhaseStart),this.listenTo(this.view,t.COMPLETE,this.onPhaseComplete),this.listenTo(this.view,"added-to-dom",this.onViewAddedToDom)},onPhaseStart:function(e){switch(e){case o.LOAD:this.publishState(i.PAGE_LOAD_START),this.showLoader();break;case o.PRERENDER:this.publishState(i.PAGE_PRERENDER_START);break;case o.RENDER:this.publishState(i.PAGE_RENDER_START)}},onPhaseComplete:function(e){switch(e){case o.LOAD:this.publishState(i.PAGE_LOAD_COMPLETE);break;case o.PRERENDER:this.publishState(i.PAGE_PRERENDER_COMPLETE),this.hideLoader();break;case o.RENDER:this.publishState(i.PAGE_RENDER_COMPLETE)}},onViewAddedToDom:function(){this.publishState(i.PAGE_ADDED_TO_DOM)},publishState:function(e){this.channel(i.CHANNEL).publish(e,this.view,this.region)},showLoader:function(){this.append(this.channel(s.CHANNEL).request(s.LOADER,{threshold:300}),{name:"loader",replace:!0})},hideLoader:function(){this.removeSubview("loader")}})}),define("bootstrap/views/layout/components/region/command/content.switch-view.command",["require","bootstrap/views/layout/components/region/command/switch-view.command"],function(e){var n=e("bootstrap/views/layout/components/region/command/switch-view.command");return n.extend({appendView:function(){this.regionView.subview(this.regionView.region)!==this.view&&n.prototype.appendView.call(this)}})}),define("bootstrap/views/layout/components/region/view/content.region.view",["require","bootstrap/views/layout/components/region/view/region.view","settings/enums/command/layout.command.enum","settings/model/hal.model","bootstrap/views/layout/components/region/command/content.switch-view.command","settings/enums/command/page.command.enum","settings/enums/command/window.command.enum","settings/enums/events/window.event.enum"],function(e){var n=e("bootstrap/views/layout/components/region/view/region.view"),t=e("settings/enums/command/layout.command.enum"),o=e("settings/model/hal.model"),i=e("bootstrap/views/layout/components/region/command/content.switch-view.command"),s=e("settings/enums/command/page.command.enum"),r=e("settings/enums/command/window.command.enum"),a=e("settings/enums/events/window.event.enum");return n.extend({Command:i,initialize:function(){this.channel(t.CHANNEL).reply(t.CURRENT_VIEW,this.getCurrentView,this),this.channel(s.CHANNEL).comply(s.RELOAD_PAGE,this.reloadPage,this),this.channel(s.CHANNEL).comply(s.LOAD_MORE_PAGE,this.loadMoreLanes,this)},showLoader:function(){this.channel(s.CHANNEL).command(s.SHOW_PAGE_LOADER,{threshold:350})},hideLoader:function(){this.channel(s.CHANNEL).command(s.HIDE_PAGE_LOADER)},loadMoreLanes:function(e){this.view.model=new o,this.view.model.url=e,this.channel(r.CHANNEL).command(r.STORE_SCROLL_POSITION),this.channel(a.CHANNEL).subscribeOnce(a.PAGE_RENDER_COMPLETE,this.removeScrollPosition,this),this.show(this.view,{emptyBeforeRender:!1})},removeScrollPosition:function(){this.channel(r.CHANNEL).command(r.CLEAR_SCROLL_POSITION)},reloadPage:function(){this.show(this.view,{emptyBeforeRender:!0,reload:!0})},getCurrentView:function(){return this.view}})}),define("bootstrap/views/layout/components/region/factory/region.factory",["require","settings/components/factory/model/factory.model","settings/enums/region.enum","bootstrap/views/layout/components/region/view/region.view","bootstrap/views/layout/components/region/view/content.region.view"],function(e){var n=e("settings/components/factory/model/factory.model"),t=e("settings/enums/region.enum"),o=e("bootstrap/views/layout/components/region/view/region.view"),i=e("bootstrap/views/layout/components/region/view/content.region.view"),s=new n;return s.set(t.CONTENT,i),s.set(t.DRAWER,o),s.set(s.DEFAULT,o),s}),define("bootstrap/views/layout/view/layout.view",["require","bootstrap/views/layout/components/region/factory/region.factory","settings/enums/command/layout.command.enum","settings/enums/region.enum"],function(e){var n=e("bootstrap/views/layout/components/region/factory/region.factory"),t=e("settings/enums/command/layout.command.enum"),o=e("settings/enums/region.enum");return Backbone.View.extend({el:"[data-container]",initialize:function(){this.setupCommands(),this.setupRegions()},setupCommands:function(){this.channel(t.CHANNEL).comply(t.SHOW_VIEW,this.showView,this),this.channel(t.CHANNEL).comply(t.SHOW_NAVIGATION,this.showNavigation,this),this.channel(t.CHANNEL).comply(t.HIDE_NAVIGATION,this.hideNavigation,this),this.channel(t.CHANNEL).comply(t.CREATE_REGION,this.createRegion,this),this.channel(t.CHANNEL).comply(t.DESTROY_REGION,this.destroyRegion,this)},setupRegions:function(){this.regions={},this.createRegion(o.CONTENT,'[data-region="content"]'),this.createRegion(o.DRAWER,'[data-region="drawer"]')},createRegion:function(e,t){var o=void 0;this.regionExists(e)||(o=n.getView(e),this.regions[e]=new o({el:t,region:e,isAddedToDOM:!0}))},destroyRegion:function(e){this.regionExists(e)&&(this.regions[e].remove(),delete this.regions[e])},hideNavigation:function(){$(".navigation-global").hide(),$(".major").addClass("hide-navigation")},showNavigation:function(){$(".navigation-global").show(),$(".major").removeClass("hide-navigation")},showView:function(e,n){if(!e.region)throw new Error("No region name defined in view");if(!this.regionExists(e.region))throw new Error("No region created for: "+e.region);this.regions[e.region].show(e,n)},regionExists:function(e){return"undefined"!=typeof this.regions[e]}})}),define("bootstrap/controller/module.controller",["require"],function(e){var n=function(){this.initialize()};return _.extend(n.prototype,{initialize:function(){this.modules={},this.reply("module:load",this.onLoadModule,this)},onLoadModule:function(n){var t=this.modules;return n="string"==typeof n?n.split():n,n=n.filter(function(e){return"undefined"==typeof t[e]}),new Promise(function(o){return n&&0!==n.length?void e(n,function(){_.each(n,function(n){t[n]=e(n)}),o()}):void o()})}}),_.extend(n.prototype,Backbone.decorators.RequestResponse),n}),define("bootstrap/controller/request.controller",[],function(){var e=function(){this.initialize()};return _.extend(e.prototype,{responders:[{pattern:/editorials/,modules:["ecommerce-ah-online-editorials"]},{pattern:/community/,modules:["ecommerce-ah-online-community"]},{pattern:/products/,modules:["ecommerce-ah-online-products"]},{pattern:/customerService/,modules:["ecommerce-ah-online-customerservice"]},{pattern:/widgets/,modules:["ecommerce-ah-online-widgets"]},{pattern:/location-finder/,modules:["ecommerce-ah-online-location-finder"]},{pattern:/formelements/,modules:["ecommerce-ah-online-formelements"]},{pattern:/shoppingList/,modules:["ecommerce-ah-online-shoppinglist"]},{pattern:/lanes/,modules:["ecommerce-ah-online-lanes-factory"]},{pattern:/order/,modules:["ecommerce-ah-online-orders"]},{pattern:/navigation/,modules:["ecommerce-ah-online-navigation"]}],initialize:function(){this.modules={},this.reply("default",this.onCatchUnregistered,this)},onCatchUnregistered:function(e){var n=this.getModulesForRequest(e);if(0===n.length)throw Error(e+" is not registered and cannot be linked to a module.");return new Promise(function(t,o){this.request("module:load",n).then(function(){this.request(e).then(t,o)}.bind(this),o)}.bind(this))},getModulesForRequest:function(e){var n=this.responders.map(function(n){return n.pattern.test(e)?n.modules:null});return _.flatten(n).filter(function(e){return null!==e})}}),_.extend(e.prototype,Backbone.decorators.RequestResponse),e}),define("bootstrap/controller/channel.controller",["require","settings/enums/channel.enum"],function(e){var n=e("settings/enums/channel.enum"),t=void 0;return t=function(){this.initialize()},_.extend(t.prototype,{modulesForChannel:null,initialize:function(){this.setupModulesForChannel(),this.setupDefaultActions()},setupModulesForChannel:function(){this.modulesForChannel={},this.modulesForChannel[n.NAVIGATION]=["ecommerce-ah-online-navigation"],this.modulesForChannel[n.NOTIFICATION]=["ecommerce-ah-online-notifications"],this.modulesForChannel[n.SHOPPINGLIST]=["ecommerce-ah-online-shoppinglist"]},setupDefaultActions:function(){_.each(_.keys(this.modulesForChannel),function(e){this.channel(e).reply("default",this.defaultReply.bind(this,e,"request")),this.channel(e).comply("default",this.defaultReply.bind(this,e,"command"))}.bind(this))},defaultReply:function(e,n){var t=_.toArray(arguments);return t.splice(0,2),this.isPreviouslyUncaught(t)?void 0:(this.setPreviouslyUncaught(t),new Promise(function(o,i){this.request("module:load",this.modulesForChannel[e]).then(function(){var s=this.reExecuteAction(e,n,t);return s&&s.then?s.then(o,i):s}.bind(this),i)}.bind(this)))},reExecuteAction:function(e,n,t){var o=this.channel(e);return o[n].apply(o,t)},setPreviouslyUncaught:function(e){e.push({previouslyUncaught:!0})},isPreviouslyUncaught:function(e){var n=e.length-1;return _.isObject(e[n])&&e[n].previouslyUncaught}}),_.extend(t.prototype,Backbone.decorators.RequestResponse),t}),define("bootstrap/controller/branding.controller",["require","settings/enums/request/application.request.enum"],function(e){var n,t=e("settings/enums/request/application.request.enum");return n=Backbone.Class.extend({initialize:function(){this.channel(t.CHANNEL).reply(t.LOAD_BRANDING,this.loadBranding,this)},loadBranding:function(e){var n=this;return e=this.createBrandingsRequire(e),new Promise(function(t,o){window.require.onError=o,n.request("module:load",e).then(function(){return t()})})},createBrandingsRequire:function(e){var n=this;return e.map(function(e){return"css!/../_ui/"+n.getBrandingCssFileName(e)})},getBrandingCssFileName:function(e){return"ecommerce-ah-online-branding-"+e+".min.css"}}),_.extend(n.prototype,Backbone.decorators.RequestResponse),n}),define("bootstrap/command/create-application-controllers.command",["require","bootstrap/controller/module.controller","bootstrap/controller/request.controller","bootstrap/controller/channel.controller","bootstrap/controller/branding.controller"],function(e){var n=e("bootstrap/controller/module.controller"),t=e("bootstrap/controller/request.controller"),o=e("bootstrap/controller/channel.controller"),i=e("bootstrap/controller/branding.controller");return Backbone.Class.extend({execute:function(){new n,new t,new o,new i}})}),define("bootstrap/model/member.model",["settings/model/hal.model","settings/enums/gender.enum"],function(){var e=require("settings/model/hal.model"),n=require("settings/enums/gender.enum");return e.extend({idAttribute:"clientId",url:function(){if(this.isNew())return Backbone.mediator.request("env:bootstrap","urls.memberLoginService");var e=this.get("clientId");return Backbone.mediator.request("env:bootstrap","urls.memberService",{clientId:e})},initialize:function(){},shouldFetch:function(){return!0},fetch:function(n){var t=this;return new window.Promise(function(o,i){return t.shouldFetch()||n?void e.prototype.fetch.call(t).then(function(){return o(t)},function(){return i(t)}):o(t)})},parse:function(n){var t=e.prototype.parse.call(this,n);return this.parseName(t,t),this.parseAddress(t,t),this.parseGender(t,t),t.Phone=t.phoneNumber,t.Email=t.emailAddress,t},parseName:function(e,n){var t=e.name,o=void 0,i=void 0;t&&(i=t.lastNamePrefix||"",o=t.lastName||"",n.Lastname=(i+" "+o).trim(),n.Firstname=t.firstName)},parseAddress:function(e,n){var t=e.address;t&&(n.Street=t.street,n.Housenumber=t.houseNumber,n.Zipcode=t.postalCode?t.postalCode.replace(/ /g,""):"",n.City=t.city)},parseGender:function(e,t){var o=e.gender;if(o)switch(o=o.toLowerCase()){case"female":t.Gender=n.FEMALE;break;case"male":t.Gender=n.MALE;break;default:delete t.Gender}},isLoggedIn:function(){return!this.isNew()},isEmailVerified:function(){return this.get("emailVerified")===!0},hasOnlineOrders:function(){return this.has("address.street")},isRegisteredAccount:function(){return this.has("emailAddress")},isBasicUser:function(){return!this.hasOnlineOrders()&&this.isRegisteredAccount()},isLoyaltyUser:function(){return this.hasOnlineOrders()&&this.isRegisteredAccount()}})}),define("bootstrap/services/member.service",["require","settings/enums/events/member.event.enum","settings/enums/request/application.request.enum","bootstrap/model/member.model"],function(e){var n=e("settings/enums/events/member.event.enum"),t=e("settings/enums/request/application.request.enum"),o=e("bootstrap/model/member.model"),i={NL:"NLD",BE:"BEL",DE:"DUI"},s=Backbone.Class.extend({initialize:function(){var e=this,n=this.getMemberID();this.model=new o({clientId:n}),this.channel(t.CHANNEL).reply(t.MEMBER_SERVICE,function(){return e.service()},this)},getMemberID:function(){return window.settings["member-number"]},getCountryDomain:function(){var e=_.get(window,"locale.country")||"NL";return i[e]},authenticate:function(e,t){var o=this,i=this.getCountryDomain();return new Promise(function(s,r){o.model.save({username:e,password:t,type:"password",domain:i},{success:function(){o.channel(n.CHANNEL).publish(n.AUTHENTICATED),s()},error:r})})},getModel:function(){return this.model},getModelASync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;return this.model.isLoggedIn()?this.model.fetch(e):window.Promise.resolve(this.model)},login:function(e,t){var o=this;return this.authenticate(e,t).then(function(){return o.getModelASync(!0)}).then(function(){return o.channel(n.CHANNEL).publish(n.LOGGED_IN,o.model)})},service:function(){var e=this;return{authenticate:function(n,t){return e.authenticate(n,t)},login:function(n,t){return e.login(n,t)},getModel:function(){return e.getModel()},getModelASync:function(n){return e.getModelASync(n)},setMemberData:function(n){return e.getModel().set(n,{parse:!0})},isLoggedIn:function(){return e.model.isLoggedIn()},isEmailVerified:function(){return e.model.isEmailVerified()}}}});return _.extend(s.prototype,Backbone.decorators.PubSub,Backbone.decorators.Command),s}),define("bootstrap/command/create-services.command",["require","bootstrap/services/member.service"],function(e){var n=e("bootstrap/services/member.service");return Backbone.Class.extend({execute:function(){new n}})}),define("bootstrap/command/notifications/cached-notifications.command",["require","settings/enums/command/notification.command.enum"],function(e){var n=e("settings/enums/command/notification.command.enum"),t=void 0;return t=function(){},_.extend(t.prototype,{execute:function(){_.isEmpty(this.request("sessionStorage:get","notifications"))||this.channel(n.CHANNEL).command(n.SHOW_CACHED)}},Backbone.decorators.RequestResponse,Backbone.decorators.Command),t}),define("bootstrap/command/ie9-update/ie9-update-command",["require","settings/enums/events/window.event.enum","settings/utils/ie-update-modal"],function(e){var n=e("settings/enums/events/window.event.enum"),t=e("settings/utils/ie-update-modal");return Backbone.Class.extend({execute:function(){Backbone.mediator.channel(n.CHANNEL).subscribeOnce(n.PAGE_RENDER_COMPLETE,this.onRenderComplete,this)},onRenderComplete:function(){t.showModal()}})}),define("bootstrap/command/load-third-party-scripts.command",["require","settings/enums/events/window.event.enum","settings/enums/request/application.request.enum","settings/enums/events/application.event.enum"],function(e){var n=e("settings/enums/events/window.event.enum"),t=e("settings/enums/request/application.request.enum"),o=e("settings/enums/events/application.event.enum");return Backbone.Class.extend({tempArray:[],loadScript:function(e){var n=Backbone.mediator.channel(t.CHANNEL).request(t.COOKIES_ACCEPTED);if(n||e.beforeCookiewall){var o=document.createElement("script");o.src=e.url,o.async=!0,document.head.appendChild(o)}else this.tempArray.push(e)},loadScriptsFromPool:function(e){var n=this;this.getScriptPool(e).forEach(function(e){return n.loadScript(e)})},onCookiesAccepted:function(){var e=this;this.tempArray.forEach(function(n){return e.loadScript(n)})},onModulesLoadComplete:function(){this.loadScriptsFromPool(n.MODULES_LOAD_COMPLETE)},onPageAddedToDom:function(){this.loadScriptsFromPool(n.PAGE_ADDED_TO_DOM)},onRenderComplete:function(){this.loadScriptsFromPool(n.PAGE_RENDER_COMPLETE)},execute:function(){var e=this;if(Backbone.mediator.channel(t.CHANNEL).request(t.IS_LEGACY_PAGE)){var i=window,s=i.thirdPartyScripts;s&&s.forEach(function(n){return e.loadScript(n)})}else Backbone.mediator.channel(n.CHANNEL).subscribeOnce(n.MODULES_LOAD_COMPLETE,this.onModulesLoadComplete,this),Backbone.mediator.channel(n.CHANNEL).subscribeOnce(n.PAGE_ADDED_TO_DOM,this.onPageAddedToDom,this),Backbone.mediator.channel(n.CHANNEL).subscribeOnce(n.PAGE_RENDER_COMPLETE,this.onRenderComplete,this),Backbone.mediator.channel(o.CHANNEL).subscribeOnce(o.COOKIES_ACCEPTED,this.trackPageOnMainTracker,this)},getScriptPool:function(e){var n=window,t=n.thirdPartyScripts;return"undefined"!=typeof t&&t.length>0?t.filter(function(n){return n.pool===e}):[]}})}),define("bootstrap/command/startup.command",["require","bootstrap/command/create-application-controllers.command","bootstrap/command/create-services.command","bootstrap/command/notifications/cached-notifications.command","bootstrap/command/ie9-update/ie9-update-command","bootstrap/command/load-third-party-scripts.command"],function(e){var n=e("bootstrap/command/create-application-controllers.command"),t=e("bootstrap/command/create-services.command"),o=e("bootstrap/command/notifications/cached-notifications.command"),i=e("bootstrap/command/ie9-update/ie9-update-command"),s=e("bootstrap/command/load-third-party-scripts.command");return Backbone.Class.extend({execute:function(){var e=[new s,new n,new t,new o,new i];_.invoke(e,"execute")}})}),define("text!domain/ah/bootstrap.json",[],function(){return'{\n    "id": "bootstrap",\n    "cookieBlockerDetectionEnabled": true,\n    "routes": {\n        "bonus(/*path)": "canvas",\n        "allerhandebox(/*path)": "canvas",\n        "bestellen/inschrijven(/)": "account",\n        "bestellen/inschrijven-basis(/)": "account",\n        "bestellen/inschrijven-zakelijk(/)": "account",\n        "bestellen/inschrijven/bedankt(/)": "account",\n        "inschrijven/loyalty(/)": "account",\n        "inschrijven/bedankt(/)": "account",\n        "inschrijven/postcodecheck(*path)": "g2c",\n        "bestellen/bestelling-controleren(/)": "checkout",\n        "bestellen/overzicht(/)": "checkout",\n        "bestelling/bevestigen(/)": "checkout",\n        "bezorgen/bedankt(/)": "checkout",\n        "ophalen/bedankt(/)": "checkout",\n        "oci/checkout(/)": "checkout",\n        "oci/sublogin(*path)": "canvas",\n        "bestellen/methode(/)": "g2c",\n        "bestellen/starten(/)": "g2c",\n        "bezorgen(*path)": "g2c",\n        "favorieten(*path)": "favorites",\n        "ophalen(*path)": "g2c",\n        "orders(*path)": "orders",\n        "kies-moment(*path)": "orders",\n        "mijn-boodschappen(*path)": "orders",\n        "bevestig-bestelling(*path)": "orders",\n        "producten/eerder-gekocht/bestellingen(/:id)": "orders",\n        "producten/product/(*path)": "canvas",\n        "producten(*path)": "canvas",\n        "grid(*path)": "canvas",\n        "community/page/(*path)": "canvas",\n        "winkel-zoeken(*path)": "stores",\n        "mijnlijst(*path)": "shoppinglist",\n        "zoeken/overig": "search",\n        "zoeken(*path)": "canvas",\n        "lijstjes(*path)": "personalLists",\n        "zakelijk(*path)": "canvas",\n        "mijn(*path)": "king",\n        "klantenservice(*path)": "customerService",\n        "recipeproducts(*path)": "canvas",\n        "predictmylist(*path)": "canvas",\n        "(/)": "canvas",\n        "(*path)": "default"\n    },\n    "modules": {\n        "account": [\n            "ecommerce-ah-online-account"\n        ],\n        "checkout": [\n            "order-overview"\n        ],\n        "canvas": [\n            "ecommerce-ah-online-canvas",\n            "ecommerce-ah-online-navigation",\n            "ecommerce-ah-online-editorials",\n            "ecommerce-ah-online-lanes-factory",\n            "ecommerce-ah-online-products"\n        ],\n        "favorites": [\n            "ecommerce-ah-online-lanes-factory",\n            "ecommerce-ah-online-canvas",\n            "ecommerce-ah-online-navigation"\n        ],\n        "g2c": [\n            "shopping-list",\n            "ecommerce-ah-online-navigation"\n        ],\n        "king": [\n            "ecommerce-ah-online-king"\n        ],\n        "orders": [\n            "ecommerce-ah-online-lanes-factory",\n            "ecommerce-ah-online-shoppinglist",\n            "ecommerce-ah-online-navigation",\n            "ecommerce-ah-online-orders"\n        ],\n        "producten": [\n            "ecommerce-ah-online-lanes-factory",\n            "ecommerce-ah-online-navigation",\n            "ecommerce-ah-online-products"\n        ],\n        "shoppinglist": [\n            "ecommerce-ah-online-shoppinglist",\n            "ecommerce-ah-online-lanes-factory",\n            "ecommerce-ah-online-products",\n            "ecommerce-ah-online-navigation"\n        ],\n        "search": [\n            "ecommerce-ah-online-lanes-factory",\n            "ecommerce-ah-online-navigation"\n        ],\n        "personalLists": [\n            "ecommerce-ah-online-navigation"\n        ],\n        "stores": [\n            "ecommerce-ah-online-winkelvinder",\n            "ecommerce-ah-online-navigation",\n            "shopping-list"\n        ],\n        "customerService": [\n            "ecommerce-ah-online-customerservice",\n            "ecommerce-ah-online-navigation"\n        ],\n        "customerServiceMobile": [\n            "ecommerce-ah-online-customerservice"\n        ],\n        "default": [\n            "ecommerce-ah-online-lanes-factory",\n            "ecommerce-ah-online-canvas",\n            "ecommerce-ah-online-navigation",\n            "ecommerce-ah-online-content"\n        ]\n    }\n}\n';
}),define("text!domain/ah-dev/bootstrap.json",[],function(){return'{\n    "id": "bootstrap",\n    "cookieBlockerDetectionEnabled": false,\n    "routes": {\n        "html/account/": "account",\n        "html/customerservice/": "customerService"\n    },\n    "modules": {\n        "account": [\n            "ecommerce-ah-online-account"\n        ],\n        "customerService": [\n            "ecommerce-ah-online-customerservice",\n            "ecommerce-ah-online-navigation"\n        ]\n    }\n}\n'}),define("text!domain/etos/bootstrap.json",[],function(){return'{\n    "id": "bootstrap",\n    "cookieBlockerDetectionEnabled": false,\n    "routes": {\n        "mijnEtos(*path)": "loyaltyService"\n    },\n    "modules": {\n        "loyaltyService": [\n            "ecommerce-etos-online-account"\n        ]\n    }\n}\n'}),define("text!domain/etos-dev/bootstrap.json",[],function(){return'{\n    "id": "bootstrap",\n    "routes": {\n        "html/account/": "loyaltyService"\n    },\n    "modules": {\n        "loyaltyService": [\n            "ecommerce-etos-online-account"\n        ]\n    }\n}\n'}),define("bootstrap/plugins/domain-plugins",["settings/plugins/domain-plugins","text!domain/ah/bootstrap.json","text!domain/ah-dev/bootstrap.json","text!domain/etos/bootstrap.json","text!domain/etos-dev/bootstrap.json"],function(){var e=require("settings/plugins/domain-plugins");return new e.Model($.parseJSON(require("text!domain/"+e.domain+"/bootstrap.json")))}),define("text!environment/dev/bootstrap.json",[],function(){return'{\n    "id": "bootstrap",\n    "routes": {\n    },\n    "urls": {\n        "memberService": "/_data/bootstrap/member-service.json",\n        "memberLoginService": "/_data/bootstrap/member-service-auth.json"\n    }\n}\n'}),define("text!environment/prod/bootstrap.json",[],function(){return'{\n    "id": "bootstrap",\n    "routes": {\n    },\n    "urls": {\n        "memberService": "/service/loyalty/rest/members/__clientId__",\n        "memberLoginService": "/service/loyalty/rest/tokens"\n    }\n}\n'}),define("bootstrap/plugins/environment-plugins",["settings/plugins/environment-plugins.main","text!environment/dev/bootstrap.json","text!environment/prod/bootstrap.json"],function(){var e=require("settings/plugins/environment-plugins.main");return new e.Model($.parseJSON(require("text!environment/"+e.environment+"/bootstrap.json")))}),define("text!translation/nl-NL/bootstrap.json",[],function(){return'{\n    "bootstrap": {\n        "cookie-blocker-detection": {\n            "body": "Je browser accepteert geen cookies, hierdoor kunnen wij een correcte werking van AH.nl niet garanderen. Waarschijnlijk heb je dit uit gezet in je browser instellingen."\n        }\n    }\n}\n'}),define("text!translation/nl-BE/bootstrap.json",[],function(){return'{\n    "bootstrap": {\n        "cookie-blocker-detection": {\n            "body": "Je browser accepteert geen cookies, hierdoor kunnen wij een correcte werking van AH.be niet garanderen. Waarschijnlijk heb je dit uit gezet in je browser instellingen."\n        }\n    }\n}\n'}),define("bootstrap/plugins/localisation-plugins",["text!translation/nl-NL/bootstrap.json","text!translation/nl-BE/bootstrap.json"],function(){return Backbone.mediator.request("i18n:add","text!translation/nl-NL/bootstrap.json"),Backbone.mediator.request("i18n:add","text!translation/nl-BE/bootstrap.json"),null}),define("bootstrap/plugins/plugins",["bootstrap/plugins/domain-plugins","bootstrap/plugins/environment-plugins","bootstrap/plugins/localisation-plugins"],function(){return null}),define("ecommerce-ah-online-bootstrap",["require","bootstrap/router","bootstrap/views/head/view/head.view","bootstrap/views/layout/view/layout.view","bootstrap/command/startup.command","bootstrap/plugins/plugins"],function(e){var n=e("bootstrap/router"),t=e("bootstrap/views/head/view/head.view"),o=e("bootstrap/views/layout/view/layout.view"),i=e("bootstrap/command/startup.command"),s=void 0;return e("bootstrap/plugins/plugins"),s=Backbone.Class.extend({initialize:function(){this.startupCommand(),this.headView=new t,this.router=new n,this.layout=new o({isAddedToDOM:!0})},startupCommand:function(){var e=new i;e.execute()}})}),requirejs.config({paths:{"ecommerce-ah-online-bootstrap":"bootstrap/module",domain:"../domain",environment:"../env",translation:"../i18n","ecommerce-ah-online-settings":"ecommerce-ah-online-settings.min",fastclick:"../target/war/_js/vendor/fastclick"},shim:{"ecommerce-ah-online-bootstrap":{deps:["ecommerce-ah-online-settings"]}}}),require(["ecommerce-ah-online-bootstrap"],function(){return null}),define("config",function(){});